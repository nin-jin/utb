!function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function o(t,e,r,n,i){var o={};return Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function s(t,e,r,s,a){var l,u,c;void 0===s&&(s=new Tt),void 0===a&&(a=!1);var d=(c=u=function(t){function r(e,r){var n;(n=t.call(this,e,r)||this)._propsChanged=!0,n._el=void 0,n._lastData=null;var i=s;n._keys=void 0;var o=n.constructor,a=o.displayName;return e&&(n._keys=Object.keys(e),0===n._keys.length&&(n._keys=void 0),void 0!==e.__lom_ctx&&(i=e.__lom_ctx),e.id&&(a=e.id)),n._render=o.render,n._injector=i.copy(o.displayName,o.instance,n._render.aliases),n._injector.id=a,o.instance++,n}i(r,t);var o=r.prototype;return o.toString=function(){return this._injector.toString()},o.shouldComponentUpdate=function(t){if(void 0===this._keys)return!1;for(var e=this.props,r=this._keys,n=0,i=r.length;n<i;n++){var o=r[n];if(e[o]!==t[o])return this._propsChanged=!0,!0}return!0===this.constructor.isFullEqual&&(this._keys=Object.keys(t),this._propsChanged=r.length!==this._keys.length,this._propsChanged)},o.componentWillUnmount=function(){this["r()"].destructor(),this._el=void 0,this._keys=void 0,this.props=void 0,this._lastData=null,void 0!==this._render&&(this.constructor.instance--,this._injector.destructor(),this._injector=void 0)},o.r=function(t){var r=null,n=this._render,i=Tt.parentContext,o=Tt.parentContext=this._injector;try{r=o.invokeWithProps(n,this.props,this._propsChanged),this._lastData=r}catch(t){r=o.invokeWithProps(n.onError||e,{error:t,children:this._lastData}),t[kt]=!0}return o.rendered="",Tt.parentContext=i,this._propsChanged||(this._el=r,this.forceUpdate(),this._el=void 0),this._propsChanged=!1,r},o.render=function(){return void 0===this._el?this.r(this._propsChanged):this._el},n(r,[{key:"displayName",get:function(){return this.toString()}}]),r}(t),u.isFullEqual=a,l=c,o(l.prototype,"r",[r],Object.getOwnPropertyDescriptor(l.prototype,"r"),l.prototype),l);return function(t){var e=function(t,e){d.call(this,t,e)};return e._r=[2],e.instance=0,e.render=t,e.isFullEqual=t.isFullEqual||a,e.displayName=t.displayName||t.name,e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e}}function a(t,e,r){return function(){var n,i=arguments,o=i[1],s=i[0],a="function"==typeof s&&void 0===s.constructor.render,l=o?o._id||o.id:void 0,u=Tt.parentContext;if(!0===r){if(o||(o={}),o.id)u.id&&(o.id=u.id+"."+o.id);else{if(u.rendered)throw new Error(u.rendered+" need id");o.id=u.id,u.rendered=u.displayName+"."+s}o.key||(o.key=o.id)}if(a){if(null===(n=u.alias(s,l)))return null;void 0!==n&&(s=n),o?o.__lom_ctx=u:o={__lom_ctx:u},void 0===s.__lom&&(s.__lom=t(s)),n=s.__lom}else{if(l){if(null===(n=u.alias(s,l)))return null;void 0!==n&&(s=n)}n=s}switch(i.length){case 2:return e(n,o);case 3:return e(n,o,i[2]);case 4:return e(n,o,i[2],i[3]);case 5:return e(n,o,i[2],i[3],i[4]);case 6:return e(n,o,i[2],i[3],i[4],i[5]);case 7:return e(n,o,i[2],i[3],i[4],i[5],i[6]);case 8:return e(n,o,i[2],i[3],i[4],i[5],i[6],i[7]);case 9:return e(n,o,i[2],i[3],i[4],i[5],i[6],i[7],i[8]);default:if(!1===a)return e.apply(null,i);for(var c=[n,o],d=2,h=i.length;d<h;d++)c.push(i[d]);return e.apply(null,c)}}}function l(t,e,r){t.constructor[Ot]=e,r.value||r.set||(r.writable=!0)}function u(){}function c(t,e){var r,n,i,o,s=Et;for(o=arguments.length;o-- >2;)Pt.push(arguments[o]);for(e&&null!=e.children&&(Pt.length||Pt.push(e.children),delete e.children);Pt.length;)if((n=Pt.pop())&&void 0!==n.pop)for(o=n.length;o--;)Pt.push(n[o]);else"boolean"==typeof n&&(n=null),(i="function"!=typeof t)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(i=!1)),i&&r?s[s.length-1]+=n:s===Et?s=[n]:s.push(n),r=i;var a=new u;return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==zt.vnode&&zt.vnode(a),a}function d(t,e){for(var r in e)t[r]=e[r];return t}function h(t){!t._dirty&&(t._dirty=!0)&&1==Mt.push(t)&&(zt.debounceRendering||Dt)(p)}function p(){var t,e=Mt;for(Mt=[];t=e.pop();)t._dirty&&D(t)}function f(t,e,r){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&v(t,e.nodeName):r||t._componentConstructor===e.nodeName}function v(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function _(t){var e=d({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var n in r)void 0===e[n]&&(e[n]=r[n]);return e}function m(t,e){var r=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return r.normalizedNodeName=t,r}function y(t){var e=t.parentNode;e&&e.removeChild(t)}function g(t,e,r,n,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)r&&r(null),n&&n(t);else if("class"!==e||i)if("style"===e){if(n&&"string"!=typeof n&&"string"!=typeof r||(t.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof r)for(var o in r)o in n||(t.style[o]="");for(var o in n)t.style[o]="number"==typeof n[o]&&!1===At.test(o)?n[o]+"px":n[o]}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),n?r||t.addEventListener(e,w,s):t.removeEventListener(e,w,s),(t._listeners||(t._listeners={}))[e]=n}else if("list"!==e&&"type"!==e&&!i&&e in t)b(t,e,null==n?"":n),null!=n&&!1!==n||t.removeAttribute(e);else{var a=i&&e!==(e=e.replace(/^xlink\:?/,""));null==n||!1===n?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof n&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):t.setAttribute(e,n))}else t.className=n||""}function b(t,e,r){try{t[e]=r}catch(t){}}function w(t){return this._listeners[t.type](zt.event&&zt.event(t)||t)}function C(){for(var t;t=It.pop();)zt.afterMount&&zt.afterMount(t),t.componentDidMount&&t.componentDidMount()}function k(t,e,r,n,i,o){Ut++||(Wt=null!=i&&void 0!==i.ownerSVGElement,Rt=null!=t&&!("__preactattr_"in t));var s=x(t,e,r,n,o);return i&&s.parentNode!==i&&i.appendChild(s),--Ut||(Rt=!1,o||C()),s}function x(t,e,r,n,i){var o=t,s=Wt;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),S(t,!0))),o.__preactattr_=!0,o;var a=e.nodeName;if("function"==typeof a)return A(t,e,r,n);if(Wt="svg"===a||"foreignObject"!==a&&Wt,a=String(a),(!t||!v(t,a))&&(o=m(a,Wt),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),S(t,!0)}var l=o.firstChild,u=o.__preactattr_,c=e.children;if(null==u){u=o.__preactattr_={};for(var d=o.attributes,h=d.length;h--;)u[d[h].name]=d[h].value}return!Rt&&c&&1===c.length&&"string"==typeof c[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||null!=l)&&O(o,c,r,n,Rt||null!=u.dangerouslySetInnerHTML),j(o,e.attributes,u),Wt=s,o}function O(t,e,r,n,i){var o,s,a,l,u,c=t.childNodes,d=[],h={},p=0,v=0,_=c.length,m=0,g=e?e.length:0;if(0!==_)for(var b=0;b<_;b++){var w=c[b],C=w.__preactattr_;null!=(k=g&&C?w._component?w._component.__key:C.key:null)?(p++,h[k]=w):(C||(void 0!==w.splitText?!i||w.nodeValue.trim():i))&&(d[m++]=w)}if(0!==g)for(b=0;b<g;b++){u=null;var k;if(null!=(k=(l=e[b]).key))p&&void 0!==h[k]&&(u=h[k],h[k]=void 0,p--);else if(!u&&v<m)for(o=v;o<m;o++)if(void 0!==d[o]&&f(s=d[o],l,i)){u=s,d[o]=void 0,o===m-1&&m--,o===v&&v++;break}u=x(u,l,r,n),a=c[b],u&&u!==t&&u!==a&&(null==a?t.appendChild(u):u===a.nextSibling?y(a):t.insertBefore(u,a))}if(p)for(var b in h)void 0!==h[b]&&S(h[b],!1);for(;v<=m;)void 0!==(u=d[m--])&&S(u,!1)}function S(t,e){var r=t._component;r?M(r):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||y(t),N(t))}function N(t){for(t=t.lastChild;t;){var e=t.previousSibling;S(t,!0),t=e}}function j(t,e,r){var n;for(n in r)e&&null!=e[n]||null==r[n]||g(t,n,r[n],r[n]=void 0,Wt);for(n in e)"children"===n||"innerHTML"===n||n in r&&e[n]===("value"===n||"checked"===n?t[n]:r[n])||g(t,n,r[n],r[n]=e[n],Wt)}function T(t){var e=t.constructor.name;(Lt[e]||(Lt[e]=[])).push(t)}function z(t,e,r){var n,i=Lt[t.name];if(t.prototype&&t.prototype.render?(n=new t(e,r),I.call(n,e,r)):((n=new I(e,r)).constructor=t,n.render=P),i)for(var o=i.length;o--;)if(i[o].constructor===t){n.nextBase=i[o].nextBase,i.splice(o,1);break}return n}function P(t,e,r){return this.constructor(t,r)}function E(t,e,r,n,i){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,n),n&&n!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=n),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==r&&(1!==r&&!1===zt.syncComponentUpdates&&t.base?h(t):D(t,1,i)),t.__ref&&t.__ref(t))}function D(t,e,r,n){if(!t._disable){var i,o,s,a=t.props,l=t.state,u=t.context,c=t.prevProps||a,h=t.prevState||l,p=t.prevContext||u,f=t.base,v=t.nextBase,m=f||v,y=t._component,g=!1;if(f&&(t.props=c,t.state=h,t.context=p,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,l,u)?g=!0:t.componentWillUpdate&&t.componentWillUpdate(a,l,u),t.props=a,t.state=l,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!g){i=t.render(a,l,u),t.getChildContext&&(u=d(d({},u),t.getChildContext()));var b,w,x=i&&i.nodeName;if("function"==typeof x){var O=_(i);(o=y)&&o.constructor===x&&O.key==o.__key?E(o,O,1,u,!1):(b=o,t._component=o=z(x,O,u),o.nextBase=o.nextBase||v,o._parentComponent=t,E(o,O,0,u,!1),D(o,1,r,!0)),w=o.base}else s=m,(b=y)&&(s=t._component=null),(m||1===e)&&(s&&(s._component=null),w=k(s,i,u,r||!f,m&&m.parentNode,!0));if(m&&w!==m&&o!==y){var N=m.parentNode;N&&w!==N&&(N.replaceChild(w,m),b||(m._component=null,S(m,!1)))}if(b&&M(b),t.base=w,w&&!n){for(var j=t,T=t;T=T._parentComponent;)(j=T).base=w;w._component=j,w._componentConstructor=j.constructor}}if(!f||r?It.unshift(t):g||(t.componentDidUpdate&&t.componentDidUpdate(c,h,p),zt.afterUpdate&&zt.afterUpdate(t)),null!=t._renderCallbacks)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);Ut||n||C()}}function A(t,e,r,n){for(var i=t&&t._component,o=i,s=t,a=i&&t._componentConstructor===e.nodeName,l=a,u=_(e);i&&!l&&(i=i._parentComponent);)l=i.constructor===e.nodeName;return i&&l&&(!n||i._component)?(E(i,u,3,r,n),t=i.base):(o&&!a&&(M(o),t=s=null),i=z(e.nodeName,u,r),t&&!i.nextBase&&(i.nextBase=t,s=null),E(i,u,1,r,n),t=i.base,s&&t!==s&&(s._component=null,S(s,!1))),t}function M(t){zt.beforeUnmount&&zt.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?M(r):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.nextBase=e,y(e),T(t),N(e)),t.__ref&&t.__ref(null)}function I(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function U(t,e,r){return k(r,t,{},!1,e,!1)}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e,r){return e&&W(t.prototype,e),r&&W(t,r),t}function L(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function F(t,e){return(t.constructor.displayName||t.constructor.name)+"."+e}function V(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}function B(t){return new Proxy(t,Gt)}function H(t,e,r,n){if(void 0===n&&(n=[]),t===e)return e;if(r||!t||"object"!=typeof t||!e||"object"!=typeof e||t instanceof Error||e instanceof Error||t.constructor!==e.constructor||Xt.has(t))return t;Xt.set(t,!0);var i=Qt.get(t.constructor);if(!i)return t;if(-1!==n.indexOf(t))return t;n.push(t);var o=i(t,e,n);return n.pop(),o}function K(t){t.check()}function $(t){t.obsolete()}function J(t){t.dislead(this)}function q(t){this.status===Vt&&t.actualize()}function G(t,e,r){try{switch(r.length){case 0:return t[e]();case 1:return t[e](r[0]);case 2:return t[e](r[0],r[1]);case 3:return t[e](r[0],r[1],r[2]);case 4:return t[e](r[0],r[1],r[2],r[3]);case 5:return t[e](r[0],r[1],r[2],r[3],r[4]);default:return t[e].apply(t,r)}}catch(t){if(!(t instanceof $t))throw t}}function Q(t,e,r,n){var i=e+"$";if(void 0===r.value)throw new TypeError(F(t,e)+" is not an function (next?: V)");t[i]=r.value;var o=!1,s=F(t,e);return{enumerable:r.enumerable,configurable:r.configurable,get:function(){var t=this;if(o)return this[i].bind(this);var r=n?function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Jt(function(){return G(t,i,r)})}:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return G(t,i,r)};return V(r,s),o=!0,Object.defineProperty(this,e,{configurable:!0,enumerable:!1,value:r}),o=!1,r}}}function X(t,e,r){return Q(t,e,r,!0)}function Y(t,e,r){r.delete(t),t.slaves||t.destructor()}function Z(t,e,r){t[e+"$"]=r.value;var n=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return n.get(this)}}),{enumerable:r.enumerable,configurable:r.configurable,value:function(t){var r=n.get(this);return void 0===r&&(r=new te(e,this,ee,n,!1,void 0,void 0,!0),n.set(this,r)),t&&(r.status=Ft),r.value()}}}function tt(t,e){return function(r){return void 0===r?t.call(this):(e.call(this,r),r)}}function et(t){return function(e){return void 0===e&&t?t.call(this):e}}function rt(t,e,r,n){function i(t){var r=s.get(this);return void 0===r&&(r=new te(e,this,ee,s,n),s.set(this,r)),re===Ht?r:r.value(t,re)}var o=e+"$";if(void 0!==t[o])return r;var s=new WeakMap;if(Object.defineProperty(t,e+"()",{get:function(){return s.get(this)}}),void 0!==r.value)return t[o]=r.value,r.value=i,r;var a=F(t,e);return r.initializer&&V(r.initializer,a),r.get&&V(r.get,"get#"+a),r.set&&V(r.set,"set#"+a),t[o]=void 0===r.get&&void 0===r.set?et(r.initializer):tt(r.get,r.set),{enumerable:r.enumerable,configurable:r.configurable,get:i,set:i}}function nt(t,e,r){return rt(t,e,r,!0)}function it(t){for(var e=Object.keys(t).sort(),r="",n=0;n<e.length;n++){var i=e[n],o=t[i];r+="."+i+":"+("object"==typeof o?JSON.stringify(o):o)}return r}function ot(t){return t?t instanceof Array?JSON.stringify(t):"object"==typeof t?it(t):""+t:""}function st(t,e,r,n){var i=F(t,e),o=r.value;if(void 0===o)throw new TypeError(i+" is not an function (rawKey: K, next?: V)");t[e+"$"]=o;var s=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return s.get(this)}}),r.value=function(t,r){var i=s.get(this);void 0===i&&(i=new Map,s.set(this,i));var o=ot(t),a=i.get(o);return void 0===a&&(a=new te(e,this,ee,i,n,t,o),i.set(o,a)),re===Ht?a:a.value(r,re)},r}function at(t,e,r){return st(t,e,r,!0)}function lt(t){return re=Bt,t}function ut(t){return re=Bt,t.getRetry()}function ct(){for(var t="",e=0;e<32;e++){var r=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&r|8:r).toString(16)}return t}function dt(t,e){return 1===t?e:e+"s"}function ht(t){var e=t.error;return lom_h("div",null,e instanceof $t?lom_h("div",null,"Loading..."):lom_h("div",null,lom_h("h3",null,"Fatal error !"),lom_h("div",null,e.message),lom_h("pre",null,e.stack.toString())))}function pt(t,e,r,n,i){var o={};return Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function ft(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function vt(t,e,r,n,i){var o={};return Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function _t(t,e){var r=e.todoToAdd;return lom_h("header",{id:"header"},lom_h("h1",null,"todos"),lom_h("input",{id:"new-todo",placeholder:"What needs to be done?",onInput:r.onInput,value:r.title,onKeyDown:r.onKeyDown,autoFocus:!0}))}function mt(t){var e=t.nowShowing,r=t.count,n=t.completedCount,i=t.onClearCompleted;return lom_h("footer",{id:"footer"},lom_h("span",{id:"todo-count"},lom_h("strong",null,r)," ",dt(r,"item")," left"),lom_h("ul",{id:"filters"},lom_h("li",null,lom_h("a",{href:"./?todo_filter=all",className:{selected:e===ke}},"All"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=active",className:{selected:e===xe}},"Active"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=completed",className:{selected:e===Oe}},"Completed"))),n>0?lom_h("button",{id:"clear-completed",onClick:i},"Clear completed"):null)}function yt(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function gt(t,e,r,n,i){var o={};return Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function bt(t,e){var r=t.todo,n=e.editingId===r.id;return lom_h("li",{className:(r.completed?"completed ":" ")+(n?"editing":"")},lom_h("div",{className:"view"},lom_h("input",{className:"toggle",type:"checkbox",checked:r.completed||0,onClick:r.toggle}),lom_h("label",{onDblClick:e.beginEdit},r.title),lom_h("button",{className:"destroy",onClick:r.destroy})),n?lom_h("input",{ref:e.setFocus,className:"edit",value:e.editingId&&e.editText||r.title,onBlur:e.submit,onInput:e.setEditText,onKeyDown:e.onKey}):null)}function wt(t,e){var r=e.todoService,n=e.todoFilterService,i=r.todos;return lom_h("div",null,lom_h(_t,{addTodo:r.addTodo}),i.length?lom_h("section",{id:"main"},lom_h("input",{id:"toggle-all",type:"checkbox",onChange:r.toggleAll,checked:0===r.activeTodoCount}),lom_h("ul",{id:"todo-list"},n.filteredTodos.map(function(t){return lom_h(bt,{key:t.id,todo:t})}))):null,r.activeTodoCount||r.completedCount?lom_h(mt,{count:r.activeTodoCount,completedCount:r.completedCount,nowShowing:n.filter,onClearCompleted:r.clearCompleted}):null)}var Ct="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};r._r=[2],n._r=[2],i._r=[2];var kt=Symbol("rdiRendered"),xt=Symbol("rdiInst"),Ot=Symbol("rdiProp"),St=0,Nt=Symbol("rdiId"),jt=function(t){t[Nt]=""+ ++St,this.dest=t};jt._r=[2];var Tt=function(){function t(e,r,n,i,o,s){this.id="",this.rendered="",this._resolved=!1,this._listeners=void 0,this._state=n,this.instance=o||0,this.displayName=i||"",void 0===t.parentContext&&(t.parentContext=this);var a=this._cache=s||Object.create(null);if(void 0!==e)for(var l=0;l<e.length;l++){var u=e[l];if(u instanceof Array){var c=u[0];if("string"==typeof c)a[c]=u[1];else{void 0===c[Nt]&&(c[Nt]=""+ ++St);var d=u[1];a[c[Nt]]="function"!=typeof d||d instanceof jt?d:new jt(d)}}else{var h=u.constructor;void 0===h[Nt]&&(h[Nt]=""+ ++St),a[h[Nt]]=u}}}var e=t.prototype;return e.toString=function(){return this.displayName+(this.instance?"["+this.instance+"]":"")},e.toJSON=function(){return this._cache},e.value=function(t){var e=t[Nt];void 0===t[Nt]&&(e=t[Nt]=""+ ++St);var r=this._cache[e];if(void 0===r){r=this._cache[e]=this.invoke(t);var n=(t.displayName||t.name)+(this.instance>0?"["+this.instance+"]":"");r.displayName=this.displayName+"."+n,r[xt]=this;var i=void 0===this._state?void 0:this._state[n];if(i&&"object"==typeof i)for(var o in i)r[o]=i[o]}else r instanceof jt&&(r=this._cache[e]=this.value(r.dest));return r},e.destructor=function(){this._cache=void 0,this._listeners=void 0},e.invoke=function(t){var e=!1,r=t.deps;void 0!==t._r&&(e=2===t._r[0],r=r||t._r[1]);var n=this.resolve(r);if(e)switch(n.length){case 0:return t();case 1:return t(n[0]);case 2:return t(n[0],n[1]);case 3:return t(n[0],n[1],n[2]);case 4:return t(n[0],n[1],n[2],n[3]);case 5:return t(n[0],n[1],n[2],n[3],n[4]);case 6:return t(n[0],n[1],n[2],n[3],n[4],n[5]);default:return t.apply(void 0,n)}switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);default:return new(Function.prototype.bind.apply(t,[null].concat(n)))}},e.alias=function(t,e){var r=e;void 0===r&&void 0===(r=t[Nt])&&(r=t[Nt]=""+ ++St);var n=this._cache[r];return n instanceof jt?n.dest:void 0===n?t:n},e.invokeWithProps=function(t,e,r){var n=t.deps||(void 0===t._r?void 0:t._r[1]);if(void 0===n)return t(e);var i=this.resolve(n),o=this._listeners;if(!0===r&&void 0!==o)for(var s=0;s<o.length;s++){var a=o[s];a[a.constructor[Ot]]=e}switch(this._resolved=!0,i.length){case 0:return t(e);case 1:return t(e,i[0]);case 2:return t(e,i[0],i[1]);case 3:return t(e,i[0],i[1],i[2]);case 4:return t(e,i[0],i[1],i[2],i[3]);case 5:return t(e,i[0],i[1],i[2],i[3],i[4]);case 6:return t(e,i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return t(e,i[0],i[1],i[2],i[3],i[4],i[5],i[6]);default:return t.apply(void 0,[e].concat(i))}},e.copy=function(e,r,n){return new t(n,null,this._state,e,r,Object.create(this._cache))},e.resolve=function(t){var e=[];if(void 0===t)return e;for(var r=this._listeners,n=this._resolved,i=0,o=t.length;i<o;i++){var s=t[i];if("object"==typeof s){var a={};for(var l in s){var u=s[l],c=this.value(u);!1===n&&void 0!==u[Ot]&&(void 0===r&&(this._listeners=r=[]),r.push(c)),a[l]=c}e.push(a)}else{var d=this.value(s);!1===n&&void 0!==s[Ot]&&(void 0===r&&(this._listeners=r=[]),r.push(d)),e.push(d)}}return e},t}();o._r=[2],s._r=[2],a._r=[2],l._r=[2],u._r=[2];var zt={},Pt=[],Et=[];c._r=[2],d._r=[2];var Dt="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,At=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Mt=[];h._r=[2],p._r=[2],f._r=[2],v._r=[2],_._r=[2],m._r=[2],y._r=[2],g._r=[2],b._r=[2],w._r=[2];var It=[],Ut=0,Wt=!1,Rt=!1;C._r=[2],k._r=[2],x._r=[2],O._r=[2],S._r=[2],N._r=[2],j._r=[2];var Lt={};T._r=[2],z._r=[2],P._r=[2],E._r=[2],D._r=[2],A._r=[2],M._r=[2],I._r=[2],d(I.prototype,{setState:function(t,e){var r=this.state;this.prevState||(this.prevState=d({},r)),d(r,"function"==typeof t?t(r,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),h(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),D(this,2)},render:function(){}}),U._r=[2],W._r=[2],R._r=[2],L._r=[2];var Ft=1,Vt=2,Bt=0,Ht=3,Kt=Symbol("lom_cached"),$t=function(t){function e(e){var r;return void 0===e&&(e="Wait..."),r=t.call(this,e)||this,r.__proto__=new.target.prototype,r[Kt]=!0,r}return L(e,t),e}(Error);F._r=[2],V._r=[2];var Jt="function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},qt=Symbol("lom_error_orig"),Gt={get:function(t,e){if(e===qt)return t.valueOf();throw t.valueOf()},ownKeys:function(t){throw t.valueOf()}};B._r=[2];var Qt=new Map([[Array,function(t,e,r){for(var n=t.length===e.length,i=0;i<t.length;++i){var o=t[i]=H(t[i],e[i],!1,r);n&&o!==e[i]&&(n=!1)}return n?e:t}],[Object,function(t,e,r){var n=0,i=!0;for(var o in t){var s=t[o]=H(t[o],e[o],!1,r);i&&s!==e[o]&&(i=!1),++n}for(var a in e)if(--n<0)break;return i&&0===n?e:t}],[Date,function(t,e){return t.getTime()===e.getTime()?e:t}],[RegExp,function(t,e){return t.toString()===e.toString()?e:t}]]),Xt=new WeakMap;H._r=[2];var Yt,Zt;K._r=[2],$._r=[2],J._r=[2],q._r=[2];var te=(Zt=Yt=function(){function t(t,e,r,n,i,o,s,a){this._masters=null,this._slaves=null,this._keyHash=s,this.key=o,this.field=t,this.owner=e,this.isComponent=a||!1,this.manualReset=i||!1,this._context=r,this.current=void 0,this._next=void 0,this._suggested=void 0,this._hostAtoms=n,this.status=Ft}var e=t.prototype;return e.toString=function(){var t=this.key,e=this.owner,r=e.displayName||e.constructor.displayName||e.constructor.name;return String(r)+"."+this.field+(t?"("+("function"==typeof t?t.displayName||t.name:String(t))+")":"")},e.toJSON=function(){return this.current},e.destructor=function(){0!==this.status&&(this._masters&&this._masters.forEach(J,this),this._masters=null,this._checkSlaves(),this._slaves=null,this._hostAtoms.delete(this._keyHash||this.owner),this._context.destroyHost(this),this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=0,this._hostAtoms=void 0,this.key=void 0,this._keyHash=void 0,this._retry=void 0)},e.value=function(t,e){var r=this._context,n=this.current;if(1===e)void 0===t?(this._suggested=this._next,this._next=void 0,this.status=5,this._slaves&&this._slaves.forEach($)):this._push(t);else{var i=r.current;if(i&&(!i.isComponent||!this.isComponent)){var o=this._slaves;o||(o=this._slaves=new Set,r.unreap(this)),o.add(i),i.addMaster(this)}var s;void 0!==t&&(s=H(t,this._suggested,this.isComponent))!==this._suggested&&(n instanceof Error||(s=H(t,n,this.isComponent))!==n)&&(this._suggested=this._next=s,this.status=Ft),this.actualize()}if((n=this.current)instanceof Error){if(e!==Bt)return B(n);throw n}return n},e.actualize=function(){if(3===this.status)throw new Error("Cyclic atom dependency of "+String(this));this.status===Vt&&(this._masters&&this._masters.forEach(q,this),this.status===Vt&&(this.status=4));var e=t.deepReset;5!==this.status||this.isComponent?void 0===e||this.manualReset||e.has(this)?4!==this.status&&this.refresh():(e.add(this),this.refresh()):(t.deepReset=e||new Set,this.refresh(),t.deepReset=e)},e._push=function(t){this.status=4;var e,r=this.current;t instanceof Error?(t[qt]&&(t=t[qt]),e=t):(e=H(t,r,this.isComponent),this._suggested=this._next,this._next=void 0),r!==e&&(this.current=e,this._context.newValue(this,r,e),this._slaves&&this._slaves.forEach($))},e.refresh=function(){var t=this._masters;t&&(t.forEach(J,this),this._masters=null);var e;this.status=3;var r=this._context,n=r.current;r.current=this;var i=this.field+"$",o=this._next;try{e=void 0===this.key?this.owner[i](o):this.owner[i](this.key,o)}catch(t){void 0===t[Kt]&&(t[Kt]=!0,console.error(t.stack||t)),e=t}r.current=n,5!==this.status&&this._push(e)},e.dislead=function(t){var e=this._slaves;e&&(e.delete(t),0===e.size&&(this._slaves=null,this._context.proposeToReap(this)))},e._checkSlaves=function(){this._slaves?this._slaves.forEach(K):this._context.proposeToPull(this)},e.check=function(){4===this.status&&(this.status=Vt,this._checkSlaves())},e.obsolete=function(){this.status!==Ft&&(this.status=Ft,this._checkSlaves())},e.addMaster=function(t){this._masters||(this._masters=new Set),this._masters.add(t)},e.getRetry=function(){var t=this;if(void 0===this._retry){var e=function(){return t.refresh()};e._r=[2],V(e,"atom("+this.displayName+").retry()"),this._retry=e}return this._retry},R(t,[{key:"displayName",get:function(){return this.toString()}}]),t}(),Yt.deepReset=void 0,Zt);G._r=[2],Q._r=[2],X._r=[2],Q.defer=X,Y._r=[2];var ee=new(function(){function t(){var t=this;this.current=null,this._logger=void 0,this._updating=[],this._reaping=new Set,this._scheduled=!1,this._namespace="$",this._owners=new WeakMap,this.__run=function(){t._scheduled&&(t._scheduled=!1,t._run())},this._start=0,this._pendCount=0}var e=t.prototype;return e._destroyValue=function(t,e){if(this._owners.get(e)===t){try{e.destructor()}catch(e){console.error(e),this._logger&&this._logger.error(t,e)}this._owners.delete(e)}},e.destroyHost=function(t){this._destroyValue(t,t.current),void 0!==this._logger&&this._logger.onDestruct(t)},e.setLogger=function(t){this._logger=t},e.newValue=function(t,e,r){this._destroyValue(t,e),!r||"object"!=typeof r||r instanceof Error||"function"!=typeof r.destructor||this._owners.set(r,t);var n=this._logger;if(void 0!==n)try{n.newValue(t,e,r)}catch(e){console.error(e),n.error(t,e)}},e.proposeToPull=function(t){this._updating.push(t),this._schedule()},e.proposeToReap=function(t){this._reaping.add(t),this._schedule()},e.unreap=function(t){this._reaping.delete(t)},e._schedule=function(){this._scheduled||(Jt(this.__run),this._scheduled=!0)},e._run=function(){this._schedule();var t=this._reaping,e=this._updating,r=this._start;do{for(var n=e.length,i=r;i<n;i++){this._start=i;var o=e[i];t.has(o)||0===o.status||o.actualize()}r=n}while(e.length>r);for(e.length=0,this._start=0;t.size>0;)t.forEach(Y);this._scheduled=!1,this._pendCount=0},e.beginTransaction=function(t){var e=this._namespace;return this._namespace=t,this._pendCount++,e},e.endTransaction=function(t){this._namespace=t,1===this._pendCount?this._run():this._pendCount--},t}());Z._r=[2],tt._r=[2],et._r=[2];var re=Bt;rt._r=[2],nt._r=[2],it._r=[2],ot._r=[2],st._r=[2],at._r=[2],st.manual=at,lt._r=[2],ut._r=[2],Object.defineProperties(rt,{cache:{get:function(){return re=1,lt}},getRetry:{get:function(){return re=Ht,ut}},async:{get:function(){return re=2,lt}},manual:{value:nt},key:{value:st}});var ne,ie;ct._r=[2],dt._r=[2,[Number,String]];var oe=function(){function t(){}return t.prototype.location=function(t,e){throw new Error("implement")},t}(),se=(ne=rt.key,ie=function(t){function e(e,r){var n;return n=t.call(this)||this,n._ns="lom_app",n._location=e,n._history=r,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var r=e.prototype;return r._params=function(){return new URLSearchParams(this._location.search)},r.location=function(t,e){var r=this._params();return void 0===e?r.get(t):(r.set(t,e),this._history.pushState(null,this._ns,"?"+r.toString()),e)},e}(oe),function(t,e,r,n,i){var o={};Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null)}(ie.prototype,"location",[ne],Object.getOwnPropertyDescriptor(ie.prototype,"location"),ie.prototype),ie);se._r=[0,[Location,History]],ht._r=[1];var ae=a(s(I,ht,Z,new Tt([[oe,new se(location,history)]])),c);Ct.lom_h=ae;var le,ue=function(){function t(t,e){var r=this;void 0===t&&(t={}),this.destroy=function(){r._store.remove(r.id)},this.toggle=function(){r.completed=!r.completed,r._store.saveTodo(r.toJSON())},this._title=t.title||"",this.id=t.id||ct(),this.completed=t.completed||!1,this._store=e}return t.prototype.toJSON=function(){return{completed:this.completed,title:this._title,id:this.id}},e(t,[{key:"title",get:function(){return this._title},set:function(t){this._title=t,this._store.saveTodo(this.toJSON())}}]),t}();ue._r=[0,[pe]];var ce,de,he,pe=(le=function(){function t(){}var r=t.prototype;return r.addTodo=function(t){var e=new ue({title:t},this),r=this.todos.slice(0);r.push(e),this.todos=r},r.saveTodo=function(t){var e=this;this.todos=this.todos.map(function(r){return r.id===t.id?new ue(t,e):r})},r.remove=function(t){this.todos=this.todos.filter(function(e){return e.id!==t})},r.toggleAll=function(){var t=this,e=this.activeTodoCount>0;this.todos=this.todos.map(function(r){return new ue({title:r.title,id:r.id,completed:e},t)})},r.clearCompleted=function(){for(var t=[],e=[],r=0;r<this.todos.length;r++){var n=this.todos[r];n.completed?e.push(n.id):t.push(n)}this.todos=t},e(t,[{key:"todos",get:function(){return[]},set:function(t){}},{key:"activeTodoCount",get:function(){return this.todos.reduce(function(t,e){return t+(e.completed?0:1)},0)}},{key:"completedCount",get:function(){return this.todos.length-this.activeTodoCount}}]),t}(),pt(le.prototype,"todos",[rt],Object.getOwnPropertyDescriptor(le.prototype,"todos"),le.prototype),pt(le.prototype,"todos",[rt],Object.getOwnPropertyDescriptor(le.prototype,"todos"),le.prototype),pt(le.prototype,"activeTodoCount",[rt],Object.getOwnPropertyDescriptor(le.prototype,"activeTodoCount"),le.prototype),pt(le.prototype,"addTodo",[Q],Object.getOwnPropertyDescriptor(le.prototype,"addTodo"),le.prototype),pt(le.prototype,"saveTodo",[Q],Object.getOwnPropertyDescriptor(le.prototype,"saveTodo"),le.prototype),pt(le.prototype,"remove",[Q],Object.getOwnPropertyDescriptor(le.prototype,"remove"),le.prototype),pt(le.prototype,"toggleAll",[Q],Object.getOwnPropertyDescriptor(le.prototype,"toggleAll"),le.prototype),pt(le.prototype,"clearCompleted",[Q],Object.getOwnPropertyDescriptor(le.prototype,"clearCompleted"),le.prototype),le),fe="all",ve="complete",_e="active",me=(he=de=function(){function t(t,e){this._todoService=t,this._locationStore=e}return e(t,[{key:"filter",get:function(){return this._locationStore.location("todo_filter")||fe},set:function(t){return this._locationStore.location("todo_filter",t)}},{key:"filteredTodos",get:function(){var t=this._todoService.todos;switch(this.filter){case fe:return t;case ve:return t.filter(function(t){return!!t.completed});case _e:return t.filter(function(t){return!t.completed});default:throw new Error("Unknown filter value: "+this.filter)}}}]),t}(),de.deps=[pe,oe],ce=he,function(t,e,r,n,i){var o={};Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null)}(ce.prototype,"filteredTodos",[rt],Object.getOwnPropertyDescriptor(ce.prototype,"filteredTodos"),ce.prototype),ce);me._r=[0,[pe,oe]];var ye,ge,be,we=13,Ce=(ye=function(){function t(){var t=this;ft(this,"title",ge,this),ft(this,"_props",be,this),this.onKeyDown=function(e){if(e.keyCode===we&&t.title){e.preventDefault();var r=t.title.trim();r&&(t._props.addTodo(r),t.title="")}}}return t.prototype.onInput=function(t){var e=t.target;this.title=e.value},t}(),ge=vt(ye.prototype,"title",[rt],{enumerable:!0,initializer:function(){return""}}),be=vt(ye.prototype,"_props",[l],{enumerable:!0,initializer:null}),vt(ye.prototype,"onInput",[Q],Object.getOwnPropertyDescriptor(ye.prototype,"onInput"),ye.prototype),ye);_t._r=[1,[{todoToAdd:Ce}]],_t.deps=[{todoToAdd:Ce}];var ke="all",xe="active",Oe="completed";mt._r=[1];var Se,Ne,je,Te,ze=27,Pe=13,Ee=(Se=function(){function t(){var t=this;yt(this,"editingId",Ne,this),yt(this,"editText",je,this),yt(this,"_props",Te,this),this.beginEdit=function(){t.editText=t._props.todo.title,t.editingId=t._props.todo.id},this.setFocus=function(t){t&&setTimeout(function(){return t.focus()},0)},this.cancel=function(){t.editingId=null},this.submit=function(){t.editingId&&(t._props.todo.title=t.editText,t.editText="",t.editingId=null)},this.onKey=function(e){e.which===ze?t.cancel():e.which===Pe&&t.submit()}}return t.prototype.setEditText=function(t){this.editText=t.target.value},t}(),Ne=gt(Se.prototype,"editingId",[rt],{enumerable:!0,initializer:function(){return null}}),je=gt(Se.prototype,"editText",[rt],{enumerable:!0,initializer:function(){return""}}),Te=gt(Se.prototype,"_props",[l],{enumerable:!0,initializer:null}),gt(Se.prototype,"setEditText",[Q],Object.getOwnPropertyDescriptor(Se.prototype,"setEditText"),Se.prototype),Se);bt._r=[1,[Ee]],bt.deps=[Ee],wt._r=[1,[{todoService:pe,todoFilterService:me}]],wt.deps=[{todoService:pe,todoFilterService:me}],U(lom_h(wt,null),document.getElementById("todoapp"))}();
//# sourceMappingURL=bundle.js.map
