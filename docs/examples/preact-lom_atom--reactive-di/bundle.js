!function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function a(t,e){return(t.constructor.displayName||t.constructor.name)+"."+e}function l(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}function u(t){return new Proxy(t,Gt)}function c(t,e,r){r.delete(t),t.slaves||t.destructor()}function d(t,e,r,n){if(void 0===n&&(n=[]),t===e)return e;if(r||!t||"object"!=typeof t||!e||"object"!=typeof e||t instanceof Error||e instanceof Error||t.constructor!==e.constructor||Yt.has(t))return t;Yt.set(t,!0);var o=Xt.get(t.constructor);if(!o)return t;if(-1!==n.indexOf(t))return t;n.push(t);var i=o(t,e,n);return n.pop(),i}function p(t){t.check()}function h(t){t.obsolete()}function f(t){t.dislead(this)}function v(t){this.status===Mt&&t.actualize()}function _(t,e,r){function n(){var n=arguments;try{switch(n.length){case 0:t[e]();break;case 1:t[e](n[0]);break;case 2:t[e](n[0],n[1]);break;case 3:t[e](n[0],n[1],n[2]);break;case 4:t[e](n[0],n[1],n[2],n[3]);break;case 5:t[e](n[0],n[1],n[2],n[3],n[4]);break;default:t[e].apply(t,n)}}catch(t){if(!(t instanceof Jt))throw t}r&&Qt.sync()}return l(n,a(t,e)),n}function y(t){function e(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];$t(function(){return t.apply(void 0,r)})}return e.displayName=t.displayName+"_defered",e}function m(t,e,r,n,o){var i=e+"$";if(void 0===r.value)throw new TypeError(a(t,e)+" is not an function (next?: V)");t[i]=r.value;var s=!1;return{enumerable:r.enumerable,configurable:!0,get:function(){if(s)return this[i].bind(this);var t=_(this,i,o),r=n?y(t):t;return s=!0,Object.defineProperty(this,e,{configurable:!0,enumerable:!1,value:r}),s=!1,r}}}function g(t,e,r){return m(t,e,r,!0)}function b(t,e,r){return m(t,e,r,!1,!0)}function w(t,e,r){t[e+"$"]=r.value;var n=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return n.get(this)}}),{enumerable:r.enumerable,configurable:r.configurable,value:function(t){var r=n.get(this);return void 0===r&&(r=new te(e,this,Qt,n,!1,void 0,void 0,!0),n.set(this,r)),t&&(r.status=Lt),r.value()}}}function k(t,e){return function(r){return void 0===r?t.call(this):(e.call(this,r),r)}}function C(t){return function(e){return void 0===e&&t?t.call(this):e}}function O(t,e,r,n){function o(t){var r=s.get(this);return void 0===r&&(r=new te(e,this,Qt,s,n),s.set(this,r)),ee===Bt?r:r.value(t,ee)}var i=e+"$";if(void 0!==t[i])return r;var s=new WeakMap;if(Object.defineProperty(t,e+"()",{get:function(){return s.get(this)}}),void 0!==r.value)return t[i]=r.value,r.value=o,r;var u=a(t,e);return r.initializer&&l(r.initializer,u),r.get&&l(r.get,"get#"+u),r.set&&l(r.set,"set#"+u),t[i]=void 0===r.get&&void 0===r.set?C(r.initializer):k(r.get,r.set),{enumerable:r.enumerable,configurable:r.configurable,get:o,set:o}}function x(t,e,r){return O(t,e,r,!0)}function S(t){for(var e=Object.keys(t).sort(),r="",n=0;n<e.length;n++){var o=e[n],i=t[o];r+="."+o+":"+("object"==typeof i?JSON.stringify(i):i)}return r}function j(t){return t?t instanceof Array?JSON.stringify(t):"object"==typeof t?S(t):""+t:""}function N(t,e,r,n){function o(t,r){var o=l.get(this);void 0===o&&(o=new Map,l.set(this,o));var i=j(t),s=o.get(i);return void 0===s&&(s=new te(e,this,Qt,o,n,t,i),o.set(i,s)),ee===Bt?s:s.value(r,ee)}var i=a(t,e),s=r.value;if(void 0===s)throw new TypeError(i+" is not an function (rawKey: K, next?: V)");t[e+"$"]=s;var l=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return l.get(this)}}),r.value=o,r}function T(t,e,r){return N(t,e,r,!0)}function P(t){return ee=Rt,t}function E(t){return ee=Rt,t.getRetry()}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function D(t,e,r){return e&&z(t.prototype,e),r&&z(t,r),t}function A(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function I(t,e,r,n,o){var i={};return Object.keys(n).forEach(function(t){i[t]=n[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function L(t,e,r,n,o){var i,s,a;void 0===n&&(n=new le),void 0===o&&(o=!1);var l=(a=s=function(t){function r(e,r){var o;(o=t.call(this,e,r)||this)._propsChanged=!0,o._el=void 0,o._lastData=null;var i=n;o._keys=void 0;var s=o.constructor,a=s.displayName;return e&&(o._keys=Object.keys(e),0===o._keys.length&&(o._keys=void 0),void 0!==e.__lom_ctx&&(i=e.__lom_ctx),e.id&&(a=e.id)),o._render=s.render,o._injector=i.copy(s.displayName,s.instance,o._render.aliases),o._injector.id=a,o._injector.props=e,s.instance++,o}A(r,t);var o=r.prototype;return o.toString=function(){return this._injector.toString()},o.shouldComponentUpdate=function(t){if(void 0===this._keys)return!1;var e=this.props,r=this._keys;this._injector.props=t;for(var n=0,o=r.length;n<o;n++){var i=r[n];if(e[i]!==t[i])return this._propsChanged=!0,!0}return!0===this.constructor.isFullEqual&&(this._keys=Object.keys(t),this._propsChanged=r.length!==this._keys.length,this._propsChanged)},o.componentWillUnmount=function(){this["r()"].destructor(),this._el=void 0,this._keys=void 0,this.props=void 0,this._lastData=null,void 0!==this._render&&(this.constructor.instance--,this._injector.destructor(),this._injector=void 0)},o.r=function(t){var r=null,n=this._render,o=le.parentContext,i=le.parentContext=this._injector;try{r=i.invokeWithProps(n,this.props,this._propsChanged),this._lastData=r}catch(t){r=i.invokeWithProps(n.onError||e,{error:t,children:this._lastData}),t[re]=!0}return le.parentContext=o,this._propsChanged||(this._el=r,this.forceUpdate(),this._el=void 0),this._propsChanged=!1,r},o.render=function(){return void 0===this._el?this.r(this._propsChanged):this._el},D(r,[{key:"displayName",get:function(){return this.toString()}}]),r}(t),s.isFullEqual=o,i=a,I(i.prototype,"r",[r],Object.getOwnPropertyDescriptor(i.prototype,"r"),i.prototype),i);return function(t){var e=function(t,e){l.call(this,t,e)};return e.instance=0,e.render=t,e.isFullEqual=t.isFullEqual||o,e.displayName=t.displayName||t.name,e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e}}function M(t,e,r){function n(){var n,o=arguments,i=o[1],s=o[0],a="function"==typeof s&&void 0===s.constructor.render,l=le.parentContext,u=l.props,c=void 0;if(i){var d=l.id;if(c=i.rdi_id||i.id,!0===i.rdi_theme){if(i.rdi_theme=void 0,u){var p=u.class;void 0!==p&&(i.class=void 0!==i.class?i.class+" "+p:p);var h=u.style;if(void 0!==h){var f=i.style;if(f)for(var v in h)f[v]=h[v];else i.style=h}}r&&(i.id=d)}else r&&""!==d&&void 0!==i.id&&(i.id=d+"."+i.id)}if(a){if(null===(n=l.alias(s,c)))return null;void 0!==n&&(s=n),i?i.__lom_ctx=l:i={__lom_ctx:l},void 0===s.__lom&&(s.__lom=t(s)),n=s.__lom}else{if(c){if(null===(n=l.alias(s,c)))return null;void 0!==n&&(s=n)}n=s}switch(o.length){case 2:return e(n,i);case 3:return e(n,i,o[2]);case 4:return e(n,i,o[2],o[3]);case 5:return e(n,i,o[2],o[3],o[4]);case 6:return e(n,i,o[2],o[3],o[4],o[5]);case 7:return e(n,i,o[2],o[3],o[4],o[5],o[6]);case 8:return e(n,i,o[2],o[3],o[4],o[5],o[6],o[7]);case 9:return e(n,i,o[2],o[3],o[4],o[5],o[6],o[7],o[8]);default:if(!1===a)return e.apply(null,o);for(var _=[n,i],y=2,m=o.length;y<m;y++)_.push(o[y]);return e.apply(null,_)}}return n}function U(t,e,r){t.constructor[oe]=e,r.value||r.set||(r.writable=!0)}function W(){}function V(t,e){var r,n,o,i,s=de;for(i=arguments.length;i-- >2;)ce.push(arguments[i]);for(e&&null!=e.children&&(ce.length||ce.push(e.children),delete e.children);ce.length;)if((n=ce.pop())&&void 0!==n.pop)for(i=n.length;i--;)ce.push(n[i]);else"boolean"==typeof n&&(n=null),(o="function"!=typeof t)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(o=!1)),o&&r?s[s.length-1]+=n:s===de?s=[n]:s.push(n),r=o;var a=new W;return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==ue.vnode&&ue.vnode(a),a}function R(t,e){for(var r in e)t[r]=e[r];return t}function F(t){!t._dirty&&(t._dirty=!0)&&1==fe.push(t)&&(ue.debounceRendering||pe)(K)}function K(){var t,e=fe;for(fe=[];t=e.pop();)t._dirty&&ut(t)}function B(t,e,r){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&H(t,e.nodeName):r||t._componentConstructor===e.nodeName}function H(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function J(t){var e=R({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var n in r)void 0===e[n]&&(e[n]=r[n]);return e}function $(t,e){var r=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return r.normalizedNodeName=t,r}function q(t){var e=t.parentNode;e&&e.removeChild(t)}function G(t,e,r,n,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)r&&r(null),n&&n(t);else if("class"!==e||o)if("style"===e){if(n&&"string"!=typeof n&&"string"!=typeof r||(t.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof r)for(var i in r)i in n||(t.style[i]="");for(var i in n)t.style[i]="number"==typeof n[i]&&!1===he.test(i)?n[i]+"px":n[i]}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),n?r||t.addEventListener(e,X,s):t.removeEventListener(e,X,s),(t._listeners||(t._listeners={}))[e]=n}else if("list"!==e&&"type"!==e&&!o&&e in t)Q(t,e,null==n?"":n),null!=n&&!1!==n||t.removeAttribute(e);else{var a=o&&e!==(e=e.replace(/^xlink\:?/,""));null==n||!1===n?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof n&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):t.setAttribute(e,n))}else t.className=n||""}function Q(t,e,r){try{t[e]=r}catch(t){}}function X(t){return this._listeners[t.type](ue.event&&ue.event(t)||t)}function Y(){for(var t;t=ve.pop();)ue.afterMount&&ue.afterMount(t),t.componentDidMount&&t.componentDidMount()}function Z(t,e,r,n,o,i){_e++||(ye=null!=o&&void 0!==o.ownerSVGElement,me=null!=t&&!("__preactattr_"in t));var s=tt(t,e,r,n,i);return o&&s.parentNode!==o&&o.appendChild(s),--_e||(me=!1,i||Y()),s}function tt(t,e,r,n,o){var i=t,s=ye;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),rt(t,!0))),i.__preactattr_=!0,i;var a=e.nodeName;if("function"==typeof a)return ct(t,e,r,n);if(ye="svg"===a||"foreignObject"!==a&&ye,a=String(a),(!t||!H(t,a))&&(i=$(a,ye),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),rt(t,!0)}var l=i.firstChild,u=i.__preactattr_,c=e.children;if(null==u){u=i.__preactattr_={};for(var d=i.attributes,p=d.length;p--;)u[d[p].name]=d[p].value}return!me&&c&&1===c.length&&"string"==typeof c[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||null!=l)&&et(i,c,r,n,me||null!=u.dangerouslySetInnerHTML),ot(i,e.attributes,u),ye=s,i}function et(t,e,r,n,o){var i,s,a,l,u,c=t.childNodes,d=[],p={},h=0,f=0,v=c.length,_=0,y=e?e.length:0;if(0!==v)for(var m=0;m<v;m++){var g=c[m],b=g.__preactattr_;null!=(w=y&&b?g._component?g._component.__key:b.key:null)?(h++,p[w]=g):(b||(void 0!==g.splitText?!o||g.nodeValue.trim():o))&&(d[_++]=g)}if(0!==y)for(m=0;m<y;m++){u=null;var w;if(null!=(w=(l=e[m]).key))h&&void 0!==p[w]&&(u=p[w],p[w]=void 0,h--);else if(!u&&f<_)for(i=f;i<_;i++)if(void 0!==d[i]&&B(s=d[i],l,o)){u=s,d[i]=void 0,i===_-1&&_--,i===f&&f++;break}u=tt(u,l,r,n),a=c[m],u&&u!==t&&u!==a&&(null==a?t.appendChild(u):u===a.nextSibling?q(a):t.insertBefore(u,a))}if(h)for(var m in p)void 0!==p[m]&&rt(p[m],!1);for(;f<=_;)void 0!==(u=d[_--])&&rt(u,!1)}function rt(t,e){var r=t._component;r?dt(r):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||q(t),nt(t))}function nt(t){for(t=t.lastChild;t;){var e=t.previousSibling;rt(t,!0),t=e}}function ot(t,e,r){var n;for(n in r)e&&null!=e[n]||null==r[n]||G(t,n,r[n],r[n]=void 0,ye);for(n in e)"children"===n||"innerHTML"===n||n in r&&e[n]===("value"===n||"checked"===n?t[n]:r[n])||G(t,n,r[n],r[n]=e[n],ye)}function it(t){var e=t.constructor.name;(ge[e]||(ge[e]=[])).push(t)}function st(t,e,r){var n,o=ge[t.name];if(t.prototype&&t.prototype.render?(n=new t(e,r),pt.call(n,e,r)):((n=new pt(e,r)).constructor=t,n.render=at),o)for(var i=o.length;i--;)if(o[i].constructor===t){n.nextBase=o[i].nextBase,o.splice(i,1);break}return n}function at(t,e,r){return this.constructor(t,r)}function lt(t,e,r,n,o){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||o?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,n),n&&n!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=n),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==r&&(1!==r&&!1===ue.syncComponentUpdates&&t.base?F(t):ut(t,1,o)),t.__ref&&t.__ref(t))}function ut(t,e,r,n){if(!t._disable){var o,i,s,a=t.props,l=t.state,u=t.context,c=t.prevProps||a,d=t.prevState||l,p=t.prevContext||u,h=t.base,f=t.nextBase,v=h||f,_=t._component,y=!1;if(h&&(t.props=c,t.state=d,t.context=p,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,l,u)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(a,l,u),t.props=a,t.state=l,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){o=t.render(a,l,u),t.getChildContext&&(u=R(R({},u),t.getChildContext()));var m,g,b=o&&o.nodeName;if("function"==typeof b){var w=J(o);(i=_)&&i.constructor===b&&w.key==i.__key?lt(i,w,1,u,!1):(m=i,t._component=i=st(b,w,u),i.nextBase=i.nextBase||f,i._parentComponent=t,lt(i,w,0,u,!1),ut(i,1,r,!0)),g=i.base}else s=v,(m=_)&&(s=t._component=null),(v||1===e)&&(s&&(s._component=null),g=Z(s,o,u,r||!h,v&&v.parentNode,!0));if(v&&g!==v&&i!==_){var k=v.parentNode;k&&g!==k&&(k.replaceChild(g,v),m||(v._component=null,rt(v,!1)))}if(m&&dt(m),t.base=g,g&&!n){for(var C=t,O=t;O=O._parentComponent;)(C=O).base=g;g._component=C,g._componentConstructor=C.constructor}}if(!h||r?ve.unshift(t):y||(t.componentDidUpdate&&t.componentDidUpdate(c,d,p),ue.afterUpdate&&ue.afterUpdate(t)),null!=t._renderCallbacks)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);_e||n||Y()}}function ct(t,e,r,n){for(var o=t&&t._component,i=o,s=t,a=o&&t._componentConstructor===e.nodeName,l=a,u=J(e);o&&!l&&(o=o._parentComponent);)l=o.constructor===e.nodeName;return o&&l&&(!n||o._component)?(lt(o,u,3,r,n),t=o.base):(i&&!a&&(dt(i),t=s=null),o=st(e.nodeName,u,r),t&&!o.nextBase&&(o.nextBase=t,s=null),lt(o,u,1,r,n),t=o.base,s&&t!==s&&(s._component=null,rt(s,!1))),t}function dt(t){ue.beforeUnmount&&ue.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?dt(r):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.nextBase=e,q(e),it(t),nt(e)),t.__ref&&t.__ref(null)}function pt(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function ht(t,e,r){return Z(r,t,{},!1,e,!1)}function ft(){for(var t="",e=0;e<32;e++){var r=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&r|8:r).toString(16)}return t}function vt(t,e){return 1===t?e:e+"s"}function _t(){var t=document.getElementById("todoapp");if(!t)throw new Error("todoapp id not found in document");return t}function yt(t){var e=t.error;return lom_h("div",null,e instanceof Jt?lom_h("div",null,"Loading..."):lom_h("div",null,lom_h("h3",null,"Fatal error !"),lom_h("div",null,e.message),lom_h("pre",null,e.stack.toString())))}function mt(t,e,r,n,o){var i={};return Object.keys(n).forEach(function(t){i[t]=n[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function gt(t){var e=t.onInput,r=t.title,n=t.onKeyDown;return lom_h("header",{id:"header"},lom_h("h1",null,"todos"),lom_h("input",{id:"new-todo",placeholder:"What needs to be done?",onInput:e,value:r,onKeyDown:n,autoFocus:!0}))}function bt(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function wt(t,e,r,n,o){var i={};return Object.keys(n).forEach(function(t){i[t]=n[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function kt(t,e){return gt(e.todoHeaderService)}function Ct(t){var e=t.filter,r=t.activeTodoCount,n=t.completedCount,o=t.clearCompleted;return r||n?lom_h("footer",{id:"footer"},lom_h("span",{id:"todo-activeTodoCount"},lom_h("strong",null,r)," ",vt(r,"item")," left"),lom_h("ul",{id:"filters"},lom_h("li",null,lom_h("a",{href:"./?todo_filter=all",className:{selected:e===Le}},"All"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=active",className:{selected:e===Me}},"Active"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=completed",className:{selected:e===Ue}},"Completed"))),n>0?lom_h("button",{id:"clear-completed",onClick:o},"Clear completed"):null):null}function Ot(t,e){return Ct(e.todoService)}function xt(t){var e=t.toggleAll,r=t.activeTodoCount,n=t.filteredTodos,o=t.TodoItemView;return lom_h("section",{id:"main"},lom_h("input",{id:"toggle-all",type:"checkbox",onChange:e,checked:0===r}),lom_h("ul",{id:"todo-list"},n.map(function(t){return lom_h(o,{key:t.id,todo:t})})))}function St(t){var e=t.todo,r=t.editingId,n=t.toggle,o=t.destroy,i=t.beginEdit,s=t.setFocus,a=t.editText,l=t.setEditText,u=t.submit,c=t.onKey,d=r===e.id;return lom_h("li",{className:(e.completed?"completed ":" ")+(d?"editing":"")},lom_h("div",{className:"view"},lom_h("input",{className:"toggle",type:"checkbox",checked:e.completed||0,onClick:n}),lom_h("label",{onDblClick:i},e.title),lom_h("button",{className:"destroy",onClick:o})),d?lom_h("input",{ref:s,className:"edit",value:r&&a||e.title,onBlur:u,onInput:l,onKeyDown:c}):null)}function jt(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Nt(t,e,r,n,o){var i={};return Object.keys(n).forEach(function(t){i[t]=n[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(t,e,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function Tt(t,e){var n=t.todo;return St(r({},e.todoItemService,{todo:n,destroy:n.destroy,toggle:n.toggle}))}function Pt(t,e){var r=e.todoService;return xt({toggleAll:r.toggleAll,activeTodoCount:r.activeTodoCount,filteredTodos:r.filteredTodos,TodoItemView:Tt})}function Et(t,e){var r=e.todoService;return lom_h("div",null,lom_h(kt,null),r.todos.length?lom_h(Pt,null):null,lom_h(Ot,null))}var zt,Dt,At="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},It=0,Lt=1,Mt=2,Ut=3,Wt=4,Vt=5,Rt=0,Ft=1,Kt=2,Bt=3,Ht=Symbol("lom_cached"),Jt=function(t){function e(e){var r;return void 0===e&&(e="Wait..."),r=t.call(this,e)||this,r.__proto__=new.target.prototype,r[Ht]=!0,r}return s(e,t),e}(Error),$t="function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},qt=Symbol("lom_error_orig"),Gt={get:function(t,e){if(e===qt)return t.valueOf();throw t.valueOf()},ownKeys:function(t){throw t.valueOf()}},Qt=new(function(){function t(){var t=this;this.current=null,this._logger=void 0,this._updating=[],this._reaping=new Set,this._scheduled=!1,this._owners=new WeakMap,this._run=function(){t._scheduled&&(t._scheduled=!1,t.sync())},this._start=0}var e=t.prototype;return e._destroyValue=function(t,e){if(this._owners.get(e)===t){try{e.destructor()}catch(e){console.error(e),this._logger&&this._logger.error(t,e)}this._owners.delete(e)}},e.destroyHost=function(t){this._destroyValue(t,t.current),void 0!==this._logger&&this._logger.onDestruct(t)},e.setLogger=function(t){this._logger=t},e.newValue=function(t,e,r){this._destroyValue(t,e),!r||"object"!=typeof r||r instanceof Error||"function"!=typeof r.destructor||this._owners.set(r,t);var n=this._logger;if(void 0!==n)try{n.newValue(t,e,r)}catch(e){console.error(e),n.error(t,e)}},e.proposeToPull=function(t){this._updating.push(t),this._schedule()},e.proposeToReap=function(t){this._reaping.add(t),this._schedule()},e.unreap=function(t){this._reaping.delete(t)},e._schedule=function(){this._scheduled||($t(this._run),this._scheduled=!0)},e.sync=function(){this._schedule();var t=this._reaping,e=this._updating,r=this._start;do{for(var n=e.length,o=r;o<n;o++){this._start=o;var i=e[o];t.has(i)||i.status===It||i.actualize()}r=n}while(e.length>r);for(e.length=0,this._start=0;t.size>0;)t.forEach(c);this._scheduled=!1},t}()),Xt=new Map([[Array,function(t,e,r){for(var n=t.length===e.length,o=0;o<t.length;++o){var i=t[o]=d(t[o],e[o],!1,r);n&&i!==e[o]&&(n=!1)}return n?e:t}],[Object,function(t,e,r){var n=0,o=!0;for(var i in t){var s=t[i]=d(t[i],e[i],!1,r);o&&s!==e[i]&&(o=!1),++n}for(var a in e)if(--n<0)break;return o&&0===n?e:t}],[Date,function(t,e){return t.getTime()===e.getTime()?e:t}],[RegExp,function(t,e){return t.toString()===e.toString()?e:t}]]),Yt=new WeakMap,Zt=Symbol("lom_err_proxy"),te=(Dt=zt=function(){function t(t,e,r,n,o,i,s,a){this._masters=null,this._slaves=null,this._retry=void 0,this._keyHash=s,this.key=i,this.field=t,this.owner=e,this.isComponent=a||!1,this.manualReset=o||!1,this._context=r,this.current=void 0,this._next=void 0,this._suggested=void 0,this._hostAtoms=n,this.status=Lt}var e=t.prototype;return e.toString=function(){var t=this.key,e=this.owner,r=e.displayName||e.constructor.displayName||e.constructor.name;return String(r)+"."+this.field+(t?"("+("function"==typeof t?t.displayName||t.name:String(t))+")":"")},e.toJSON=function(){return this.current},e.destructor=function(){this.status!==It&&(this._masters&&this._masters.forEach(f,this),this._masters=null,this._checkSlaves(),this._slaves=null,this._hostAtoms.delete(this._keyHash||this.owner),this._context.destroyHost(this),this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=It,this._hostAtoms=void 0,this.key=void 0,this._keyHash=void 0,this._retry=void 0)},e.value=function(t,e){var r=this._context,n=this.current;if(e===Ft)void 0===t?(this._suggested=this._next,this._next=void 0,this.status=Vt,this._slaves&&this._slaves.forEach(h)):this._push(t);else{var o=r.current;if(o&&(!o.isComponent||!this.isComponent)){var i=this._slaves;i||(i=this._slaves=new Set,r.unreap(this)),i.add(o),o.addMaster(this)}var s;void 0!==t&&(s=d(t,this._suggested,this.isComponent))!==this._suggested&&(n instanceof Error||(s=d(t,n,this.isComponent))!==n)&&(this._suggested=this._next=s,this.status=Lt),this.actualize()}if((n=this.current)instanceof Error){if(e!==Rt)return void 0===n[Zt]&&(n[Zt]=u(n)),n[Zt];throw n}return n},e.actualize=function(){if(this.status===Ut)throw new Error("Cyclic atom dependency of "+String(this));this.status===Mt&&(this._masters&&this._masters.forEach(v,this),this.status===Mt&&(this.status=Wt));var e=t.deepReset;this.status!==Vt||this.isComponent?void 0===e||this.manualReset||e.has(this)?this.status!==Wt&&this.refresh():(e.add(this),this.refresh()):(t.deepReset=e||new Set,this.refresh(),t.deepReset=e)},e._push=function(t){this.status=Wt;var e,r=this.current;t instanceof Error?e=void 0===t[qt]?t:t[qt]:(e=d(t,r,this.isComponent),this._suggested=this._next,this._next=void 0),r!==e&&(this.current=e,this._context.newValue(this,r,e),this._slaves&&this._slaves.forEach(h))},e.refresh=function(){var t=this._masters;t&&(t.forEach(f,this),this._masters=null);var e;this.status=Ut;var r=this._context,n=r.current;r.current=this;var o=this.field+"$",i=this._next;try{e=void 0===this.key?this.owner[o](i):this.owner[o](this.key,i)}catch(t){void 0===t[Ht]&&(t[Ht]=!0,console.error(t.stack||t)),e=t}r.current=n,this.status!==Vt&&this._push(e)},e.dislead=function(t){var e=this._slaves;e&&(e.delete(t),0===e.size&&(this._slaves=null,this._context.proposeToReap(this)))},e._checkSlaves=function(){this._slaves?this._slaves.forEach(p):this._context.proposeToPull(this)},e.check=function(){this.status===Wt&&(this.status=Mt,this._checkSlaves())},e.obsolete=function(){this.status!==Lt&&(this.status=Lt,this._checkSlaves())},e.addMaster=function(t){this._masters||(this._masters=new Set),this._masters.add(t)},e.getRetry=function(){var t=this;if(void 0===this._retry){var e=function(){return t.refresh()};l(e,"atom("+this.displayName+").retry()"),this._retry=e}return this._retry},i(t,[{key:"displayName",get:function(){return this.toString()}}]),t}(),zt.deepReset=void 0,Dt);m.defer=g,m.sync=b;var ee=Rt;N.manual=T,Object.defineProperties(O,{cache:{get:function(){return ee=Ft,P}},getRetry:{get:function(){return ee=Bt,E}},async:{get:function(){return ee=Kt,P}},manual:{value:x},key:{value:N}});var re=Symbol("rdiRendered"),ne=Symbol("rdiInst"),oe=Symbol("rdiProp"),ie=0,se=Symbol("rdiId"),ae=function(t){t[se]=""+ ++ie,this.dest=t},le=function(){function t(e,r,n,o,i,s){this.id="",this.props=void 0,this._resolved=!1,this._listeners=void 0,this._state=n,this.instance=i||0,this.displayName=o||"",void 0===t.parentContext&&(t.parentContext=this);var a=this._cache=s||Object.create(null);if(void 0!==e)for(var l=0;l<e.length;l++){var u=e[l];if(u instanceof Array){var c=u[0];if("string"==typeof c)a[c]=u[1];else{void 0===c[se]&&(c[se]=""+ ++ie);var d=u[1];a[c[se]]="function"!=typeof d||d instanceof ae?d:new ae(d)}}else{var p=u.constructor;void 0===p[se]&&(p[se]=""+ ++ie),a[p[se]]=u}}}var e=t.prototype;return e.toString=function(){return this.displayName+(this.instance?"["+this.instance+"]":"")},e.toJSON=function(){return this._cache},e.value=function(t){var e=t[se];void 0===t[se]&&(e=t[se]=""+ ++ie);var r=this._cache[e];if(void 0===r){r=this._cache[e]=this.invoke(t);var n=(t.displayName||t.name)+(this.instance>0?"["+this.instance+"]":"");r.displayName=this.displayName+"."+n,r[ne]=this;var o=void 0===this._state?void 0:this._state[n];if(o&&"object"==typeof o)for(var i in o)r[i]=o[i]}else r instanceof ae&&(r=this._cache[e]=this.value(r.dest));return r},e.destructor=function(){this._cache=void 0,this._listeners=void 0},e.invoke=function(t){var e=!1,r=t.deps;void 0!==t._r&&(e=2===t._r[0],r=r||t._r[1]);var n=this.resolve(r);if(e)switch(n.length){case 0:return t();case 1:return t(n[0]);case 2:return t(n[0],n[1]);case 3:return t(n[0],n[1],n[2]);case 4:return t(n[0],n[1],n[2],n[3]);case 5:return t(n[0],n[1],n[2],n[3],n[4]);case 6:return t(n[0],n[1],n[2],n[3],n[4],n[5]);default:return t.apply(void 0,n)}switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);default:return new(Function.prototype.bind.apply(t,[null].concat(n)))}},e.alias=function(t,e){var r=e;void 0===r&&void 0===(r=t[se])&&(r=t[se]=""+ ++ie);var n=this._cache[r];return n instanceof ae?n.dest:void 0===n?t:n},e.invokeWithProps=function(t,e,r){var n=t.deps||(void 0===t._r?void 0:t._r[1]);if(void 0===n)return t(e);var o=this.resolve(n),i=this._listeners;if(!0===r&&void 0!==i)for(var s=0;s<i.length;s++){var a=i[s];a[a.constructor[oe]]=e}switch(this._resolved=!0,o.length){case 0:return t(e);case 1:return t(e,o[0]);case 2:return t(e,o[0],o[1]);case 3:return t(e,o[0],o[1],o[2]);case 4:return t(e,o[0],o[1],o[2],o[3]);case 5:return t(e,o[0],o[1],o[2],o[3],o[4]);case 6:return t(e,o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return t(e,o[0],o[1],o[2],o[3],o[4],o[5],o[6]);default:return t.apply(void 0,[e].concat(o))}},e.copy=function(e,r,n){return new t(n,null,this._state,e,r,Object.create(this._cache))},e.resolve=function(t){var e=[];if(void 0===t)return e;for(var r=this._listeners,n=this._resolved,o=0,i=t.length;o<i;o++){var s=t[o];if("object"==typeof s){var a={};for(var l in s){var u=s[l],c=this.value(u);!1===n&&void 0!==u[oe]&&(void 0===r&&(this._listeners=r=[]),r.push(c)),a[l]=c}e.push(a)}else{var d=this.value(s);!1===n&&void 0!==s[oe]&&(void 0===r&&(this._listeners=r=[]),r.push(d)),e.push(d)}}return e},t}(),ue={},ce=[],de=[],pe="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,he=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,fe=[],ve=[],_e=0,ye=!1,me=!1,ge={};R(pt.prototype,{setState:function(t,e){var r=this.state;this.prevState||(this.prevState=R({},r)),R(r,"function"==typeof t?t(r,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),F(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),ut(this,2)},render:function(){}});var be=function(){function t(){}return t.prototype.location=function(t,e){throw new Error("implement")},t}(),we=function(t){function e(e,r){var n;return n=t.call(this)||this,n._ns="app",n._location=e,n._history=r,n}n(e,t);var r=e.prototype;return r._params=function(){return new URLSearchParams(this._location.search)},r.location=function(t,e){var r=this._params();return void 0===e?r.get(t):(r.set(t,e),this._history.pushState(null,this._ns,"?"+r.toString()),e)},e}(be),ke=M(L(pt,yt,w,new le([[be,new we(location,history)]])),V);At.lom_h=ke;var Ce,Oe,xe,Se,je,Ne,Te=13,Pe=27,Ee={ALL:"all",COMPLETE:"complete",ACTIVE:"active"},ze=function(){function t(t){void 0===t&&(t=new we(location,history)),this._locationStore=t}return t.prototype.filtered=function(t){switch(this.filter){case Ee.ALL:return t;case Ee.COMPLETE:return t.filter(function(t){return!!t.completed});case Ee.ACTIVE:return t.filter(function(t){return!t.completed});default:throw new Error("Unknown filter value: "+String(this.filter))}},e(t,[{key:"filter",get:function(){return this._locationStore.location("todo_filter")||Ee.ALL},set:function(t){return this._locationStore.location("todo_filter",t)}}]),t}(),De=(Ce=function(){function t(t,e){void 0===t&&(t={}),this._title=t.title||"",this.id=t.id||ft(),this.completed=t.completed||!1,this._store=e}var r=t.prototype;return r.destroy=function(){this._store.remove(this.id)},r.toggle=function(){this.completed=!this.completed,this._store.saveTodo(this.toJSON())},r.toJSON=function(){return{completed:this.completed,title:this._title,id:this.id}},e(t,[{key:"title",get:function(){return this._title},set:function(t){this._title=t,this._store.saveTodo(this.toJSON())}}]),t}(),mt(Ce.prototype,"destroy",[m],Object.getOwnPropertyDescriptor(Ce.prototype,"destroy"),Ce.prototype),mt(Ce.prototype,"toggle",[m],Object.getOwnPropertyDescriptor(Ce.prototype,"toggle"),Ce.prototype),Ce),Ae=(Oe=function(){function t(){this._todoFilter=new ze}var r=t.prototype;return r.addTodo=function(t){var e=new De({title:t},this),r=this.todos.slice(0);r.push(e),this.todos=r},r.saveTodo=function(t){var e=this;this.todos=this.todos.map(function(r,n){return r.id===t.id?new De(t,e):r})},r.remove=function(t){this.todos=this.todos.filter(function(e){return e.id!==t})},r.toggleAll=function(){var t=this,e=this.activeTodoCount>0;this.todos=this.todos.map(function(r,n){return new De({title:r.title,id:r.id,completed:e},t)})},r.clearCompleted=function(){for(var t=[],e=[],r=0;r<this.todos.length;r++){var n=this.todos[r];n.completed?e.push(n.id):t.push(n)}this.todos=t},e(t,[{key:"todos",get:function(){return[]},set:function(t){}},{key:"activeTodoCount",get:function(){return this.todos.reduce(function(t,e){return t+(e.completed?0:1)},0)}},{key:"completedCount",get:function(){return this.todos.length-this.activeTodoCount}},{key:"filter",get:function(){return this._todoFilter.filter}},{key:"filteredTodos",get:function(){return this._todoFilter.filtered(this.todos)}}]),t}(),mt(Oe.prototype,"todos",[O],Object.getOwnPropertyDescriptor(Oe.prototype,"todos"),Oe.prototype),mt(Oe.prototype,"todos",[O],Object.getOwnPropertyDescriptor(Oe.prototype,"todos"),Oe.prototype),mt(Oe.prototype,"activeTodoCount",[O],Object.getOwnPropertyDescriptor(Oe.prototype,"activeTodoCount"),Oe.prototype),mt(Oe.prototype,"addTodo",[m],Object.getOwnPropertyDescriptor(Oe.prototype,"addTodo"),Oe.prototype),mt(Oe.prototype,"toggleAll",[m],Object.getOwnPropertyDescriptor(Oe.prototype,"toggleAll"),Oe.prototype),mt(Oe.prototype,"clearCompleted",[m],Object.getOwnPropertyDescriptor(Oe.prototype,"clearCompleted"),Oe.prototype),mt(Oe.prototype,"filteredTodos",[O],Object.getOwnPropertyDescriptor(Oe.prototype,"filteredTodos"),Oe.prototype),Oe),Ie=(Ne=je=function(){function t(t){bt(this,"title",Se,this),this._todoService=t}var e=t.prototype;return e.onInput=function(t){var e=t.target;this.title=e.value},e.onKeyDown=function(t){if(t.keyCode===Te&&this.title){t.preventDefault();var e=this.title.trim();e&&(this._todoService.addTodo(e),this.title="")}},t}(),je.deps=[Ae],xe=Ne,Se=wt(xe.prototype,"title",[O],{enumerable:!0,initializer:function(){return""}}),wt(xe.prototype,"onInput",[m],Object.getOwnPropertyDescriptor(xe.prototype,"onInput"),xe.prototype),wt(xe.prototype,"onKeyDown",[m],Object.getOwnPropertyDescriptor(xe.prototype,"onKeyDown"),xe.prototype),xe);kt.deps=[{todoHeaderService:Ie}];var Le="all",Me="active",Ue="completed";Ot.deps=[{todoService:Ae}];var We,Ve,Re,Fe,Ke,Be=(We=m.defer,Ve=function(){function t(){jt(this,"editingId",Re,this),jt(this,"editText",Fe,this),jt(this,"props",Ke,this)}var e=t.prototype;return e.beginEdit=function(){var t=this.props.todo;this.editText=t.title,this.editingId=t.id},e.setFocus=function(t){t&&t.focus()},e.setEditText=function(t){this.editText=t.target.value},e.cancel=function(){this.editText="",this.editingId=null},e.submit=function(){if(this.editingId){this.props.todo.title=this.editText,this.editText="",this.editingId=null}},e.onKey=function(t){t.which===Pe?this.cancel():t.which===Te&&this.submit()},t}(),Re=Nt(Ve.prototype,"editingId",[O],{enumerable:!0,initializer:function(){return null}}),Fe=Nt(Ve.prototype,"editText",[O],{enumerable:!0,initializer:function(){return""}}),Ke=Nt(Ve.prototype,"props",[U],{enumerable:!0,initializer:null}),Nt(Ve.prototype,"beginEdit",[m],Object.getOwnPropertyDescriptor(Ve.prototype,"beginEdit"),Ve.prototype),Nt(Ve.prototype,"setFocus",[We],Object.getOwnPropertyDescriptor(Ve.prototype,"setFocus"),Ve.prototype),Nt(Ve.prototype,"setEditText",[m],Object.getOwnPropertyDescriptor(Ve.prototype,"setEditText"),Ve.prototype),Nt(Ve.prototype,"cancel",[m],Object.getOwnPropertyDescriptor(Ve.prototype,"cancel"),Ve.prototype),Nt(Ve.prototype,"submit",[m],Object.getOwnPropertyDescriptor(Ve.prototype,"submit"),Ve.prototype),Nt(Ve.prototype,"onKey",[m],Object.getOwnPropertyDescriptor(Ve.prototype,"onKey"),Ve.prototype),Ve);Tt.deps=[{todoItemService:Be}],Pt.deps=[{todoService:Ae}],Et.deps=[{todoService:Ae}],ht(lom_h(Et,null),_t())}();
//# sourceMappingURL=bundle.js.map
