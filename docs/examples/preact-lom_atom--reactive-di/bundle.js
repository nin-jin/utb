!function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function o(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function n(t,e,r,o,n){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,o){return o(t,e,r)||r},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var i="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},s=Symbol("lom_action"),a=0,u=1,l=2,c=3,d=4,p=5,h=0,f=1,v=2,_=3,y="function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},m=function(){var t=this;this._queue=[],this.add=function(e){0===t._queue.length&&t.constructor.schedule(t.rewind),t._queue.push(e)},this.rewind=function(){for(var e=t._queue,r=0;r<e.length;r++)e[r]();t._queue=[]}};m.schedule=y;var g=new m;function b(t,e,r){r.delete(t),t.slaves||t.destructor()}var w=new(function(){function t(){var t=this;this.current=null,this._logger=void 0,this._updating=[],this._reaping=new Set,this._scheduled=!1,this._owners=new WeakMap,this._run=function(){t._scheduled&&(t._scheduled=!1,t.sync())},this._start=0}var e=t.prototype;return e._destroyValue=function(t,e){if(this._owners.get(e)===t){try{e.destructor()}catch(e){console.error(e),this._logger&&this._logger.error(t,e)}this._owners.delete(e)}},e.destroyHost=function(t){this._destroyValue(t,t.current),void 0!==this._logger&&this._logger.onDestruct(t)},e.setLogger=function(t){this._logger=t},e.newValue=function(t,e,r){this._destroyValue(t,e),!r||"object"!=typeof r||r instanceof Error||"function"!=typeof r.destructor||this._owners.set(r,t);var o=this._logger;if(void 0!==o)try{o.newValue(t,e,r)}catch(e){console.error(e),o.error(t,e)}},e.proposeToPull=function(t){this._updating.push(t),this._schedule()},e.proposeToReap=function(t){this._reaping.add(t),this._schedule()},e.unreap=function(t){this._reaping.delete(t)},e._schedule=function(){this._scheduled||(g.add(this._run),this._scheduled=!0)},e.sync=function(){this._schedule();var t=this._reaping,e=this._updating,r=this._start;do{for(var o=e.length,n=r;n<o;n++){this._start=n;var i=e[n];t.has(i)||i.status===a||i.actualize()}r=o}while(e.length>r);for(e.length=0,this._start=0;t.size>0;)t.forEach(b);this._scheduled=!1},t}()),C=Symbol("lom_cached"),x=function(t){void 0===t&&(t="[Pending]");var e=Error.call(this,t);return e.__proto__=new.target.prototype,e[C]=!0,e};x.prototype=Object.create(Error.prototype),x.prototype.constructor=x;var k=x;function O(t,e){return(t.constructor.displayName||t.constructor.name)+"."+e}function T(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}var N=Symbol("lom_error_orig"),S={get:function(t,e){if(e===N)return t.valueOf();throw t.valueOf()},ownKeys:function(t){throw t.valueOf()}};function j(t){return new Proxy(t,S)}var E=new Map([[Array,function(t,e,r){for(var o=t.length===e.length,n=0;n<t.length;++n){var i=t[n]=D(t[n],e[n],r);o&&i!==e[n]&&(o=!1)}return o?e:t}],[Object,function(t,e,r){var o=0,n=!0;for(var i in t){var s=t[i]=D(t[i],e[i],r);n&&s!==e[i]&&(n=!1),++o}for(var a in e)if(--o<0)break;return n&&0===o?e:t}],[Date,function(t,e){return t.getTime()===e.getTime()?e:t}],[RegExp,function(t,e){return t.toString()===e.toString()?e:t}]]),P=new WeakMap;function D(t,e,r){if(void 0===r&&(r=[]),t===e)return e;if(!t||"object"!=typeof t||!e||"object"!=typeof e||t instanceof Error||e instanceof Error||t.constructor!==e.constructor||P.has(t))return t;P.set(t,!0);var o=E.get(t.constructor);if(!o)return t;if(-1!==r.indexOf(t))return t;r.push(t);var n=o(t,e,r);return r.pop(),n}function A(t){t.check()}function R(t){t.obsolete()}function z(t){t.dislead(this)}function M(t){this.status===l&&t.actualize()}var I=Symbol("lom_err_proxy"),L=function(){function t(t,e,r,o,n){this._masters=null,this._slaves=null,this._retry=void 0,this.displayName=t,this._handler=e,this.manualReset=n||!1,this._hostAtoms=o,this._keyHash=r,this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=u}var e=t.prototype;return e.toString=function(){return this.displayName},e.toJSON=function(){return this.current},e.destructor=function(){this.status!==a&&(this._masters&&this._masters.forEach(z,this),this._masters=null,this._slaves&&this._slaves.forEach(A),this._slaves=null,P.delete(this.current),void 0!==this._hostAtoms&&this._hostAtoms.delete(this._keyHash),w.destroyHost(this),this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=a,this._hostAtoms=void 0,this._keyHash=void 0,this._retry=void 0)},e.value=function(t,e){var r=w,o=this.current,n=r.current;if(e===f)void 0===t?(this._suggested=this._next,this._next=void 0,this.status=p,this.obsoleteSlaves()):(r.current=this,this._push(t),r.current=n);else{if(n){var i=this._slaves;i||(i=this._slaves=new Set,r.unreap(this)),i.add(n),n.addMaster(this)}var s;void 0!==t&&(s=this._conform(t,this._suggested))!==this._suggested&&(o instanceof Error||(s=this._conform(t,o))!==o)&&(this._suggested=this._next=s,this.status=u),this.actualize()}if((o=this.current)instanceof Error){if(e!==h)return void 0===o[I]&&(o[I]=j(o)),o[I];throw o}return o},e._conform=function(t,e){return D(t,e)},e.actualize=function(){if(this.status===c)throw new Error("Cyclic atom dependency of "+String(this));this.status===l&&(this._masters&&this._masters.forEach(M,this),this.status===l&&(this.status=d));var e=t.deepReset;this.status===p?(t.deepReset=e||new Set,this.refresh(),t.deepReset=e):void 0===e||this.manualReset||e.has(this)?this.status!==d&&this.refresh():(e.add(this),this.refresh())},e._push=function(t){this.status=d;var e,r=this.current;t instanceof Error?e=void 0===t[N]?t:t[N]:(e=this._conform(t,r),this._suggested=this._next,this._next=void 0),r!==e&&(this.current=e,w.newValue(this,r,e),this.obsoleteSlaves())},e.obsoleteSlaves=function(){this._slaves&&this._slaves.forEach(R)},e.refresh=function(){var t,e=this._masters;e&&(e.forEach(z,this),this._masters=null),this.status=c;var r=w,o=r.current;r.current=this;try{t=this._handler(this._next)}catch(e){void 0===e[C]&&(e[C]=!0,console.error(e.stack||e)),t=e}r.current=o,this.status!==p&&this._push(t)},e.dislead=function(t){var e=this._slaves;e&&(e.delete(t),0===e.size&&(this._slaves=null,w.proposeToReap(this)))},e._checkSlaves=function(){this._slaves?this._slaves.forEach(A):w.proposeToPull(this)},e.check=function(){this.status===d&&(this.status=l,this._checkSlaves())},e.obsolete=function(){this.status!==u&&(this.status=u,this._checkSlaves())},e.addMaster=function(t){this._masters||(this._masters=new Set),this._masters.add(t)},e.getRetry=function(){var t=this;if(void 0===this._retry){var e=function(){return t.refresh()};T(e,"atom("+this.toString()+").retry()"),this._retry=e}return this._retry},t}();function U(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}L.deepReset=void 0;var F=function(t){function e(e,r){var o;return(o=t.call(this,e,function(t){return V(o)._update(t)})||this)._propsChanged=!0,o._owner=r,o}U(e,t);var r=e.prototype;return r._update=function(t){return this._owner.value(this._propsChanged)},r.reset=function(){this.status=u,this._propsChanged=!0},r._conform=function(t,e){return t},r.obsoleteSlaves=function(){this._propsChanged||this._owner.forceUpdate(),this._propsChanged=!1},e}(L);function W(t,e,r){function o(){var o=arguments;try{switch(o.length){case 0:t[e]();break;case 1:t[e](o[0]);break;case 2:t[e](o[0],o[1]);break;case 3:t[e](o[0],o[1],o[2]);break;case 4:t[e](o[0],o[1],o[2],o[3]);break;case 5:t[e](o[0],o[1],o[2],o[3],o[4]);break;default:t[e].apply(t,o)}}catch(t){if(!(t instanceof k)){var n=w.current;if(!n)throw t;n.value(t,f)}}r&&w.sync()}return o[s]=!0,T(o,O(t,e)),o}function K(t){function e(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var n=function(){return t.apply(void 0,r)};T(n,t.displayName+"_cb"),g.add(n)}return T(e,t.displayName+"_defered"),e}function B(t,e,r,o,n){var i=e+"$";if(void 0===r.value)throw new TypeError(O(t,e)+" is not an function (next?: V)");t[i]=r.value;var s=!1;return{enumerable:r.enumerable,configurable:!0,get:function(){if(s)return this[i].bind(this);var t=W(this,i,n),r=o?K(t):t;return s=!0,Object.defineProperty(this,e,{configurable:!0,enumerable:!1,value:r}),s=!1,r}}}function H(t,e,r){return B(t,e,r,!0)}function q(t,e,r){return B(t,e,r,!1,!0)}function $(t,e){return function(r){return void 0===r?t.call(this):(e.call(this,r),r)}}function J(t){return function(e){return void 0===e&&t?t.call(this):e}}B.defer=H,B.sync=q;var G=h;function Q(t,e,r,o){var n=e+"$";if(void 0!==t[n])return r;var i,s=new WeakMap;Object.defineProperty(t,e+"()",{get:function(){return s.get(this)}});var a=O(t,e);function u(t){var e=s.get(this);return void 0===e&&(e=new L(a,i.bind(this),this,s,o),s.set(this,e)),G===_?e:e.value(t,G)}return void 0!==r.value?(i=r.value,r.value=u,r):(r.initializer&&T(r.initializer,a),r.get&&T(r.get,"get#"+a),r.set&&T(r.set,"set#"+a),i=void 0===r.get&&void 0===r.set?J(r.initializer):$(r.get,r.set),t[n]=i,{enumerable:r.enumerable,configurable:r.configurable,get:u,set:u})}function X(t,e,r){return Q(t,e,r,!0)}function Y(t){return t?"object"==typeof t?JSON.stringify(t):""+t:""}function Z(t,e,r,o){var n=e+"$";if(void 0!==t[n])return r;var i=new WeakMap;Object.defineProperty(t,e+"()",{get:function(){return i.get(this)}});var s=O(t,e),a=r.value;if(void 0===a)throw new TypeError(s+" is not an function (rawKey: K, next?: V)");function u(t,e){var r=i.get(this);void 0===r&&(r=new Map,i.set(this,r));var n=Y(t),u=r.get(n);return void 0===u&&(u=new L(s,a.bind(this,t),n,r,o),r.set(n,u)),G===_?u:u.value(e,G)}return t[n]=a,r.value=u,r}function tt(t,e,r){return Z(t,e,r,!0)}function et(t){return G=h,t}function rt(t){return G=h,t.getRetry()}function ot(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Z.manual=tt,Object.defineProperties(Q,{cache:{get:function(){return G=f,et}},getRetry:{get:function(){return G=_,rt}},async:{get:function(){return G=v,et}},manual:{value:X},key:{value:Z}});var it=Symbol("rdi_inst"),st=Symbol("rdi_prop"),at=0,ut=Symbol("rdi_id"),lt=function(t){t[ut]=""+ ++at,this.dest=t},ct=function(){function t(e,r,o,n,i,s,a){this.id="",this.props=void 0,this._sheet=void 0,this._resolved=!1,this._listeners=void 0,this._state=o,this.instance=i||0,this.displayName=n||"",void 0===t.parentContext&&(t.parentContext=this),r&&(t.sheetManager=r),this._flags=a;var u=this._cache=s||Object.create(null);if(void 0!==e)for(var l=0;l<e.length;l++){var c=e[l];if(c instanceof Array){var d=c[0];if("string"==typeof d)u[d]=c[1];else{void 0===d[ut]&&(d[ut]=""+ ++at);var p=c[1];u[d[ut]]="function"!=typeof p||p instanceof lt?p:new lt(p)}}else{var h=c.constructor;void 0===h[ut]&&(h[ut]=""+ ++at),u[h[ut]]=c}}}var e=t.prototype;return e.getClassName=function(e,r){var o=this._sheet,n=this._flags;return void 0===o&&(o=this._sheet=t.sheetManager.createSheet(this.displayName+(n&&n.isDynamic?"_"+this.instance:""))),void 0!==e._dynamic&&n&&(n.isDynamic=!0),o.addRule(e,r)},e.toString=function(){return this.displayName+(this.instance?"["+this.instance+"]":"")},e.toJSON=function(){return this._cache},e.value=function(t){var e=t[ut];void 0===t[ut]&&(e=t[ut]=""+ ++at);var r=this._cache[e];if(void 0===r){r=this._cache[e]=this.invoke(t);var o=(t.displayName||t.name)+(this.instance>0?"["+this.instance+"]":"");r.displayName=this.displayName+"."+o,r[it]=this;var n=void 0===this._state?void 0:this._state[o];if(n&&"object"==typeof n)for(var i in n)r[i]=n[i]}else r instanceof lt&&(r=this._cache[e]=this.value(r.dest));return r},e.destructor=function(){this._sheet&&this._sheet.destructor(),this._sheet=void 0,this._cache=void 0,this._listeners=void 0},e.invoke=function(t){var e=!1,r=t.deps;void 0!==t._r&&(e=2===t._r[0],r=r||t._r[1]);var o=this.resolve(r);if(e)switch(o.length){case 0:return t();case 1:return t(o[0]);case 2:return t(o[0],o[1]);case 3:return t(o[0],o[1],o[2]);case 4:return t(o[0],o[1],o[2],o[3]);case 5:return t(o[0],o[1],o[2],o[3],o[4]);case 6:return t(o[0],o[1],o[2],o[3],o[4],o[5]);default:return t.apply(void 0,o)}switch(o.length){case 0:return new t;case 1:return new t(o[0]);case 2:return new t(o[0],o[1]);case 3:return new t(o[0],o[1],o[2]);case 4:return new t(o[0],o[1],o[2],o[3]);case 5:return new t(o[0],o[1],o[2],o[3],o[4]);case 6:return new t(o[0],o[1],o[2],o[3],o[4],o[5]);default:return new(Function.prototype.bind.apply(t,[null].concat(o)))}},e.alias=function(t,e){var r=e;void 0===r&&void 0===(r=t[ut])&&(r=t[ut]=""+ ++at);var o=this._cache[r];return o instanceof lt?o.dest:void 0===o?t:o},e.invokeWithProps=function(t,e,r){var o=t.deps||(void 0===t._r?void 0:t._r[1]);if(void 0===o)return t(e);var n=this.resolve(o),i=this._listeners;if(!0===r&&void 0!==i)for(var s=0;s<i.length;s++){var a=i[s];a[a.constructor[st]]=e}switch(this._resolved=!0,n.length){case 0:return t(e);case 1:return t(e,n[0]);case 2:return t(e,n[0],n[1]);case 3:return t(e,n[0],n[1],n[2]);case 4:return t(e,n[0],n[1],n[2],n[3]);case 5:return t(e,n[0],n[1],n[2],n[3],n[4]);case 6:return t(e,n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return t(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6]);default:return t.apply(void 0,[e].concat(n))}},e.copy=function(e){return new t(e.aliases,null,this._state,e.displayName,e.instance,Object.create(this._cache),e)},e.resolve=function(t){var e=[];if(void 0===t)return e;for(var r=this._listeners,o=this._resolved,n=0,i=t.length;n<i;n++){var s=t[n];if("object"==typeof s){var a={};for(var u in s){var l=s[u],c=this.value(l);!1===o&&void 0!==l[st]&&(void 0===r&&(this._listeners=r=[]),r.push(c)),a[u]=c}e.push(a)}else{var d=this.value(s);!1===o&&void 0!==s[st]&&(void 0===r&&(this._listeners=r=[]),r.push(d)),e.push(d)}}return e},t}();function dt(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}function pt(t,e,r,o,n){void 0===o&&(o=new ct),void 0===n&&(n=!1);var i=function(t){function n(e,n){var i;(i=t.call(this,e,n)||this)._lastData=null;var s=o,a=i.constructor,u=a.displayName;return e&&(void 0!==e.__lom_ctx&&(s=e.__lom_ctx),e.id&&(u=e.id)),i._render=a.render,i._injector=s.copy(a),i._injector.id=u,i._injector.props=e,a.instance++,i._reaction=new r(u,nt(i)),i}ot(n,t);var i=n.prototype;return i.toString=function(){return this._injector.toString()},i.shouldComponentUpdate=function(t){var e=this.props;this._injector.props=t;var r=0;for(var o in e)if(r++,e[o]!==t[o])return this._reaction.reset(),!0;for(var n in t)if(r--,e[n]!==t[n])return this._reaction.reset(),!0;return 0!==r&&(this._reaction.reset(),!0)},i.componentWillUnmount=function(){this._reaction.destructor(),this.props=void 0,this._lastData=null,void 0!==this._render&&(this.constructor.instance--,this._injector.destructor(),this._injector=void 0)},i.value=function(t){var r=null,o=ct.parentContext,n=ct.parentContext=this._injector;try{r=n.invokeWithProps(this._render,this.props,t),this._lastData=r}catch(t){r=n.invokeWithProps(this._render.onError||e,{error:t,children:this._lastData})}return ct.parentContext=o,r},i.render=function(){return this._reaction.value()},n}(t);i.isFullEqual=n;var s=new Map;return function(t){var e=function(t,e){i.call(this,t,e)};e.instance=0,e.render=t,e.isFullEqual=t.isFullEqual||n,e.isDynamic=!1,e.aliases=t.aliases,e.prototype=Object.create(i.prototype),e.prototype.constructor=e;var r=t.displayName||t.name,o=s.get(r)||0;return s.set(r,o+1),o>0&&(r=r+"_"+o),dt(e,r),e}}function ht(t,e,r){function o(){var o,n=arguments,i=n[1],s=n[0],a="function"==typeof s&&void 0===s.constructor.render,u=ct.parentContext,l=u.props,c=void 0;if(i){var d=u.id;c=i.rdi_id||i.id;var p=i.class;if("object"==typeof p&&(i.class=p=u.getClassName(p,c)),!0===i.rdi_theme){if(i.rdi_theme=void 0,l){var h=l.class;void 0!==h&&(i.class=void 0===p?h:p+" "+h);var f=l.style;if(void 0!==f){var v=i.style;if(void 0===v)i.style=f;else for(var _ in f)v[_]=f[_]}}r&&(i.id=d)}else r&&""!==d&&void 0!==i.id&&(i.id=d+"."+i.id)}if(a){if(null===(o=u.alias(s,c)))return null;void 0!==o&&(s=o),i?i.__lom_ctx=u:i={__lom_ctx:u},void 0===s.__lom&&(s.__lom=t(s)),o=s.__lom}else{if(c){if(null===(o=u.alias(s,c)))return null;void 0!==o&&(s=o)}o=s}switch(n.length){case 2:return e(o,i);case 3:return e(o,i,n[2]);case 4:return e(o,i,n[2],n[3]);case 5:return e(o,i,n[2],n[3],n[4]);case 6:return e(o,i,n[2],n[3],n[4],n[5]);case 7:return e(o,i,n[2],n[3],n[4],n[5],n[6]);case 8:return e(o,i,n[2],n[3],n[4],n[5],n[6],n[7]);case 9:return e(o,i,n[2],n[3],n[4],n[5],n[6],n[7],n[8]);default:if(!1===a)return e.apply(null,n);for(var y=[o,i],m=2,g=n.length;m<g;m++)y.push(n[m]);return e.apply(null,y)}}return o}function ft(t,e,r){t.constructor[st]=e,r.value||r.set||(r.writable=!0)}function vt(){}var _t={},yt=[],mt=[];function gt(t,e){var r,o,n,i,s=mt;for(i=arguments.length;i-- >2;)yt.push(arguments[i]);for(e&&null!=e.children&&(yt.length||yt.push(e.children),delete e.children);yt.length;)if((o=yt.pop())&&void 0!==o.pop)for(i=o.length;i--;)yt.push(o[i]);else"boolean"==typeof o&&(o=null),(n="function"!=typeof t)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(n=!1)),n&&r?s[s.length-1]+=o:s===mt?s=[o]:s.push(o),r=n;var a=new vt;return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==_t.vnode&&_t.vnode(a),a}function bt(t,e){for(var r in e)t[r]=e[r];return t}var wt="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,Ct=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,xt=[];function kt(t){!t._dirty&&(t._dirty=!0)&&1==xt.push(t)&&(_t.debounceRendering||wt)(Ot)}function Ot(){var t,e=xt;for(xt=[];t=e.pop();)t._dirty&&Qt(t)}function Tt(t,e,r){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&Nt(t,e.nodeName):r||t._componentConstructor===e.nodeName}function Nt(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function St(t){var e=bt({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var o in r)void 0===e[o]&&(e[o]=r[o]);return e}function jt(t,e){var r=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return r.normalizedNodeName=t,r}function Et(t){var e=t.parentNode;e&&e.removeChild(t)}function Pt(t,e,r,o,n){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)r&&r(null),o&&o(t);else if("class"!==e||n)if("style"===e){if(o&&"string"!=typeof o&&"string"!=typeof r||(t.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof r)for(var i in r)i in o||(t.style[i]="");for(var i in o)t.style[i]="number"==typeof o[i]&&!1===Ct.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===e)o&&(t.innerHTML=o.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),o?r||t.addEventListener(e,At,s):t.removeEventListener(e,At,s),(t._listeners||(t._listeners={}))[e]=o}else if("list"!==e&&"type"!==e&&!n&&e in t)Dt(t,e,null==o?"":o),null!=o&&!1!==o||t.removeAttribute(e);else{var a=n&&e!==(e=e.replace(/^xlink\:?/,""));null==o||!1===o?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof o&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),o):t.setAttribute(e,o))}else t.className=o||""}function Dt(t,e,r){try{t[e]=r}catch(t){}}function At(t){return this._listeners[t.type](_t.event&&_t.event(t)||t)}var Rt=[],zt=0,Mt=!1,It=!1;function Lt(){for(var t;t=Rt.pop();)_t.afterMount&&_t.afterMount(t),t.componentDidMount&&t.componentDidMount()}function Ut(t,e,r,o,n,i){zt++||(Mt=null!=n&&void 0!==n.ownerSVGElement,It=null!=t&&!("__preactattr_"in t));var s=Vt(t,e,r,o,i);return n&&s.parentNode!==n&&n.appendChild(s),--zt||(It=!1,i||Lt()),s}function Vt(t,e,r,o,n){var i=t,s=Mt;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||n)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),Wt(t,!0))),i.__preactattr_=!0,i;var a=e.nodeName;if("function"==typeof a)return Xt(t,e,r,o);if(Mt="svg"===a||"foreignObject"!==a&&Mt,a=String(a),(!t||!Nt(t,a))&&(i=jt(a,Mt),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),Wt(t,!0)}var u=i.firstChild,l=i.__preactattr_,c=e.children;if(null==l){l=i.__preactattr_={};for(var d=i.attributes,p=d.length;p--;)l[d[p].name]=d[p].value}return!It&&c&&1===c.length&&"string"==typeof c[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=c[0]&&(u.nodeValue=c[0]):(c&&c.length||null!=u)&&Ft(i,c,r,o,It||null!=l.dangerouslySetInnerHTML),Bt(i,e.attributes,l),Mt=s,i}function Ft(t,e,r,o,n){var i,s,a,u,l,c=t.childNodes,d=[],p={},h=0,f=0,v=c.length,_=0,y=e?e.length:0;if(0!==v)for(var m=0;m<v;m++){var g=c[m],b=g.__preactattr_;null!=(w=y&&b?g._component?g._component.__key:b.key:null)?(h++,p[w]=g):(b||(void 0!==g.splitText?!n||g.nodeValue.trim():n))&&(d[_++]=g)}if(0!==y)for(m=0;m<y;m++){var w;if(l=null,null!=(w=(u=e[m]).key))h&&void 0!==p[w]&&(l=p[w],p[w]=void 0,h--);else if(!l&&f<_)for(i=f;i<_;i++)if(void 0!==d[i]&&Tt(s=d[i],u,n)){l=s,d[i]=void 0,i===_-1&&_--,i===f&&f++;break}l=Vt(l,u,r,o),a=c[m],l&&l!==t&&l!==a&&(null==a?t.appendChild(l):l===a.nextSibling?Et(a):t.insertBefore(l,a))}if(h)for(var m in p)void 0!==p[m]&&Wt(p[m],!1);for(;f<=_;)void 0!==(l=d[_--])&&Wt(l,!1)}function Wt(t,e){var r=t._component;r?Yt(r):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||Et(t),Kt(t))}function Kt(t){for(t=t.lastChild;t;){var e=t.previousSibling;Wt(t,!0),t=e}}function Bt(t,e,r){var o;for(o in r)e&&null!=e[o]||null==r[o]||Pt(t,o,r[o],r[o]=void 0,Mt);for(o in e)"children"===o||"innerHTML"===o||o in r&&e[o]===("value"===o||"checked"===o?t[o]:r[o])||Pt(t,o,r[o],r[o]=e[o],Mt)}var Ht={};function qt(t){var e=t.constructor.name;(Ht[e]||(Ht[e]=[])).push(t)}function $t(t,e,r){var o,n=Ht[t.name];if(t.prototype&&t.prototype.render?(o=new t(e,r),Zt.call(o,e,r)):((o=new Zt(e,r)).constructor=t,o.render=Jt),n)for(var i=n.length;i--;)if(n[i].constructor===t){o.nextBase=n[i].nextBase,n.splice(i,1);break}return o}function Jt(t,e,r){return this.constructor(t,r)}function Gt(t,e,r,o,n){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||n?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==r&&(1!==r&&!1===_t.syncComponentUpdates&&t.base?kt(t):Qt(t,1,n)),t.__ref&&t.__ref(t))}function Qt(t,e,r,o){if(!t._disable){var n,i,s,a=t.props,u=t.state,l=t.context,c=t.prevProps||a,d=t.prevState||u,p=t.prevContext||l,h=t.base,f=t.nextBase,v=h||f,_=t._component,y=!1;if(h&&(t.props=c,t.state=d,t.context=p,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,u,l)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(a,u,l),t.props=a,t.state=u,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){n=t.render(a,u,l),t.getChildContext&&(l=bt(bt({},l),t.getChildContext()));var m,g,b=n&&n.nodeName;if("function"==typeof b){var w=St(n);(i=_)&&i.constructor===b&&w.key==i.__key?Gt(i,w,1,l,!1):(m=i,t._component=i=$t(b,w,l),i.nextBase=i.nextBase||f,i._parentComponent=t,Gt(i,w,0,l,!1),Qt(i,1,r,!0)),g=i.base}else s=v,(m=_)&&(s=t._component=null),(v||1===e)&&(s&&(s._component=null),g=Ut(s,n,l,r||!h,v&&v.parentNode,!0));if(v&&g!==v&&i!==_){var C=v.parentNode;C&&g!==C&&(C.replaceChild(g,v),m||(v._component=null,Wt(v,!1)))}if(m&&Yt(m),t.base=g,g&&!o){for(var x=t,k=t;k=k._parentComponent;)(x=k).base=g;g._component=x,g._componentConstructor=x.constructor}}if(!h||r?Rt.unshift(t):y||(t.componentDidUpdate&&t.componentDidUpdate(c,d,p),_t.afterUpdate&&_t.afterUpdate(t)),null!=t._renderCallbacks)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);zt||o||Lt()}}function Xt(t,e,r,o){for(var n=t&&t._component,i=n,s=t,a=n&&t._componentConstructor===e.nodeName,u=a,l=St(e);n&&!u&&(n=n._parentComponent);)u=n.constructor===e.nodeName;return n&&u&&(!o||n._component)?(Gt(n,l,3,r,o),t=n.base):(i&&!a&&(Yt(i),t=s=null),n=$t(e.nodeName,l,r),t&&!n.nextBase&&(n.nextBase=t,s=null),Gt(n,l,1,r,o),t=n.base,s&&t!==s&&(s._component=null,Wt(s,!1))),t}function Yt(t){_t.beforeUnmount&&_t.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?Yt(r):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.nextBase=e,Et(e),qt(t),Kt(e)),t.__ref&&t.__ref(null)}function Zt(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function te(t,e,r){return Ut(r,t,{},!1,e,!1)}function ee(){for(var t="",e=0;e<32;e++){var r=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&r|8:r).toString(16)}return t}function re(t,e){return 1===t?e:e+"s"}bt(Zt.prototype,{setState:function(t,e){var r=this.state;this.prevState||(this.prevState=bt({},r)),bt(r,"function"==typeof t?t(r,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),kt(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),Qt(this,2)},render:function(){}});var oe=function(){function t(){}return t.prototype.location=function(t,e){throw new Error("implement")},t}(),ne=function(t){function e(e,r){var o;return(o=t.call(this)||this)._ns="app",o._location=e,o._history=r,o}r(e,t);var o=e.prototype;return o._params=function(){return new URLSearchParams(this._location.search)},o.location=function(t,e){var r=this._params();return void 0===e?r.get(t):(r.set(t,e),this._history.pushState(null,this._ns,"?"+r.toString()),e)},e}(oe);function ie(){var t=document.getElementById("todoapp");if(!t)throw new Error("todoapp id not found in document");return t}function se(t){var e=t.error;return lom_h("div",null,e instanceof k?lom_h("div",null,"Loading..."):lom_h("div",null,lom_h("h3",null,"Fatal error !"),lom_h("div",null,e.message),lom_h("pre",null,e.stack.toString())))}var ae=ht(pt(Zt,se,F,new ct([[oe,new ne(location,history)]])),gt);i.lom_h=ae;var ue,le,ce,de,pe,he,fe=13,ve=27,_e={ALL:"all",COMPLETE:"complete",ACTIVE:"active"},ye=function(){function t(t){void 0===t&&(t=new ne(location,history)),this._locationStore=t}return t.prototype.filtered=function(t){switch(this.filter){case _e.ALL:return t;case _e.COMPLETE:return t.filter(function(t){return!!t.completed});case _e.ACTIVE:return t.filter(function(t){return!t.completed});default:throw new Error("Unknown filter value: "+String(this.filter))}},e(t,[{key:"filter",get:function(){return this._locationStore.location("todo_filter")||_e.ALL},set:function(t){return this._locationStore.location("todo_filter",t)}}]),t}(),me=(n((ue=function(){function t(t){this.completed=!1,this.title="",this.id=ee(),Object.defineProperties(this,{_repository:{value:t}})}var e=t.prototype;return e.copy=function(t){return Object.assign(new this.constructor(this._repository),this,t)},e.update=function(t){this._repository.update(this.copy(t))},e.delete=function(){this._repository.delete(this)},t}()).prototype,"update",[B],Object.getOwnPropertyDescriptor(ue.prototype,"update"),ue.prototype),n(ue.prototype,"delete",[B],Object.getOwnPropertyDescriptor(ue.prototype,"delete"),ue.prototype),ue),ge=(n((le=function(){function t(){this._todoFilter=new ye}var r=t.prototype;return r.addTodo=function(t){var e=new me(this);e.title=t,this.todos=this.todos.concat(e)},r.update=function(t){this.todos=this.todos.map(function(e){return t.id===e.id?t:e})},r.delete=function(t){this.todos=this.todos.filter(function(e){return t.id!==e.id})},r.toggleAll=function(){var t=this.activeTodoCount>0;this.todos=this.todos.map(function(e){return e.copy({completed:t})})},r.clearCompleted=function(){this.todos=this.todos.filter(function(t){return!t.completed})},e(t,[{key:"todos",get:function(){return[]},set:function(t){}},{key:"activeTodoCount",get:function(){return this.todos.reduce(function(t,e){return t+(e.completed?0:1)},0)}},{key:"completedCount",get:function(){return this.todos.length-this.activeTodoCount}},{key:"filter",get:function(){return this._todoFilter.filter}},{key:"filteredTodos",get:function(){return this._todoFilter.filtered(this.todos)}}]),t}()).prototype,"todos",[Q],Object.getOwnPropertyDescriptor(le.prototype,"todos"),le.prototype),n(le.prototype,"activeTodoCount",[Q],Object.getOwnPropertyDescriptor(le.prototype,"activeTodoCount"),le.prototype),n(le.prototype,"addTodo",[B],Object.getOwnPropertyDescriptor(le.prototype,"addTodo"),le.prototype),n(le.prototype,"toggleAll",[B],Object.getOwnPropertyDescriptor(le.prototype,"toggleAll"),le.prototype),n(le.prototype,"clearCompleted",[B],Object.getOwnPropertyDescriptor(le.prototype,"clearCompleted"),le.prototype),n(le.prototype,"filteredTodos",[Q],Object.getOwnPropertyDescriptor(le.prototype,"filteredTodos"),le.prototype),le);function be(t){var e=t.onInput,r=t.title,o=t.onKeyDown;return lom_h("header",{id:"header"},lom_h("h1",null,"todos"),lom_h("input",{id:"new-todo",placeholder:"What needs to be done?",onInput:e,value:r,onKeyDown:o,autoFocus:!0}))}var we=(he=pe=function(){function t(t){o(this,"title",de,this),this._todoRepository=t}var e=t.prototype;return e.onInput=function(t){var e=t.target;this.title=e.value},e.onKeyDown=function(t){if(t.keyCode===fe&&this.title){t.preventDefault();var e=this.title.trim();e&&(this._todoRepository.addTodo(e),this.title="")}},t}(),pe.deps=[ge],de=n((ce=he).prototype,"title",[Q],{enumerable:!0,initializer:function(){return""}}),n(ce.prototype,"onInput",[B],Object.getOwnPropertyDescriptor(ce.prototype,"onInput"),ce.prototype),n(ce.prototype,"onKeyDown",[B],Object.getOwnPropertyDescriptor(ce.prototype,"onKeyDown"),ce.prototype),ce);function Ce(t,e){return be(e.todoHeaderService)}Ce.deps=[{todoHeaderService:we}];var xe,ke,Oe,Te,Ne,Se="all",je="active",Ee="completed";function Pe(t){var e=t.filter,r=t.activeTodoCount,o=t.completedCount,n=t.clearCompleted;return r||o?lom_h("footer",{id:"footer"},lom_h("span",{id:"todo-activeTodoCount"},lom_h("strong",null,r)," ",re(r,"item")," left"),lom_h("ul",{id:"filters"},lom_h("li",null,lom_h("a",{href:"./?todo_filter=all",className:{selected:e===Se}},"All"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=active",className:{selected:e===je}},"Active"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=completed",className:{selected:e===Ee}},"Completed"))),o>0?lom_h("button",{id:"clear-completed",onClick:n},"Clear completed"):null):null}function De(t,e){return Pe(e.todoRepository)}function Ae(t){var e=t.toggleAll,r=t.activeTodoCount,o=t.filteredTodos,n=t.TodoItemView;return lom_h("section",{id:"main"},lom_h("input",{id:"toggle-all",type:"checkbox",onChange:e,checked:0===r}),lom_h("ul",{id:"todo-list"},o.map(function(t){return lom_h(n,{key:t.id,todo:t})})))}function Re(t){var e=t.todo,r=t.editingId,o=t.toggle,n=t.destroy,i=t.beginEdit,s=t.setFocus,a=t.editText,u=t.setEditText,l=t.submit,c=t.onKey,d=r===e.id;return lom_h("li",{className:(e.completed?"completed ":" ")+(d?"editing":"")},lom_h("div",{className:"view"},lom_h("input",{className:"toggle",type:"checkbox",checked:e.completed||0,onClick:o}),lom_h("label",{onDoubleClick:i,onDblClick:i},e.title),lom_h("button",{className:"destroy",onClick:n})),d?lom_h("input",{ref:s,className:"edit",value:r&&a||e.title,onBlur:l,onInput:u,onKeyDown:c}):null)}De.deps=[{todoRepository:ge}];var ze=(xe=B.defer,Oe=n((ke=function(){function t(){o(this,"editingId",Oe,this),o(this,"editText",Te,this),o(this,"props",Ne,this)}var e=t.prototype;return e.beginEdit=function(){var t=this.props.todo;this.editText=t.title,this.editingId=t.id},e.setFocus=function(t){t&&t.focus()},e.setEditText=function(t){this.editText=t.target.value},e.cancel=function(){this.editText="",this.editingId=null},e.toggle=function(){var t=this.props.todo;t.update({completed:!t.completed})},e.submit=function(){this.editingId&&(this.props.todo.title=this.editText,this.editText="",this.editingId=null)},e.onKey=function(t){t.which===ve?this.cancel():t.which===fe&&this.submit()},t}()).prototype,"editingId",[Q],{enumerable:!0,initializer:function(){return null}}),Te=n(ke.prototype,"editText",[Q],{enumerable:!0,initializer:function(){return""}}),Ne=n(ke.prototype,"props",[ft],{enumerable:!0,initializer:null}),n(ke.prototype,"beginEdit",[B],Object.getOwnPropertyDescriptor(ke.prototype,"beginEdit"),ke.prototype),n(ke.prototype,"setFocus",[xe],Object.getOwnPropertyDescriptor(ke.prototype,"setFocus"),ke.prototype),n(ke.prototype,"setEditText",[B],Object.getOwnPropertyDescriptor(ke.prototype,"setEditText"),ke.prototype),n(ke.prototype,"cancel",[B],Object.getOwnPropertyDescriptor(ke.prototype,"cancel"),ke.prototype),n(ke.prototype,"toggle",[B],Object.getOwnPropertyDescriptor(ke.prototype,"toggle"),ke.prototype),n(ke.prototype,"submit",[B],Object.getOwnPropertyDescriptor(ke.prototype,"submit"),ke.prototype),n(ke.prototype,"onKey",[B],Object.getOwnPropertyDescriptor(ke.prototype,"onKey"),ke.prototype),ke);function Me(t,e){var r,o=t.todo,n=e.srv,i=n.toggle,s=n.beginEdit,a=n.onKey,u=n.submit,l=n.setEditText,c=n.setFocus,d=n.editingId,p=n.editText;return Re(((r={beginEdit:s,onKey:a,submit:u,setEditText:l,setFocus:c}).beginEdit=s,r.editingId=d,r.editText=p,r.todo=o,r.destroy=o.delete,r.toggle=i,r))}function Ie(t,e){var r=e.todoRepository;return Ae({toggleAll:r.toggleAll,activeTodoCount:r.activeTodoCount,filteredTodos:r.filteredTodos,TodoItemView:Me})}function Le(t,e){var r=e.todoRepository;return lom_h("div",null,lom_h(Ce,null),r.todos.length?lom_h(Ie,null):null,lom_h(De,null))}Me.deps=[{srv:ze}],Ie.deps=[{todoRepository:ge}],Le.deps=[{todoRepository:ge}],te(lom_h(Le,null),ie())}();
//# sourceMappingURL=bundle.js.map
