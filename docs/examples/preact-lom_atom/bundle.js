!function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function s(t,e){return(t.constructor.displayName||t.constructor.name)+"."+e}function a(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}function l(t){return new Proxy(t,qt)}function u(t,e,n){n.delete(t),t.slaves||t.destructor()}function c(t,e,n,o){if(void 0===o&&(o=[]),t===e)return e;if(n||!t||"object"!=typeof t||!e||"object"!=typeof e||t instanceof Error||e instanceof Error||t.constructor!==e.constructor||Xt.has(t))return t;Xt.set(t,!0);var r=Qt.get(t.constructor);if(!r)return t;if(-1!==o.indexOf(t))return t;o.push(t);var i=r(t,e,o);return o.pop(),i}function d(t){t.check()}function h(t){t.obsolete()}function p(t){t.dislead(this)}function f(t){this.status===At&&t.actualize()}function v(t,e,n){function o(){var o=arguments;try{switch(o.length){case 0:t[e]();break;case 1:t[e](o[0]);break;case 2:t[e](o[0],o[1]);break;case 3:t[e](o[0],o[1],o[2]);break;case 4:t[e](o[0],o[1],o[2],o[3]);break;case 5:t[e](o[0],o[1],o[2],o[3],o[4]);break;default:t[e].apply(t,o)}}catch(t){if(!(t instanceof Ht)){var r=Jt.current;if(!r)throw t;r.value(t,Ft)}}n&&Jt.sync()}return o[zt]=!0,a(o,s(t,e)),o}function _(t){function e(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r=function(){return t.apply(void 0,n)};a(r,t.displayName+"_cb"),Bt(r)}return a(e,t.displayName+"_defered"),e}function y(t,e,n,o,r){var i=e+"$";if(void 0===n.value)throw new TypeError(s(t,e)+" is not an function (next?: V)");t[i]=n.value;var a=!1;return{enumerable:n.enumerable,configurable:!0,get:function(){if(a)return this[i].bind(this);var t=v(this,i,r),n=o?_(t):t;return a=!0,Object.defineProperty(this,e,{configurable:!0,enumerable:!1,value:n}),a=!1,n}}}function m(t,e,n){return y(t,e,n,!0)}function g(t,e,n){return y(t,e,n,!1,!0)}function b(t,e,n){t[e+"$"]=n.value;var o=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return o.get(this)}}),{enumerable:n.enumerable,configurable:n.configurable,value:function(t){var n=o.get(this);return void 0===n&&(n=new Zt(e,this,Jt,o,!1,void 0,void 0,!0),o.set(this,n)),t&&(n.status=It),n.value()}}}function w(t,e){return function(n){return void 0===n?t.call(this):(e.call(this,n),n)}}function C(t){return function(e){return void 0===e&&t?t.call(this):e}}function k(t,e,n,o){function r(t){var n=l.get(this);return void 0===n&&(n=new Zt(e,this,Jt,l,o),l.set(this,n)),te===Rt?n:n.value(t,te)}var i=e+"$";if(void 0!==t[i])return n;var l=new WeakMap;if(Object.defineProperty(t,e+"()",{get:function(){return l.get(this)}}),void 0!==n.value)return t[i]=n.value,n.value=r,n;var u=s(t,e);return n.initializer&&a(n.initializer,u),n.get&&a(n.get,"get#"+u),n.set&&a(n.set,"set#"+u),t[i]=void 0===n.get&&void 0===n.set?C(n.initializer):w(n.get,n.set),{enumerable:n.enumerable,configurable:n.configurable,get:r,set:r}}function x(t,e,n){return k(t,e,n,!0)}function O(t){for(var e=Object.keys(t).sort(),n="",o=0;o<e.length;o++){var r=e[o],i=t[r];n+="."+r+":"+("object"==typeof i?JSON.stringify(i):i)}return n}function T(t){return t?t instanceof Array?JSON.stringify(t):"object"==typeof t?O(t):""+t:""}function S(t,e,n,o){function r(t,n){var r=l.get(this);void 0===r&&(r=new Map,l.set(this,r));var i=T(t),s=r.get(i);return void 0===s&&(s=new Zt(e,this,Jt,r,o,t,i),r.set(i,s)),te===Rt?s:s.value(n,te)}var i=s(t,e),a=n.value;if(void 0===a)throw new TypeError(i+" is not an function (rawKey: K, next?: V)");t[e+"$"]=a;var l=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return l.get(this)}}),n.value=r,n}function j(t,e,n){return S(t,e,n,!0)}function N(t){return te=Wt,t}function E(t){return te=Wt,t.getRetry()}function P(t){return te=Wt,t.getCollection()}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function D(t,e,n){return e&&z(t.prototype,e),n&&z(t,n),t}function I(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function A(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function M(t,e,n,o,r){var i,s,a;void 0===o&&(o=new se),void 0===r&&(r=!1);var l=(a=s=function(t){function n(e,n){var r;(r=t.call(this,e,n)||this)._propsChanged=!0,r._el=void 0,r._lastData=null;var i=o;r._keys=void 0;var s=r.constructor,a=s.displayName;return e&&(r._keys=Object.keys(e),0===r._keys.length&&(r._keys=void 0),void 0!==e.__lom_ctx&&(i=e.__lom_ctx),e.id&&(a=e.id)),r._render=s.render,r._injector=i.copy(s.displayName,s.instance,r._render.aliases),r._injector.id=a,r._injector.props=e,s.instance++,r}I(n,t);var r=n.prototype;return r.toString=function(){return this._injector.toString()},r.shouldComponentUpdate=function(t){if(void 0===this._keys)return!1;var e=this.props,n=this._keys;this._injector.props=t;for(var o=0,r=n.length;o<r;o++){var i=n[o];if(e[i]!==t[i])return this._propsChanged=!0,!0}return!0===this.constructor.isFullEqual&&(this._keys=Object.keys(t),this._propsChanged=n.length!==this._keys.length,this._propsChanged)},r.componentWillUnmount=function(){this["r()"].destructor(),this._el=void 0,this._keys=void 0,this.props=void 0,this._lastData=null,void 0!==this._render&&(this.constructor.instance--,this._injector.destructor(),this._injector=void 0)},r.r=function(t){var n=null,o=this._render,r=se.parentContext,i=se.parentContext=this._injector;try{n=i.invokeWithProps(o,this.props,this._propsChanged),this._lastData=n}catch(t){n=i.invokeWithProps(o.onError||e,{error:t,children:this._lastData})}return se.parentContext=r,this._propsChanged||(this._el=n,this.forceUpdate(),this._el=void 0),this._propsChanged=!1,n},r.render=function(){return void 0===this._el?this.r(this._propsChanged):this._el},D(n,[{key:"displayName",get:function(){return this.toString()}}]),n}(t),s.isFullEqual=r,i=a,A(i.prototype,"r",[n],Object.getOwnPropertyDescriptor(i.prototype,"r"),i.prototype),i);return function(t){var e=function(t,e){l.call(this,t,e)};return e.instance=0,e.render=t,e.isFullEqual=t.isFullEqual||r,e.displayName=t.displayName||t.name,e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e}}function L(t,e,n){function o(){var o,r=arguments,i=r[1],s=r[0],a="function"==typeof s&&void 0===s.constructor.render,l=se.parentContext,u=l.props,c=void 0;if(i){var d=l.id;if(c=i.rdi_id||i.id,!0===i.rdi_theme){if(i.rdi_theme=void 0,u){var h=u.class;void 0!==h&&(i.class=void 0!==i.class?i.class+" "+h:h);var p=u.style;if(void 0!==p){var f=i.style;if(f)for(var v in p)f[v]=p[v];else i.style=p}}n&&(i.id=d)}else n&&""!==d&&void 0!==i.id&&(i.id=d+"."+i.id)}if(a){if(null===(o=l.alias(s,c)))return null;void 0!==o&&(s=o),i?i.__lom_ctx=l:i={__lom_ctx:l},void 0===s.__lom&&(s.__lom=t(s)),o=s.__lom}else{if(c){if(null===(o=l.alias(s,c)))return null;void 0!==o&&(s=o)}o=s}switch(r.length){case 2:return e(o,i);case 3:return e(o,i,r[2]);case 4:return e(o,i,r[2],r[3]);case 5:return e(o,i,r[2],r[3],r[4]);case 6:return e(o,i,r[2],r[3],r[4],r[5]);case 7:return e(o,i,r[2],r[3],r[4],r[5],r[6]);case 8:return e(o,i,r[2],r[3],r[4],r[5],r[6],r[7]);case 9:return e(o,i,r[2],r[3],r[4],r[5],r[6],r[7],r[8]);default:if(!1===a)return e.apply(null,r);for(var _=[o,i],y=2,m=r.length;y<m;y++)_.push(r[y]);return e.apply(null,_)}}return o}function U(){}function W(t,e){var n,o,r,i,s=ue;for(i=arguments.length;i-- >2;)le.push(arguments[i]);for(e&&null!=e.children&&(le.length||le.push(e.children),delete e.children);le.length;)if((o=le.pop())&&void 0!==o.pop)for(i=o.length;i--;)le.push(o[i]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof t)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?s[s.length-1]+=o:s===ue?s=[o]:s.push(o),n=r;var a=new U;return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==ae.vnode&&ae.vnode(a),a}function F(t,e){for(var n in e)t[n]=e[n];return t}function V(t){!t._dirty&&(t._dirty=!0)&&1==he.push(t)&&(ae.debounceRendering||ce)(R)}function R(){var t,e=he;for(he=[];t=e.pop();)t._dirty&&lt(t)}function K(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&H(t,e.nodeName):n||t._componentConstructor===e.nodeName}function H(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function B(t){var e=F({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===e[o]&&(e[o]=n[o]);return e}function $(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function q(t){var e=t.parentNode;e&&e.removeChild(t)}function J(t,e,n,o,r){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),o&&o(t);else if("class"!==e||r)if("style"===e){if(o&&"string"!=typeof o&&"string"!=typeof n||(t.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(t.style[i]="");for(var i in o)t.style[i]="number"==typeof o[i]&&!1===de.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===e)o&&(t.innerHTML=o.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),o?n||t.addEventListener(e,Q,s):t.removeEventListener(e,Q,s),(t._listeners||(t._listeners={}))[e]=o}else if("list"!==e&&"type"!==e&&!r&&e in t)G(t,e,null==o?"":o),null!=o&&!1!==o||t.removeAttribute(e);else{var a=r&&e!==(e=e.replace(/^xlink\:?/,""));null==o||!1===o?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof o&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),o):t.setAttribute(e,o))}else t.className=o||""}function G(t,e,n){try{t[e]=n}catch(t){}}function Q(t){return this._listeners[t.type](ae.event&&ae.event(t)||t)}function X(){for(var t;t=pe.pop();)ae.afterMount&&ae.afterMount(t),t.componentDidMount&&t.componentDidMount()}function Y(t,e,n,o,r,i){fe++||(ve=null!=r&&void 0!==r.ownerSVGElement,_e=null!=t&&!("__preactattr_"in t));var s=Z(t,e,n,o,i);return r&&s.parentNode!==r&&r.appendChild(s),--fe||(_e=!1,i||X()),s}function Z(t,e,n,o,r){var i=t,s=ve;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),et(t,!0))),i.__preactattr_=!0,i;var a=e.nodeName;if("function"==typeof a)return ut(t,e,n,o);if(ve="svg"===a||"foreignObject"!==a&&ve,a=String(a),(!t||!H(t,a))&&(i=$(a,ve),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),et(t,!0)}var l=i.firstChild,u=i.__preactattr_,c=e.children;if(null==u){u=i.__preactattr_={};for(var d=i.attributes,h=d.length;h--;)u[d[h].name]=d[h].value}return!_e&&c&&1===c.length&&"string"==typeof c[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||null!=l)&&tt(i,c,n,o,_e||null!=u.dangerouslySetInnerHTML),ot(i,e.attributes,u),ve=s,i}function tt(t,e,n,o,r){var i,s,a,l,u,c=t.childNodes,d=[],h={},p=0,f=0,v=c.length,_=0,y=e?e.length:0;if(0!==v)for(var m=0;m<v;m++){var g=c[m],b=g.__preactattr_;null!=(w=y&&b?g._component?g._component.__key:b.key:null)?(p++,h[w]=g):(b||(void 0!==g.splitText?!r||g.nodeValue.trim():r))&&(d[_++]=g)}if(0!==y)for(m=0;m<y;m++){u=null;var w;if(null!=(w=(l=e[m]).key))p&&void 0!==h[w]&&(u=h[w],h[w]=void 0,p--);else if(!u&&f<_)for(i=f;i<_;i++)if(void 0!==d[i]&&K(s=d[i],l,r)){u=s,d[i]=void 0,i===_-1&&_--,i===f&&f++;break}u=Z(u,l,n,o),a=c[m],u&&u!==t&&u!==a&&(null==a?t.appendChild(u):u===a.nextSibling?q(a):t.insertBefore(u,a))}if(p)for(var m in h)void 0!==h[m]&&et(h[m],!1);for(;f<=_;)void 0!==(u=d[_--])&&et(u,!1)}function et(t,e){var n=t._component;n?ct(n):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||q(t),nt(t))}function nt(t){for(t=t.lastChild;t;){var e=t.previousSibling;et(t,!0),t=e}}function ot(t,e,n){var o;for(o in n)e&&null!=e[o]||null==n[o]||J(t,o,n[o],n[o]=void 0,ve);for(o in e)"children"===o||"innerHTML"===o||o in n&&e[o]===("value"===o||"checked"===o?t[o]:n[o])||J(t,o,n[o],n[o]=e[o],ve)}function rt(t){var e=t.constructor.name;(ye[e]||(ye[e]=[])).push(t)}function it(t,e,n){var o,r=ye[t.name];if(t.prototype&&t.prototype.render?(o=new t(e,n),dt.call(o,e,n)):((o=new dt(e,n)).constructor=t,o.render=st),r)for(var i=r.length;i--;)if(r[i].constructor===t){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function st(t,e,n){return this.constructor(t,n)}function at(t,e,n,o,r){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===ae.syncComponentUpdates&&t.base?V(t):lt(t,1,r)),t.__ref&&t.__ref(t))}function lt(t,e,n,o){if(!t._disable){var r,i,s,a=t.props,l=t.state,u=t.context,c=t.prevProps||a,d=t.prevState||l,h=t.prevContext||u,p=t.base,f=t.nextBase,v=p||f,_=t._component,y=!1;if(p&&(t.props=c,t.state=d,t.context=h,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,l,u)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(a,l,u),t.props=a,t.state=l,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){r=t.render(a,l,u),t.getChildContext&&(u=F(F({},u),t.getChildContext()));var m,g,b=r&&r.nodeName;if("function"==typeof b){var w=B(r);(i=_)&&i.constructor===b&&w.key==i.__key?at(i,w,1,u,!1):(m=i,t._component=i=it(b,w,u),i.nextBase=i.nextBase||f,i._parentComponent=t,at(i,w,0,u,!1),lt(i,1,n,!0)),g=i.base}else s=v,(m=_)&&(s=t._component=null),(v||1===e)&&(s&&(s._component=null),g=Y(s,r,u,n||!p,v&&v.parentNode,!0));if(v&&g!==v&&i!==_){var C=v.parentNode;C&&g!==C&&(C.replaceChild(g,v),m||(v._component=null,et(v,!1)))}if(m&&ct(m),t.base=g,g&&!o){for(var k=t,x=t;x=x._parentComponent;)(k=x).base=g;g._component=k,g._componentConstructor=k.constructor}}if(!p||n?pe.unshift(t):y||(t.componentDidUpdate&&t.componentDidUpdate(c,d,h),ae.afterUpdate&&ae.afterUpdate(t)),null!=t._renderCallbacks)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);fe||o||X()}}function ut(t,e,n,o){for(var r=t&&t._component,i=r,s=t,a=r&&t._componentConstructor===e.nodeName,l=a,u=B(e);r&&!l&&(r=r._parentComponent);)l=r.constructor===e.nodeName;return r&&l&&(!o||r._component)?(at(r,u,3,n,o),t=r.base):(i&&!a&&(ct(i),t=s=null),r=it(e.nodeName,u,n),t&&!r.nextBase&&(r.nextBase=t,s=null),at(r,u,1,n,o),t=r.base,s&&t!==s&&(s._component=null,et(s,!1))),t}function ct(t){ae.beforeUnmount&&ae.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?ct(n):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.nextBase=e,q(e),rt(t),nt(e)),t.__ref&&t.__ref(null)}function dt(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function ht(t,e,n){return Y(n,t,{},!1,e,!1)}function pt(t){var e=t.error;return lom_h("div",null,e instanceof Ht?lom_h("div",null,"Loading..."):lom_h("div",null,lom_h("h3",null,"Fatal error !"),lom_h("div",null,e.message),lom_h("pre",null,e.stack.toString())))}function ft(){for(var t="",e=0;e<32;e++){var n=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&n|8:n).toString(16)}return t}function vt(t,e){return 1===t?e:e+"s"}function _t(){var t=document.getElementById("todoapp");if(!t)throw new Error("todoapp id not found in document");return t}function yt(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function mt(t){var e=t.onInput,n=t.title,o=t.onKeyDown;return lom_h("header",{id:"header"},lom_h("h1",null,"todos"),lom_h("input",{id:"new-todo",placeholder:"What needs to be done?",onInput:e,value:n,onKeyDown:o,autoFocus:!0}))}function gt(t,e,n,o){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function bt(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function wt(t){return mt(t.todoHeaderService)}function Ct(t){var e=t.filter,n=t.activeTodoCount,o=t.completedCount,r=t.clearCompleted;return n||o?lom_h("footer",{id:"footer"},lom_h("span",{id:"todo-activeTodoCount"},lom_h("strong",null,n)," ",vt(n,"item")," left"),lom_h("ul",{id:"filters"},lom_h("li",null,lom_h("a",{href:"./?todo_filter=all",className:{selected:e===Ae}},"All"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=active",className:{selected:e===Me}},"Active"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=completed",className:{selected:e===Le}},"Completed"))),o>0?lom_h("button",{id:"clear-completed",onClick:r},"Clear completed"):null):null}function kt(t){var e=t.todo,n=t.editingId,o=t.toggle,r=t.destroy,i=t.beginEdit,s=t.setFocus,a=t.editText,l=t.setEditText,u=t.submit,c=t.onKey,d=n===e.id;return lom_h("li",{className:(e.completed?"completed ":" ")+(d?"editing":"")},lom_h("div",{className:"view"},lom_h("input",{className:"toggle",type:"checkbox",checked:e.completed||0,onClick:o}),lom_h("label",{onDblClick:i},e.title),lom_h("button",{className:"destroy",onClick:r})),d?lom_h("input",{ref:s,className:"edit",value:n&&a||e.title,onBlur:u,onInput:l,onKeyDown:c}):null)}function xt(t,e,n,o){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Ot(t,e,n,o,r){var i={};return Object.keys(o).forEach(function(t){i[t]=o[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function Tt(t){var e=t.todo,n=e[We];n||(e[We]=n=function(){return Ue.beginEditTodo(e)});return kt({onKey:Ue.onKey,submit:Ue.submit,setEditText:Ue.setEditText,setFocus:Ue.setFocus,editingId:Ue.editingId,editText:Ue.editText,beginEdit:n,todo:e,destroy:e.destroy,toggle:e.toggle})}function St(t){var e=t.toggleAll,n=t.activeTodoCount,o=t.filteredTodos,r=t.TodoItemView;return lom_h("section",{id:"main"},lom_h("input",{id:"toggle-all",type:"checkbox",onChange:e,checked:0===n}),lom_h("ul",{id:"todo-list"},o.map(function(t){return lom_h(r,{key:t.id,todo:t})})))}function jt(t){var e=t.todoService,n=t.todoHeaderService;e.todos;return lom_h("div",null,lom_h(wt,{todoHeaderService:n}),e.todos.length?lom_h(St,{toggleAll:e.toggleAll,activeTodoCount:e.activeTodoCount,filteredTodos:e.filteredTodos,TodoItemView:Tt}):null,lom_h(Ct,{activeTodoCount:e.activeTodoCount,completedCount:e.completedCount,filter:e.filter,clearCompleted:e.clearCompleted}))}var Nt,Et,Pt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},zt=Symbol("lom_action"),Dt=0,It=1,At=2,Mt=3,Lt=4,Ut=5,Wt=0,Ft=1,Vt=2,Rt=3,Kt=Symbol("lom_cached"),Ht=function(t){function e(e){var n;return void 0===e&&(e="Wait..."),n=t.call(this,e)||this,n.__proto__=new.target.prototype,n[Kt]=!0,n}return i(e,t),e}(Error),Bt="function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},$t=Symbol("lom_error_orig"),qt={get:function(t,e){if(e===$t)return t.valueOf();throw t.valueOf()},ownKeys:function(t){throw t.valueOf()}},Jt=new(function(){function t(){var t=this;this.current=null,this._logger=void 0,this._updating=[],this._reaping=new Set,this._scheduled=!1,this._owners=new WeakMap,this._run=function(){t._scheduled&&(t._scheduled=!1,t.sync())},this._start=0}var e=t.prototype;return e._destroyValue=function(t,e){if(this._owners.get(e)===t){try{e.destructor()}catch(e){console.error(e),this._logger&&this._logger.error(t,e)}this._owners.delete(e)}},e.destroyHost=function(t){this._destroyValue(t,t.current),void 0!==this._logger&&this._logger.onDestruct(t)},e.setLogger=function(t){this._logger=t},e.newValue=function(t,e,n){this._destroyValue(t,e),!n||"object"!=typeof n||n instanceof Error||"function"!=typeof n.destructor||this._owners.set(n,t);var o=this._logger;if(void 0!==o)try{o.newValue(t,e,n)}catch(e){console.error(e),o.error(t,e)}},e.proposeToPull=function(t){this._updating.push(t),this._schedule()},e.proposeToReap=function(t){this._reaping.add(t),this._schedule()},e.unreap=function(t){this._reaping.delete(t)},e._schedule=function(){this._scheduled||(Bt(this._run),this._scheduled=!0)},e.sync=function(){this._schedule();var t=this._reaping,e=this._updating,n=this._start;do{for(var o=e.length,r=n;r<o;r++){this._start=r;var i=e[r];t.has(i)||i.status===Dt||i.actualize()}n=o}while(e.length>n);for(e.length=0,this._start=0;t.size>0;)t.forEach(u);this._scheduled=!1},t}()),Gt=function(){function t(t,e){this._atom=t,this._indexes=e||new Map,void 0===e&&this._recalcIndexes(0,0)}var e=t.prototype;return e._recalcIndexes=function(t,e){for(var n=this._indexes,o=this._atom.current,r=t,i=o.length;r<i;r++)n.set(o[r],r-e)},e.replace=function(t,e){if(t===e)return this;var n=this._indexes,o=this._atom.current,r=n.get(t);if(void 0===r)throw new Error("oldItem not found");return o[r]=e,n.delete(t),n.set(e,r),this._atom.notify(),this},e.add=function(t){var e=this._indexes,n=this._atom.current;return e.set(t,n.length),n.push(t),this._atom.notify(),this},e.update=function(t){for(var e=this._indexes,n=this._atom.current,o=0,r=n.length;o<r;o++){var i=n[o],s=t(i);n[o]=s,s!==i&&(e.delete(i),e.set(s,o))}return this._atom.notify(),this},e.delete=function(t){var e=this._indexes,n=this._atom.current,o=e.get(t);return void 0===o?this:(this._recalcIndexes(o,1),n.splice(o,1),e.delete(t),this._atom.notify(),this)},t}(),Qt=new Map([[Array,function(t,e,n){for(var o=t.length===e.length,r=0;r<t.length;++r){var i=t[r]=c(t[r],e[r],!1,n);o&&i!==e[r]&&(o=!1)}return o?e:t}],[Object,function(t,e,n){var o=0,r=!0;for(var i in t){var s=t[i]=c(t[i],e[i],!1,n);r&&s!==e[i]&&(r=!1),++o}for(var a in e)if(--o<0)break;return r&&0===o?e:t}],[Date,function(t,e){return t.getTime()===e.getTime()?e:t}],[RegExp,function(t,e){return t.toString()===e.toString()?e:t}]]),Xt=new WeakMap,Yt=Symbol("lom_err_proxy"),Zt=(Et=Nt=function(){function t(t,e,n,o,r,i,s,a){this._masters=null,this._slaves=null,this._retry=void 0,this._coll=void 0,this._keyHash=s,this.key=i,this.field=t,this.owner=e,this.isComponent=a||!1,this.manualReset=r||!1,this._context=n,this.current=void 0,this._next=void 0,this._suggested=void 0,this._hostAtoms=o,this.status=It}var e=t.prototype;return e.toString=function(){var t=this.key,e=this.owner,n=e.displayName||e.constructor.displayName||e.constructor.name;return String(n)+"."+this.field+(t?"("+("function"==typeof t?t.displayName||t.name:String(t))+")":"")},e.toJSON=function(){return this.current},e.destructor=function(){this.status!==Dt&&(this._masters&&this._masters.forEach(p,this),this._masters=null,this._checkSlaves(),this._slaves=null,this._hostAtoms.delete(this._keyHash||this.owner),this._context.destroyHost(this),this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=Dt,this._hostAtoms=void 0,this.key=void 0,this._keyHash=void 0,this._retry=void 0,this._coll=void 0)},e.value=function(t,e){var n=this._context,o=this.current;if(e===Ft)void 0===t?(this._suggested=this._next,this._next=void 0,this.status=Ut,this._slaves&&this._slaves.forEach(h)):this._push(t);else{var r=n.current;if(r&&(!r.isComponent||!this.isComponent)){var i=this._slaves;i||(i=this._slaves=new Set,n.unreap(this)),i.add(r),r.addMaster(this)}var s;void 0!==t&&(s=c(t,this._suggested,this.isComponent))!==this._suggested&&(o instanceof Error||(s=c(t,o,this.isComponent))!==o)&&(this._suggested=this._next=s,this.status=It),this.actualize()}if((o=this.current)instanceof Error){if(e!==Wt)return void 0===o[Yt]&&(o[Yt]=l(o)),o[Yt];throw o}return o},e.actualize=function(){if(this.status===Mt)throw new Error("Cyclic atom dependency of "+String(this));this.status===At&&(this._masters&&this._masters.forEach(f,this),this.status===At&&(this.status=Lt));var e=t.deepReset;this.status!==Ut||this.isComponent?void 0===e||this.manualReset||e.has(this)?this.status!==Lt&&this.refresh():(e.add(this),this.refresh()):(t.deepReset=e||new Set,this.refresh(),t.deepReset=e)},e._push=function(t){this.status=Lt;var e,n=this.current;t instanceof Error?e=void 0===t[$t]?t:t[$t]:(e=c(t,n,this.isComponent),this._suggested=this._next,this._next=void 0),n!==e&&(this.current=e,this._context.newValue(this,n,e),this._slaves&&this._slaves.forEach(h))},e.notify=function(){this._slaves&&this._slaves.forEach(h)},e.refresh=function(){var t=this._masters;t&&(t.forEach(p,this),this._masters=null);var e;this.status=Mt;var n=this._context,o=n.current;n.current=this;var r=this.field+"$",i=this._next;try{e=void 0===this.key?this.owner[r](i):this.owner[r](this.key,i)}catch(t){void 0===t[Kt]&&(t[Kt]=!0,console.error(t.stack||t)),e=t}n.current=o,this.status!==Ut&&this._push(e)},e.dislead=function(t){var e=this._slaves;e&&(e.delete(t),0===e.size&&(this._slaves=null,this._context.proposeToReap(this)))},e._checkSlaves=function(){this._slaves?this._slaves.forEach(d):this._context.proposeToPull(this)},e.check=function(){this.status===Lt&&(this.status=At,this._checkSlaves())},e.obsolete=function(){this.status!==It&&(this.status=It,this._checkSlaves())},e.addMaster=function(t){this._masters||(this._masters=new Set),this._masters.add(t)},e.getRetry=function(){var t=this;if(void 0===this._retry){var e=function(){return t.refresh()};a(e,"atom("+this.displayName+").retry()"),this._retry=e}return this._retry},e.getCollection=function(){return void 0===this._coll&&(this._coll=new Gt(this)),this._coll},r(t,[{key:"displayName",get:function(){return this.toString()}}]),t}(),Nt.deepReset=void 0,Et);y.defer=m,y.sync=g;var te=Wt;S.manual=j,Object.defineProperties(k,{cache:{get:function(){return te=Ft,N}},getRetry:{get:function(){return te=Rt,E}},getColl:{get:function(){return te=Rt,P}},async:{get:function(){return te=Vt,N}},manual:{value:x},key:{value:S}});var ee=Symbol("rdiInst"),ne=Symbol("rdiProp"),oe=0,re=Symbol("rdiId"),ie=function(t){t[re]=""+ ++oe,this.dest=t},se=function(){function t(e,n,o,r,i,s){this.id="",this.props=void 0,this._resolved=!1,this._listeners=void 0,this._state=o,this.instance=i||0,this.displayName=r||"",void 0===t.parentContext&&(t.parentContext=this);var a=this._cache=s||Object.create(null);if(void 0!==e)for(var l=0;l<e.length;l++){var u=e[l];if(u instanceof Array){var c=u[0];if("string"==typeof c)a[c]=u[1];else{void 0===c[re]&&(c[re]=""+ ++oe);var d=u[1];a[c[re]]="function"!=typeof d||d instanceof ie?d:new ie(d)}}else{var h=u.constructor;void 0===h[re]&&(h[re]=""+ ++oe),a[h[re]]=u}}}var e=t.prototype;return e.toString=function(){return this.displayName+(this.instance?"["+this.instance+"]":"")},e.toJSON=function(){return this._cache},e.value=function(t){var e=t[re];void 0===t[re]&&(e=t[re]=""+ ++oe);var n=this._cache[e];if(void 0===n){n=this._cache[e]=this.invoke(t);var o=(t.displayName||t.name)+(this.instance>0?"["+this.instance+"]":"");n.displayName=this.displayName+"."+o,n[ee]=this;var r=void 0===this._state?void 0:this._state[o];if(r&&"object"==typeof r)for(var i in r)n[i]=r[i]}else n instanceof ie&&(n=this._cache[e]=this.value(n.dest));return n},e.destructor=function(){this._cache=void 0,this._listeners=void 0},e.invoke=function(t){var e=!1,n=t.deps;void 0!==t._r&&(e=2===t._r[0],n=n||t._r[1]);var o=this.resolve(n);if(e)switch(o.length){case 0:return t();case 1:return t(o[0]);case 2:return t(o[0],o[1]);case 3:return t(o[0],o[1],o[2]);case 4:return t(o[0],o[1],o[2],o[3]);case 5:return t(o[0],o[1],o[2],o[3],o[4]);case 6:return t(o[0],o[1],o[2],o[3],o[4],o[5]);default:return t.apply(void 0,o)}switch(o.length){case 0:return new t;case 1:return new t(o[0]);case 2:return new t(o[0],o[1]);case 3:return new t(o[0],o[1],o[2]);case 4:return new t(o[0],o[1],o[2],o[3]);case 5:return new t(o[0],o[1],o[2],o[3],o[4]);case 6:return new t(o[0],o[1],o[2],o[3],o[4],o[5]);default:return new(Function.prototype.bind.apply(t,[null].concat(o)))}},e.alias=function(t,e){var n=e;void 0===n&&void 0===(n=t[re])&&(n=t[re]=""+ ++oe);var o=this._cache[n];return o instanceof ie?o.dest:void 0===o?t:o},e.invokeWithProps=function(t,e,n){var o=t.deps||(void 0===t._r?void 0:t._r[1]);if(void 0===o)return t(e);var r=this.resolve(o),i=this._listeners;if(!0===n&&void 0!==i)for(var s=0;s<i.length;s++){var a=i[s];a[a.constructor[ne]]=e}switch(this._resolved=!0,r.length){case 0:return t(e);case 1:return t(e,r[0]);case 2:return t(e,r[0],r[1]);case 3:return t(e,r[0],r[1],r[2]);case 4:return t(e,r[0],r[1],r[2],r[3]);case 5:return t(e,r[0],r[1],r[2],r[3],r[4]);case 6:return t(e,r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return t(e,r[0],r[1],r[2],r[3],r[4],r[5],r[6]);default:return t.apply(void 0,[e].concat(r))}},e.copy=function(e,n,o){return new t(o,null,this._state,e,n,Object.create(this._cache))},e.resolve=function(t){var e=[];if(void 0===t)return e;for(var n=this._listeners,o=this._resolved,r=0,i=t.length;r<i;r++){var s=t[r];if("object"==typeof s){var a={};for(var l in s){var u=s[l],c=this.value(u);!1===o&&void 0!==u[ne]&&(void 0===n&&(this._listeners=n=[]),n.push(c)),a[l]=c}e.push(a)}else{var d=this.value(s);!1===o&&void 0!==s[ne]&&(void 0===n&&(this._listeners=n=[]),n.push(d)),e.push(d)}}return e},t}(),ae={},le=[],ue=[],ce="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,de=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,he=[],pe=[],fe=0,ve=!1,_e=!1,ye={};F(dt.prototype,{setState:function(t,e){var n=this.state;this.prevState||(this.prevState=F({},n)),F(n,"function"==typeof t?t(n,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),V(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),lt(this,2)},render:function(){}});var me=L(M(dt,pt,b),W);Pt.lom_h=me;var ge,be,we,Ce,ke,xe,Oe,Te,Se=function(t){function e(e,n){var o;return o=t.call(this)||this,o._ns="app",o._location=e,o._history=n,o}n(e,t);var o=e.prototype;return o._params=function(){return new URLSearchParams(this._location.search)},o.location=function(t,e){var n=this._params();return void 0===e?n.get(t):(n.set(t,e),this._history.pushState(null,this._ns,"?"+n.toString()),e)},e}(function(){function t(){}return t.prototype.location=function(t,e){throw new Error("implement")},t}()),je=13,Ne=27,Ee={ALL:"all",COMPLETE:"complete",ACTIVE:"active"},Pe=function(){function t(t){void 0===t&&(t=new Se(location,history)),this._locationStore=t}return t.prototype.filtered=function(t){switch(this.filter){case Ee.ALL:return t;case Ee.COMPLETE:return t.filter(function(t){return!!t.completed});case Ee.ACTIVE:return t.filter(function(t){return!t.completed});default:throw new Error("Unknown filter value: "+String(this.filter))}},e(t,[{key:"filter",get:function(){return this._locationStore.location("todo_filter")||Ee.ALL},set:function(t){return this._locationStore.location("todo_filter",t)}}]),t}(),ze=(ge=function(){function t(t,e){void 0===t&&(t={}),this._title=t.title||"",this.id=t.id||ft(),this.completed=t.completed||!1,this._store=e}var n=t.prototype;return n.copy=function(e){return new t(e,this._store)},n.destroy=function(){this._store.remove(this)},n.toggle=function(){this.completed=!this.completed,this._store.saveTodo(this,this.copy())},n.toJSON=function(){return{completed:this.completed,title:this._title,id:this.id}},e(t,[{key:"title",get:function(){return this._title},set:function(t){this._title=t,this._store.saveTodo(this,this.copy())}}]),t}(),yt(ge.prototype,"destroy",[y],Object.getOwnPropertyDescriptor(ge.prototype,"destroy"),ge.prototype),yt(ge.prototype,"toggle",[y],Object.getOwnPropertyDescriptor(ge.prototype,"toggle"),ge.prototype),ge),De=(be=function(){function t(){this._todoFilter=new Pe}var n=t.prototype;return n.addTodo=function(t){k.getColl(this.todos).add(new ze({title:t},this))},n.saveTodo=function(t,e){k.getColl(this.todos).replace(t,e)},n.remove=function(t){k.getColl(this.todos).delete(t)},n.toggleAll=function(){var t=this,e=this.activeTodoCount>0;k.getColl(this.todos).update(function(n){return new ze({title:n.title,id:n.id,completed:e},t)})},n.clearCompleted=function(){for(var t=[],e=[],n=0;n<this.todos.length;n++){var o=this.todos[n];o.completed?e.push(o.id):t.push(o)}this.todos=t},e(t,[{key:"todos",get:function(){return[]},set:function(t){}},{key:"activeTodoCount",get:function(){return this.todos.reduce(function(t,e){return t+(e.completed?0:1)},0)}},{key:"completedCount",get:function(){return this.todos.length-this.activeTodoCount}},{key:"filter",get:function(){return this._todoFilter.filter}},{key:"filteredTodos",get:function(){return this._todoFilter.filtered(this.todos)}}]),t}(),yt(be.prototype,"todos",[k],Object.getOwnPropertyDescriptor(be.prototype,"todos"),be.prototype),yt(be.prototype,"todos",[k],Object.getOwnPropertyDescriptor(be.prototype,"todos"),be.prototype),yt(be.prototype,"activeTodoCount",[k],Object.getOwnPropertyDescriptor(be.prototype,"activeTodoCount"),be.prototype),yt(be.prototype,"addTodo",[y],Object.getOwnPropertyDescriptor(be.prototype,"addTodo"),be.prototype),yt(be.prototype,"toggleAll",[y],Object.getOwnPropertyDescriptor(be.prototype,"toggleAll"),be.prototype),yt(be.prototype,"clearCompleted",[y],Object.getOwnPropertyDescriptor(be.prototype,"clearCompleted"),be.prototype),yt(be.prototype,"filteredTodos",[k],Object.getOwnPropertyDescriptor(be.prototype,"filteredTodos"),be.prototype),be),Ie=(we=function(){function t(t){gt(this,"title",Ce,this),this._todoService=t}var e=t.prototype;return e.onInput=function(t){var e=t.target;this.title=e.value},e.onKeyDown=function(t){if(t.keyCode===je&&this.title){t.preventDefault();var e=this.title.trim();e&&(this._todoService.addTodo(e),this.title="")}},t}(),Ce=bt(we.prototype,"title",[k],{enumerable:!0,initializer:function(){return""}}),bt(we.prototype,"onInput",[y],Object.getOwnPropertyDescriptor(we.prototype,"onInput"),we.prototype),bt(we.prototype,"onKeyDown",[y],Object.getOwnPropertyDescriptor(we.prototype,"onKeyDown"),we.prototype),we),Ae="all",Me="active",Le="completed",Ue=new(ke=y.defer,xe=function(){function t(){xt(this,"editingId",Oe,this),xt(this,"editText",Te,this)}var e=t.prototype;return e.beginEditTodo=function(t){this._todo=t,this.editText=t.title,this.editingId=t.id},e.setFocus=function(t){t&&t.focus()},e.setEditText=function(t){this.editText=t.target.value},e.cancel=function(){this.editText="",this.editingId=null},e.submit=function(){this.editingId&&(this._todo.title=this.editText,this.editText="",this.editingId=null)},e.onKey=function(t){t.which===Ne?this.cancel():t.which===je&&this.submit()},t}(),Oe=Ot(xe.prototype,"editingId",[k],{enumerable:!0,initializer:function(){return null}}),Te=Ot(xe.prototype,"editText",[k],{enumerable:!0,initializer:function(){return""}}),Ot(xe.prototype,"beginEditTodo",[y],Object.getOwnPropertyDescriptor(xe.prototype,"beginEditTodo"),xe.prototype),Ot(xe.prototype,"setFocus",[ke],Object.getOwnPropertyDescriptor(xe.prototype,"setFocus"),xe.prototype),Ot(xe.prototype,"setEditText",[y],Object.getOwnPropertyDescriptor(xe.prototype,"setEditText"),xe.prototype),Ot(xe.prototype,"cancel",[y],Object.getOwnPropertyDescriptor(xe.prototype,"cancel"),xe.prototype),Ot(xe.prototype,"submit",[y],Object.getOwnPropertyDescriptor(xe.prototype,"submit"),xe.prototype),Ot(xe.prototype,"onKey",[y],Object.getOwnPropertyDescriptor(xe.prototype,"onKey"),xe.prototype),xe),We=Symbol("editCache"),Fe=new De,Ve=new Ie(Fe);ht(lom_h(jt,{todoHeaderService:Ve,todoService:Fe}),_t())}();
//# sourceMappingURL=bundle.js.map
