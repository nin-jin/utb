!function(){"use strict";function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t,e,o,r){o&&Object.defineProperty(t,e,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function n(t,e,o,r,n){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,r){return r(t,e,o)||o},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var i="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},s=Symbol("lom_action"),a=0,l=1,u=2,c=3,d=4,p=5,h=0,f=1,v=2,_=3,y=Symbol("lom_cached");function m(t){return void 0===t&&(t="Wait..."),Error.call(this,t),this.__proto__=new.target.prototype,this[y]=!0,this}function g(t,e){return(t.constructor.displayName||t.constructor.name)+"."+e}function b(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}m.prototype=Object.create(Error.prototype),m.prototype.constructor=m;var w="function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},C=Symbol("lom_error_orig"),k={get:function(t,e){if(e===C)return t.valueOf();throw t.valueOf()},ownKeys:function(t){throw t.valueOf()}};function x(t){return new Proxy(t,k)}function O(t,e,o){o.delete(t),t.slaves||t.destructor()}var T=new(function(){function t(){var t=this;this.current=null,this._logger=void 0,this._updating=[],this._reaping=new Set,this._scheduled=!1,this._owners=new WeakMap,this._run=function(){t._scheduled&&(t._scheduled=!1,t.sync())},this._start=0}var e=t.prototype;return e._destroyValue=function(t,e){if(this._owners.get(e)===t){try{e.destructor()}catch(e){console.error(e),this._logger&&this._logger.error(t,e)}this._owners.delete(e)}},e.destroyHost=function(t){this._destroyValue(t,t.current),void 0!==this._logger&&this._logger.onDestruct(t)},e.setLogger=function(t){this._logger=t},e.newValue=function(t,e,o){this._destroyValue(t,e),!o||"object"!=typeof o||o instanceof Error||"function"!=typeof o.destructor||this._owners.set(o,t);var r=this._logger;if(void 0!==r)try{r.newValue(t,e,o)}catch(e){console.error(e),r.error(t,e)}},e.proposeToPull=function(t){this._updating.push(t),this._schedule()},e.proposeToReap=function(t){this._reaping.add(t),this._schedule()},e.unreap=function(t){this._reaping.delete(t)},e._schedule=function(){this._scheduled||(w(this._run),this._scheduled=!0)},e.sync=function(){this._schedule();var t=this._reaping,e=this._updating,o=this._start;do{for(var r=e.length,n=o;n<r;n++){this._start=n;var i=e[n];t.has(i)||i.status===a||i.actualize()}o=r}while(e.length>o);for(e.length=0,this._start=0;t.size>0;)t.forEach(O);this._scheduled=!1},t}()),N=new Map([[Array,function(t,e,o){for(var r=t.length===e.length,n=0;n<t.length;++n){var i=t[n]=S(t[n],e[n],o);r&&i!==e[n]&&(r=!1)}return r?e:t}],[Object,function(t,e,o){var r=0,n=!0;for(var i in t){var s=t[i]=S(t[i],e[i],o);n&&s!==e[i]&&(n=!1),++r}for(var a in e)if(--r<0)break;return n&&0===r?e:t}],[Date,function(t,e){return t.getTime()===e.getTime()?e:t}],[RegExp,function(t,e){return t.toString()===e.toString()?e:t}]]),j=new WeakMap;function S(t,e,o){if(void 0===o&&(o=[]),t===e)return e;if(!t||"object"!=typeof t||!e||"object"!=typeof e||t instanceof Error||e instanceof Error||t.constructor!==e.constructor||j.has(t))return t;j.set(t,!0);var r=N.get(t.constructor);if(!r)return t;if(-1!==o.indexOf(t))return t;o.push(t);var n=r(t,e,o);return o.pop(),n}function E(t){t.check()}function P(t){t.obsolete()}function D(t){t.dislead(this)}function z(t){this.status===u&&t.actualize()}var A=Symbol("lom_err_proxy"),M=function(){function t(t,e,o,r,n,i,s,a){this._masters=null,this._slaves=null,this._retry=void 0,this._keyHash=s,this.key=i,this.field=t,this.owner=e,this.isComponent=a||!1,this.manualReset=n||!1,this._context=o,this.current=void 0,this._next=void 0,this._suggested=void 0,this._hostAtoms=r,this.status=l}var e=t.prototype;return e.toString=function(){var t=this.key,e=this.owner,o=e.displayName||e.constructor.displayName||e.constructor.name;return String(o)+"."+this.field+(t?"("+("function"==typeof t?t.displayName||t.name:String(t))+")":"")},e.toJSON=function(){return this.current},e.destructor=function(){this.status!==a&&(this._masters&&this._masters.forEach(D,this),this._masters=null,this._slaves&&this._slaves.forEach(E),this._slaves=null,j.delete(this.current),this._hostAtoms.delete(this._keyHash||this.owner),this._context.destroyHost(this),this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=a,this._hostAtoms=void 0,this.key=void 0,this._keyHash=void 0,this._retry=void 0)},e.value=function(t,e){var o=this._context,r=this.current;if(e===f)if(void 0===t)this._suggested=this._next,this._next=void 0,this.status=p,this.notify();else{var n=o.current;o.current=this,this._push(t),o.current=n}else{var i,s=o.current;if(s&&(!s.isComponent||!this.isComponent)){var a=this._slaves;a||(a=this._slaves=new Set,o.unreap(this)),a.add(s),s.addMaster(this)}void 0!==t&&(i=S(t,this._suggested))!==this._suggested&&(r instanceof Error||(i=S(t,r))!==r)&&(this._suggested=this._next=i,this.status=l),this.actualize()}if((r=this.current)instanceof Error){if(e!==h)return void 0===r[A]&&(r[A]=x(r)),r[A];throw r}return r},e.actualize=function(){if(this.status===c)throw new Error("Cyclic atom dependency of "+String(this));this.status===u&&(this._masters&&this._masters.forEach(z,this),this.status===u&&(this.status=d));var e=t.deepReset;this.status!==p||this.isComponent?void 0===e||this.manualReset||e.has(this)?this.status!==d&&this.refresh():(e.add(this),this.refresh()):(t.deepReset=e||new Set,this.refresh(),t.deepReset=e)},e._push=function(t){this.status=d;var e,o=this.current;t instanceof Error?e=void 0===t[C]?t:t[C]:(e=S(t,o),this._suggested=this._next,this._next=void 0),o!==e&&(this.current=e,this._context.newValue(this,o,e),this.notify())},e.notify=function(){this._slaves&&this._slaves.forEach(P)},e.refresh=function(){var t,e=this._masters;e&&(e.forEach(D,this),this._masters=null),this.status=c;var o=this._context,r=o.current;o.current=this;var n=this.field+"$",i=this._next;try{t=void 0===this.key?this.owner[n](i):this.owner[n](this.key,i)}catch(e){void 0===e[y]&&(e[y]=!0,console.error(e.stack||e)),t=e}this.status!==p&&this._push(t),o.current=r},e.dislead=function(t){var e=this._slaves;e&&(e.delete(t),0===e.size&&(this._slaves=null,this._context.proposeToReap(this)))},e._checkSlaves=function(){this._slaves?this._slaves.forEach(E):this._context.proposeToPull(this)},e.check=function(){this.status===d&&(this.status=u,this._checkSlaves())},e.obsolete=function(){this.status!==l&&(this.status=l,this._checkSlaves())},e.addMaster=function(t){this._masters||(this._masters=new Set),this._masters.add(t)},e.getRetry=function(){var t=this;if(void 0===this._retry){var e=function(){return t.refresh()};b(e,"atom("+this.toString()+").retry()"),this._retry=e}return this._retry},t}();function I(t,e,o){function r(){var r=arguments;try{switch(r.length){case 0:t[e]();break;case 1:t[e](r[0]);break;case 2:t[e](r[0],r[1]);break;case 3:t[e](r[0],r[1],r[2]);break;case 4:t[e](r[0],r[1],r[2],r[3]);break;case 5:t[e](r[0],r[1],r[2],r[3],r[4]);break;default:t[e].apply(t,r)}}catch(t){if(!(t instanceof m)){var n=T.current;if(!n)throw t;n.value(t,f)}}o&&T.sync()}return r[s]=!0,b(r,g(t,e)),r}function L(t){function e(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];var n=function(){return t.apply(void 0,o)};b(n,t.displayName+"_cb"),w(n)}return b(e,t.displayName+"_defered"),e}function R(t,e,o,r,n){var i=e+"$";if(void 0===o.value)throw new TypeError(g(t,e)+" is not an function (next?: V)");t[i]=o.value;var s=!1;return{enumerable:o.enumerable,configurable:!0,get:function(){if(s)return this[i].bind(this);var t=I(this,i,n),o=r?L(t):t;return s=!0,Object.defineProperty(this,e,{configurable:!0,enumerable:!1,value:o}),s=!1,o}}}function U(t,e,o){return R(t,e,o,!0)}function W(t,e,o){return R(t,e,o,!1,!0)}function F(t,e,o){t[e+"$"]=o.value;var r=new WeakMap;return Object.defineProperty(t,e+"()",{get:function(){return r.get(this)}}),{enumerable:o.enumerable,configurable:o.configurable,value:function(t){var o=r.get(this);return void 0===o&&(o=new M(e,this,T,r,!1,void 0,void 0,!0),r.set(this,o)),t&&(o.status=l),o.value()}}}function V(t,e){return function(o){return void 0===o?t.call(this):(e.call(this,o),o)}}function K(t){return function(e){return void 0===e&&t?t.call(this):e}}M.deepReset=void 0,R.defer=U,R.sync=W;var H=h;function B(t,e,o,r){var n=e+"$";if(void 0!==t[n])return o;var i=new WeakMap;function s(t){var o=i.get(this);return void 0===o&&(o=new M(e,this,T,i,r),i.set(this,o)),H===_?o:o.value(t,H)}if(Object.defineProperty(t,e+"()",{get:function(){return i.get(this)}}),void 0!==o.value)return t[n]=o.value,o.value=s,o;var a=g(t,e);return o.initializer&&b(o.initializer,a),o.get&&b(o.get,"get#"+a),o.set&&b(o.set,"set#"+a),t[n]=void 0===o.get&&void 0===o.set?K(o.initializer):V(o.get,o.set),{enumerable:o.enumerable,configurable:o.configurable,get:s,set:s}}function $(t,e,o){return B(t,e,o,!0)}function q(t){for(var e=Object.keys(t).sort(),o="",r=0;r<e.length;r++){var n=e[r],i=t[n];o+="."+n+":"+("object"==typeof i?JSON.stringify(i):i)}return o}function J(t){return t?t instanceof Array?JSON.stringify(t):"object"==typeof t?q(t):""+t:""}function G(t,e,o,r){var n=g(t,e),i=o.value;if(void 0===i)throw new TypeError(n+" is not an function (rawKey: K, next?: V)");t[e+"$"]=i;var s=new WeakMap;function a(t,o){var n=s.get(this);void 0===n&&(n=new Map,s.set(this,n));var i=J(t),a=n.get(i);return void 0===a&&(a=new M(e,this,T,n,r,t,i),n.set(i,a)),H===_?a:a.value(o,H)}return Object.defineProperty(t,e+"()",{get:function(){return s.get(this)}}),o.value=a,o}function Q(t,e,o){return G(t,e,o,!0)}function X(t){return H=h,t}function Y(t){return H=h,t.getRetry()}function Z(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function tt(t,e,o,r,n){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,r){return r(t,e,o)||o},i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}G.manual=Q,Object.defineProperties(B,{cache:{get:function(){return H=f,X}},getRetry:{get:function(){return H=_,Y}},async:{get:function(){return H=v,X}},manual:{value:$},key:{value:G}});var et=Symbol("rdi_inst"),ot=Symbol("rdi_prop"),rt=0,nt=Symbol("rdi_id"),it=function(t){t[nt]=""+ ++rt,this.dest=t},st=function(){function t(e,o,r,n,i,s,a){this.id="",this.props=void 0,this._sheet=void 0,this._resolved=!1,this._listeners=void 0,this._state=r,this.instance=i||0,this.displayName=n||"",void 0===t.parentContext&&(t.parentContext=this),o&&(t.sheetManager=o),this._flags=a;var l=this._cache=s||Object.create(null);if(void 0!==e)for(var u=0;u<e.length;u++){var c=e[u];if(c instanceof Array){var d=c[0];if("string"==typeof d)l[d]=c[1];else{void 0===d[nt]&&(d[nt]=""+ ++rt);var p=c[1];l[d[nt]]="function"!=typeof p||p instanceof it?p:new it(p)}}else{var h=c.constructor;void 0===h[nt]&&(h[nt]=""+ ++rt),l[h[nt]]=c}}}var e=t.prototype;return e.getClassName=function(e,o){var r=this._sheet,n=this._flags;return void 0===r&&(r=this._sheet=t.sheetManager.createSheet(this.displayName+(n&&n.isDynamic?"_"+this.instance:""))),void 0!==e._dynamic&&n&&(n.isDynamic=!0),r.addRule(e,o)},e.toString=function(){return this.displayName+(this.instance?"["+this.instance+"]":"")},e.toJSON=function(){return this._cache},e.value=function(t){var e=t[nt];void 0===t[nt]&&(e=t[nt]=""+ ++rt);var o=this._cache[e];if(void 0===o){o=this._cache[e]=this.invoke(t);var r=(t.displayName||t.name)+(this.instance>0?"["+this.instance+"]":"");o.displayName=this.displayName+"."+r,o[et]=this;var n=void 0===this._state?void 0:this._state[r];if(n&&"object"==typeof n)for(var i in n)o[i]=n[i]}else o instanceof it&&(o=this._cache[e]=this.value(o.dest));return o},e.destructor=function(){this._sheet&&this._sheet.destructor(),this._sheet=void 0,this._cache=void 0,this._listeners=void 0},e.invoke=function(t){var e=!1,o=t.deps;void 0!==t._r&&(e=2===t._r[0],o=o||t._r[1]);var r=this.resolve(o);if(e)switch(r.length){case 0:return t();case 1:return t(r[0]);case 2:return t(r[0],r[1]);case 3:return t(r[0],r[1],r[2]);case 4:return t(r[0],r[1],r[2],r[3]);case 5:return t(r[0],r[1],r[2],r[3],r[4]);case 6:return t(r[0],r[1],r[2],r[3],r[4],r[5]);default:return t.apply(void 0,r)}switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);default:return new(Function.prototype.bind.apply(t,[null].concat(r)))}},e.alias=function(t,e){var o=e;void 0===o&&void 0===(o=t[nt])&&(o=t[nt]=""+ ++rt);var r=this._cache[o];return r instanceof it?r.dest:void 0===r?t:r},e.invokeWithProps=function(t,e,o){var r=t.deps||(void 0===t._r?void 0:t._r[1]);if(void 0===r)return t(e);var n=this.resolve(r),i=this._listeners;if(!0===o&&void 0!==i)for(var s=0;s<i.length;s++){var a=i[s];a[a.constructor[ot]]=e}switch(this._resolved=!0,n.length){case 0:return t(e);case 1:return t(e,n[0]);case 2:return t(e,n[0],n[1]);case 3:return t(e,n[0],n[1],n[2]);case 4:return t(e,n[0],n[1],n[2],n[3]);case 5:return t(e,n[0],n[1],n[2],n[3],n[4]);case 6:return t(e,n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return t(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6]);default:return t.apply(void 0,[e].concat(n))}},e.copy=function(e){return new t(e.aliases,null,this._state,e.displayName,e.instance,Object.create(this._cache),e)},e.resolve=function(t){var e=[];if(void 0===t)return e;for(var o=this._listeners,r=this._resolved,n=0,i=t.length;n<i;n++){var s=t[n];if("object"==typeof s){var a={};for(var l in s){var u=s[l],c=this.value(u);!1===r&&void 0!==u[ot]&&(void 0===o&&(this._listeners=o=[]),o.push(c)),a[l]=c}e.push(a)}else{var d=this.value(s);!1===r&&void 0!==s[ot]&&(void 0===o&&(this._listeners=o=[]),o.push(d)),e.push(d)}}return e},t}();function at(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}function lt(t,e,o,r,n){var i,s,a;void 0===r&&(r=new st),void 0===n&&(n=!1);var l=(a=s=function(t){function o(e,o){var n;(n=t.call(this,e,o)||this)._propsChanged=!0,n._el=void 0,n._lastData=null;var i=r;n._keys=void 0;var s=n.constructor,a=s.displayName;return e&&(n._keys=Object.keys(e),0===n._keys.length&&(n._keys=void 0),void 0!==e.__lom_ctx&&(i=e.__lom_ctx),e.id&&(a=e.id)),n._render=s.render,n._injector=i.copy(s),n._injector.id=a,n._injector.props=e,s.instance++,n}Z(o,t);var n=o.prototype;return n.toString=function(){return this._injector.toString()},n.shouldComponentUpdate=function(t){if(void 0===this._keys)return!1;var e=this.props,o=this._keys;this._injector.props=t;for(var r=0,n=o.length;r<n;r++){var i=o[r];if(e[i]!==t[i])return this._propsChanged=!0,!0}return!0===this.constructor.isFullEqual&&(this._keys=Object.keys(t),this._propsChanged=o.length!==this._keys.length,this._propsChanged)},n.componentWillUnmount=function(){this["r()"].destructor(),this._el=void 0,this._keys=void 0,this.props=void 0,this._lastData=null,void 0!==this._render&&(this.constructor.instance--,this._injector.destructor(),this._injector=void 0)},n.r=function(t){var o=null,r=this._render,n=st.parentContext,i=st.parentContext=this._injector;try{o=i.invokeWithProps(r,this.props,this._propsChanged),this._lastData=o}catch(t){o=i.invokeWithProps(r.onError||e,{error:t,children:this._lastData})}return st.parentContext=n,this._propsChanged||(this._el=o,this.forceUpdate(),this._el=void 0),this._propsChanged=!1,o},n.render=function(){return void 0===this._el?this.r(this._propsChanged):this._el},o}(t),s.isFullEqual=n,tt((i=a).prototype,"r",[o],Object.getOwnPropertyDescriptor(i.prototype,"r"),i.prototype),i),u=new Map;return function(t){var e=function(t,e){l.call(this,t,e)};e.instance=0,e.render=t,e.isFullEqual=t.isFullEqual||n,e.isDynamic=!1,e.aliases=t.aliases,e.prototype=Object.create(l.prototype),e.prototype.constructor=e;var o=t.displayName||t.name,r=u.get(o)||0;return u.set(o,r+1),r>0&&(o=o+"_"+r),at(e,o),e}}function ut(t,e,o){function r(){var r,n=arguments,i=n[1],s=n[0],a="function"==typeof s&&void 0===s.constructor.render,l=st.parentContext,u=l.props,c=void 0;if(i){var d=l.id;c=i.rdi_id||i.id;var p=i.class;if("object"==typeof p&&(i.class=p=l.getClassName(p,c)),!0===i.rdi_theme){if(i.rdi_theme=void 0,u){var h=u.class;void 0!==h&&(i.class=void 0===p?h:p+" "+h);var f=u.style;if(void 0!==f){var v=i.style;if(void 0===v)i.style=f;else for(var _ in f)v[_]=f[_]}}o&&(i.id=d)}else o&&""!==d&&void 0!==i.id&&(i.id=d+"."+i.id)}if(a){if(null===(r=l.alias(s,c)))return null;void 0!==r&&(s=r),i?i.__lom_ctx=l:i={__lom_ctx:l},void 0===s.__lom&&(s.__lom=t(s)),r=s.__lom}else{if(c){if(null===(r=l.alias(s,c)))return null;void 0!==r&&(s=r)}r=s}switch(n.length){case 2:return e(r,i);case 3:return e(r,i,n[2]);case 4:return e(r,i,n[2],n[3]);case 5:return e(r,i,n[2],n[3],n[4]);case 6:return e(r,i,n[2],n[3],n[4],n[5]);case 7:return e(r,i,n[2],n[3],n[4],n[5],n[6]);case 8:return e(r,i,n[2],n[3],n[4],n[5],n[6],n[7]);case 9:return e(r,i,n[2],n[3],n[4],n[5],n[6],n[7],n[8]);default:if(!1===a)return e.apply(null,n);for(var y=[r,i],m=2,g=n.length;m<g;m++)y.push(n[m]);return e.apply(null,y)}}return r}function ct(){}var dt={},pt=[],ht=[];function ft(t,e){var o,r,n,i,s=ht;for(i=arguments.length;i-- >2;)pt.push(arguments[i]);for(e&&null!=e.children&&(pt.length||pt.push(e.children),delete e.children);pt.length;)if((r=pt.pop())&&void 0!==r.pop)for(i=r.length;i--;)pt.push(r[i]);else"boolean"==typeof r&&(r=null),(n="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(n=!1)),n&&o?s[s.length-1]+=r:s===ht?s=[r]:s.push(r),o=n;var a=new ct;return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==dt.vnode&&dt.vnode(a),a}function vt(t,e){for(var o in e)t[o]=e[o];return t}var _t="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,yt=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,mt=[];function gt(t){!t._dirty&&(t._dirty=!0)&&1==mt.push(t)&&(dt.debounceRendering||_t)(bt)}function bt(){var t,e=mt;for(mt=[];t=e.pop();)t._dirty&&Bt(t)}function wt(t,e,o){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&Ct(t,e.nodeName):o||t._componentConstructor===e.nodeName}function Ct(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function kt(t){var e=vt({},t.attributes);e.children=t.children;var o=t.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===e[r]&&(e[r]=o[r]);return e}function xt(t,e){var o=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return o.normalizedNodeName=t,o}function Ot(t){var e=t.parentNode;e&&e.removeChild(t)}function Tt(t,e,o,r,n){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)o&&o(null),r&&r(t);else if("class"!==e||n)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof o||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof o)for(var i in o)i in r||(t.style[i]="");for(var i in r)t.style[i]="number"==typeof r[i]&&!1===yt.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?o||t.addEventListener(e,jt,s):t.removeEventListener(e,jt,s),(t._listeners||(t._listeners={}))[e]=r}else if("list"!==e&&"type"!==e&&!n&&e in t)Nt(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var a=n&&e!==(e=e.replace(/^xlink\:?/,""));null==r||!1===r?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function Nt(t,e,o){try{t[e]=o}catch(t){}}function jt(t){return this._listeners[t.type](dt.event&&dt.event(t)||t)}var St=[],Et=0,Pt=!1,Dt=!1;function zt(){for(var t;t=St.pop();)dt.afterMount&&dt.afterMount(t),t.componentDidMount&&t.componentDidMount()}function At(t,e,o,r,n,i){Et++||(Pt=null!=n&&void 0!==n.ownerSVGElement,Dt=null!=t&&!("__preactattr_"in t));var s=Mt(t,e,o,r,i);return n&&s.parentNode!==n&&n.appendChild(s),--Et||(Dt=!1,i||zt()),s}function Mt(t,e,o,r,n){var i=t,s=Pt;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||n)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),Lt(t,!0))),i.__preactattr_=!0,i;var a=e.nodeName;if("function"==typeof a)return $t(t,e,o,r);if(Pt="svg"===a||"foreignObject"!==a&&Pt,a=String(a),(!t||!Ct(t,a))&&(i=xt(a,Pt),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),Lt(t,!0)}var l=i.firstChild,u=i.__preactattr_,c=e.children;if(null==u){u=i.__preactattr_={};for(var d=i.attributes,p=d.length;p--;)u[d[p].name]=d[p].value}return!Dt&&c&&1===c.length&&"string"==typeof c[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||null!=l)&&It(i,c,o,r,Dt||null!=u.dangerouslySetInnerHTML),Ut(i,e.attributes,u),Pt=s,i}function It(t,e,o,r,n){var i,s,a,l,u,c=t.childNodes,d=[],p={},h=0,f=0,v=c.length,_=0,y=e?e.length:0;if(0!==v)for(var m=0;m<v;m++){var g=c[m],b=g.__preactattr_;null!=(w=y&&b?g._component?g._component.__key:b.key:null)?(h++,p[w]=g):(b||(void 0!==g.splitText?!n||g.nodeValue.trim():n))&&(d[_++]=g)}if(0!==y)for(m=0;m<y;m++){var w;if(u=null,null!=(w=(l=e[m]).key))h&&void 0!==p[w]&&(u=p[w],p[w]=void 0,h--);else if(!u&&f<_)for(i=f;i<_;i++)if(void 0!==d[i]&&wt(s=d[i],l,n)){u=s,d[i]=void 0,i===_-1&&_--,i===f&&f++;break}u=Mt(u,l,o,r),a=c[m],u&&u!==t&&u!==a&&(null==a?t.appendChild(u):u===a.nextSibling?Ot(a):t.insertBefore(u,a))}if(h)for(var m in p)void 0!==p[m]&&Lt(p[m],!1);for(;f<=_;)void 0!==(u=d[_--])&&Lt(u,!1)}function Lt(t,e){var o=t._component;o?qt(o):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||Ot(t),Rt(t))}function Rt(t){for(t=t.lastChild;t;){var e=t.previousSibling;Lt(t,!0),t=e}}function Ut(t,e,o){var r;for(r in o)e&&null!=e[r]||null==o[r]||Tt(t,r,o[r],o[r]=void 0,Pt);for(r in e)"children"===r||"innerHTML"===r||r in o&&e[r]===("value"===r||"checked"===r?t[r]:o[r])||Tt(t,r,o[r],o[r]=e[r],Pt)}var Wt={};function Ft(t){var e=t.constructor.name;(Wt[e]||(Wt[e]=[])).push(t)}function Vt(t,e,o){var r,n=Wt[t.name];if(t.prototype&&t.prototype.render?(r=new t(e,o),Jt.call(r,e,o)):((r=new Jt(e,o)).constructor=t,r.render=Kt),n)for(var i=n.length;i--;)if(n[i].constructor===t){r.nextBase=n[i].nextBase,n.splice(i,1);break}return r}function Kt(t,e,o){return this.constructor(t,o)}function Ht(t,e,o,r,n){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||n?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==o&&(1!==o&&!1===dt.syncComponentUpdates&&t.base?gt(t):Bt(t,1,n)),t.__ref&&t.__ref(t))}function Bt(t,e,o,r){if(!t._disable){var n,i,s,a=t.props,l=t.state,u=t.context,c=t.prevProps||a,d=t.prevState||l,p=t.prevContext||u,h=t.base,f=t.nextBase,v=h||f,_=t._component,y=!1;if(h&&(t.props=c,t.state=d,t.context=p,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,l,u)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(a,l,u),t.props=a,t.state=l,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){n=t.render(a,l,u),t.getChildContext&&(u=vt(vt({},u),t.getChildContext()));var m,g,b=n&&n.nodeName;if("function"==typeof b){var w=kt(n);(i=_)&&i.constructor===b&&w.key==i.__key?Ht(i,w,1,u,!1):(m=i,t._component=i=Vt(b,w,u),i.nextBase=i.nextBase||f,i._parentComponent=t,Ht(i,w,0,u,!1),Bt(i,1,o,!0)),g=i.base}else s=v,(m=_)&&(s=t._component=null),(v||1===e)&&(s&&(s._component=null),g=At(s,n,u,o||!h,v&&v.parentNode,!0));if(v&&g!==v&&i!==_){var C=v.parentNode;C&&g!==C&&(C.replaceChild(g,v),m||(v._component=null,Lt(v,!1)))}if(m&&qt(m),t.base=g,g&&!r){for(var k=t,x=t;x=x._parentComponent;)(k=x).base=g;g._component=k,g._componentConstructor=k.constructor}}if(!h||o?St.unshift(t):y||(t.componentDidUpdate&&t.componentDidUpdate(c,d,p),dt.afterUpdate&&dt.afterUpdate(t)),null!=t._renderCallbacks)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);Et||r||zt()}}function $t(t,e,o,r){for(var n=t&&t._component,i=n,s=t,a=n&&t._componentConstructor===e.nodeName,l=a,u=kt(e);n&&!l&&(n=n._parentComponent);)l=n.constructor===e.nodeName;return n&&l&&(!r||n._component)?(Ht(n,u,3,o,r),t=n.base):(i&&!a&&(qt(i),t=s=null),n=Vt(e.nodeName,u,o),t&&!n.nextBase&&(n.nextBase=t,s=null),Ht(n,u,1,o,r),t=n.base,s&&t!==s&&(s._component=null,Lt(s,!1))),t}function qt(t){dt.beforeUnmount&&dt.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var o=t._component;o?qt(o):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.nextBase=e,Ot(e),Ft(t),Rt(e)),t.__ref&&t.__ref(null)}function Jt(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function Gt(t,e,o){return At(o,t,{},!1,e,!1)}function Qt(t){var e=t.error;return lom_h("div",null,e instanceof m?lom_h("div",null,"Loading..."):lom_h("div",null,lom_h("h3",null,"Fatal error !"),lom_h("div",null,e.message),lom_h("pre",null,e.stack.toString())))}vt(Jt.prototype,{setState:function(t,e){var o=this.state;this.prevState||(this.prevState=vt({},o)),vt(o,"function"==typeof t?t(o,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),gt(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),Bt(this,2)},render:function(){}});var Xt=ut(lt(Jt,Qt,F),ft);function Yt(){for(var t="",e=0;e<32;e++){var o=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&o|8:o).toString(16)}return t}function Zt(t,e){return 1===t?e:e+"s"}i.lom_h=Xt;var te=function(t){function e(e,o){var r;return(r=t.call(this)||this)._ns="app",r._location=e,r._history=o,r}o(e,t);var r=e.prototype;return r._params=function(){return new URLSearchParams(this._location.search)},r.location=function(t,e){var o=this._params();return void 0===e?o.get(t):(o.set(t,e),this._history.pushState(null,this._ns,"?"+o.toString()),e)},e}(function(){function t(){}return t.prototype.location=function(t,e){throw new Error("implement")},t}());function ee(){var t=document.getElementById("todoapp");if(!t)throw new Error("todoapp id not found in document");return t}var oe,re,ne,ie,se=13,ae=27,le={ALL:"all",COMPLETE:"complete",ACTIVE:"active"},ue=function(){function t(t){void 0===t&&(t=new te(location,history)),this._locationStore=t}return t.prototype.filtered=function(t){switch(this.filter){case le.ALL:return t;case le.COMPLETE:return t.filter(function(t){return!!t.completed});case le.ACTIVE:return t.filter(function(t){return!t.completed});default:throw new Error("Unknown filter value: "+String(this.filter))}},e(t,[{key:"filter",get:function(){return this._locationStore.location("todo_filter")||le.ALL},set:function(t){return this._locationStore.location("todo_filter",t)}}]),t}(),ce=(n((oe=function(){function t(t){this.completed=!1,this.title="",this.id=Yt(),Object.defineProperties(this,{_repository:{value:t}})}var e=t.prototype;return e.copy=function(t){return Object.assign(new this.constructor(this._repository),this,t)},e.update=function(t){this._repository.update(this.copy(t))},e.delete=function(){this._repository.delete(this)},t}()).prototype,"update",[R],Object.getOwnPropertyDescriptor(oe.prototype,"update"),oe.prototype),n(oe.prototype,"delete",[R],Object.getOwnPropertyDescriptor(oe.prototype,"delete"),oe.prototype),oe),de=(n((re=function(){function t(){this._todoFilter=new ue}var o=t.prototype;return o.addTodo=function(t){var e=new ce(this);e.title=t,this.todos=this.todos.concat(e)},o.update=function(t){this.todos=this.todos.map(function(e){return t.id===e.id?t:e})},o.delete=function(t){this.todos=this.todos.filter(function(e){return t.id!==e.id})},o.toggleAll=function(){var t=this.activeTodoCount>0;this.todos=this.todos.map(function(e){return e.copy({completed:t})})},o.clearCompleted=function(){this.todos=this.todos.filter(function(t){return!t.completed})},e(t,[{key:"todos",get:function(){return[]},set:function(t){}},{key:"activeTodoCount",get:function(){return this.todos.reduce(function(t,e){return t+(e.completed?0:1)},0)}},{key:"completedCount",get:function(){return this.todos.length-this.activeTodoCount}},{key:"filter",get:function(){return this._todoFilter.filter}},{key:"filteredTodos",get:function(){return this._todoFilter.filtered(this.todos)}}]),t}()).prototype,"todos",[B],Object.getOwnPropertyDescriptor(re.prototype,"todos"),re.prototype),n(re.prototype,"activeTodoCount",[B],Object.getOwnPropertyDescriptor(re.prototype,"activeTodoCount"),re.prototype),n(re.prototype,"addTodo",[R],Object.getOwnPropertyDescriptor(re.prototype,"addTodo"),re.prototype),n(re.prototype,"toggleAll",[R],Object.getOwnPropertyDescriptor(re.prototype,"toggleAll"),re.prototype),n(re.prototype,"clearCompleted",[R],Object.getOwnPropertyDescriptor(re.prototype,"clearCompleted"),re.prototype),n(re.prototype,"filteredTodos",[B],Object.getOwnPropertyDescriptor(re.prototype,"filteredTodos"),re.prototype),re);function pe(t){var e=t.onInput,o=t.title,r=t.onKeyDown;return lom_h("header",{id:"header"},lom_h("h1",null,"todos"),lom_h("input",{id:"new-todo",placeholder:"What needs to be done?",onInput:e,value:o,onKeyDown:r,autoFocus:!0}))}var he=(ie=n((ne=function(){function t(t){r(this,"title",ie,this),this._todoRepository=t}var e=t.prototype;return e.onInput=function(t){var e=t.target;this.title=e.value},e.onKeyDown=function(t){if(t.keyCode===se&&this.title){t.preventDefault();var e=this.title.trim();e&&(this._todoRepository.addTodo(e),this.title="")}},t}()).prototype,"title",[B],{enumerable:!0,initializer:function(){return""}}),n(ne.prototype,"onInput",[R],Object.getOwnPropertyDescriptor(ne.prototype,"onInput"),ne.prototype),n(ne.prototype,"onKeyDown",[R],Object.getOwnPropertyDescriptor(ne.prototype,"onKeyDown"),ne.prototype),ne);function fe(t){return pe(t.todoHeaderService)}var ve,_e,ye,me,ge="all",be="active",we="completed";function Ce(t){var e=t.filter,o=t.activeTodoCount,r=t.completedCount,n=t.clearCompleted;return o||r?lom_h("footer",{id:"footer"},lom_h("span",{id:"todo-activeTodoCount"},lom_h("strong",null,o)," ",Zt(o,"item")," left"),lom_h("ul",{id:"filters"},lom_h("li",null,lom_h("a",{href:"./?todo_filter=all",className:{selected:e===ge}},"All"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=active",className:{selected:e===be}},"Active"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=completed",className:{selected:e===we}},"Completed"))),r>0?lom_h("button",{id:"clear-completed",onClick:n},"Clear completed"):null):null}function ke(t){var e=t.todo,o=t.editingId,r=t.toggle,n=t.destroy,i=t.beginEdit,s=t.setFocus,a=t.editText,l=t.setEditText,u=t.submit,c=t.onKey,d=o===e.id;return lom_h("li",{className:(e.completed?"completed ":" ")+(d?"editing":"")},lom_h("div",{className:"view"},lom_h("input",{className:"toggle",type:"checkbox",checked:e.completed||0,onClick:r}),lom_h("label",{onDoubleClick:i,onDblClick:i},e.title),lom_h("button",{className:"destroy",onClick:n})),d?lom_h("input",{ref:s,className:"edit",value:o&&a||e.title,onBlur:u,onInput:l,onKeyDown:c}):null)}var xe=(ve=R.defer,ye=n((_e=function(){function t(){r(this,"editingId",ye,this),r(this,"editText",me,this)}var e=t.prototype;return e.beginEdit=function(){var t=this._todo;this.editText=t.title,this.editingId=t.id},e.setFocus=function(t){t&&t.focus()},e.setEditText=function(t){this.editText=t.target.value},e.cancel=function(){this.editText="",this.editingId=null},e.submit=function(){this.editingId&&(this._todo.update({title:this.editText}),this.editText="",this.editingId=null)},e.toggle=function(){this._todo.update({completed:!this._todo.completed})},e.onKey=function(t){t.which===ae?this.cancel():t.which===se&&this.submit()},t}()).prototype,"editingId",[B],{enumerable:!0,initializer:function(){return null}}),me=n(_e.prototype,"editText",[B],{enumerable:!0,initializer:function(){return""}}),n(_e.prototype,"beginEdit",[R],Object.getOwnPropertyDescriptor(_e.prototype,"beginEdit"),_e.prototype),n(_e.prototype,"setFocus",[ve],Object.getOwnPropertyDescriptor(_e.prototype,"setFocus"),_e.prototype),n(_e.prototype,"setEditText",[R],Object.getOwnPropertyDescriptor(_e.prototype,"setEditText"),_e.prototype),n(_e.prototype,"cancel",[R],Object.getOwnPropertyDescriptor(_e.prototype,"cancel"),_e.prototype),n(_e.prototype,"submit",[R],Object.getOwnPropertyDescriptor(_e.prototype,"submit"),_e.prototype),n(_e.prototype,"toggle",[R],Object.getOwnPropertyDescriptor(_e.prototype,"toggle"),_e.prototype),n(_e.prototype,"onKey",[R],Object.getOwnPropertyDescriptor(_e.prototype,"onKey"),_e.prototype),_e),Oe=Symbol("editCache");function Te(t){var e=t.todo,o=e[Oe];o||((o=new xe)._todo=e,e[Oe]=o);var r=o,n=r.beginEdit,i=r.onKey,s=r.submit,a=r.setEditText,l=r.setFocus,u=r.editingId,c=r.editText,d=r.toggle;return ke({onKey:i,submit:s,setEditText:a,setFocus:l,editingId:u,editText:c,beginEdit:n,todo:e,destroy:e.delete,toggle:d})}function Ne(t){var e=t.toggleAll,o=t.activeTodoCount,r=t.filteredTodos,n=t.TodoItemView;return lom_h("section",{id:"main"},lom_h("input",{id:"toggle-all",type:"checkbox",onChange:e,checked:0===o}),lom_h("ul",{id:"todo-list"},r.map(function(t){return lom_h(n,{key:t.id,todo:t})})))}function je(t){var e=t.todoRepository,o=t.todoHeaderService;return lom_h("div",null,lom_h(fe,{todoHeaderService:o}),e.todos.length>0?lom_h(Ne,{toggleAll:e.toggleAll,activeTodoCount:e.activeTodoCount,filteredTodos:e.filteredTodos,TodoItemView:Te}):null,lom_h(Ce,{activeTodoCount:e.activeTodoCount,completedCount:e.completedCount,filter:e.filter,clearCompleted:e.clearCompleted}))}var Se=new de,Ee=new he(Se);Gt(lom_h(je,{todoHeaderService:Ee,todoRepository:Se}),ee())}();
//# sourceMappingURL=bundle.js.map
