!function(){"use strict";var t="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=Symbol("lom_action"),o=0,n=1,r=2,i=3,s=4,a=5,u=0,l=1,c=2,p=3,d="function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},h=function(){var t=this;this._queue=[],this.add=function(e){0===t._queue.length&&t.constructor.schedule(t.rewind),t._queue.push(e)},this.rewind=function(){for(var e=t._queue,o=0;o<e.length;o++)e[o]();t._queue=[]}};h.schedule=d;var f=new h;function v(t,e,o){o.delete(t),t.slaves||t.destructor()}var _=new(function(){function t(){var t=this;this.current=null,this._logger=void 0,this._updating=[],this._reaping=new Set,this._scheduled=!1,this._owners=new WeakMap,this._run=function(){t._scheduled&&(t._scheduled=!1,t.sync())},this._start=0}var e=t.prototype;return e._destroyValue=function(t,e){if(this._owners.get(e)===t){try{e.destructor()}catch(e){console.error(e),this._logger&&this._logger.error(t,e)}this._owners.delete(e)}},e.destroyHost=function(t){this._destroyValue(t,t.current),void 0!==this._logger&&this._logger.onDestruct(t)},e.setLogger=function(t){this._logger=t},e.newValue=function(t,e,o){this._destroyValue(t,e),!o||"object"!=typeof o||o instanceof Error||"function"!=typeof o.destructor||this._owners.set(o,t);var n=this._logger;if(void 0!==n)try{n.newValue(t,e,o)}catch(e){console.error(e),n.error(t,e)}},e.proposeToPull=function(t){this._updating.push(t),this._schedule()},e.proposeToReap=function(t){this._reaping.add(t),this._schedule()},e.unreap=function(t){this._reaping.delete(t)},e._schedule=function(){this._scheduled||(f.add(this._run),this._scheduled=!0)},e.sync=function(){this._schedule();var t=this._reaping,e=this._updating,n=this._start;do{for(var r=e.length,i=n;i<r;i++){this._start=i;var s=e[i];t.has(s)||s.status===o||s.actualize()}n=r}while(e.length>n);for(e.length=0,this._start=0;t.size>0;)t.forEach(v);this._scheduled=!1},t}()),m=Symbol("lom_cached"),y=function(t){void 0===t&&(t="[Pending]");var e=Error.call(this,t);return e.__proto__=new.target.prototype,e[m]=!0,e};y.prototype=Object.create(Error.prototype),y.prototype.constructor=y;var g=y;function b(t,e){return(t.constructor.displayName||t.constructor.name)+"."+e}function w(t,e){Object.defineProperty(t,"name",{value:e,writable:!1}),t.displayName=e}var C=Symbol("lom_error_orig"),x={get:function(t,e){if(e===C)return t.valueOf();throw t.valueOf()},ownKeys:function(t){throw t.valueOf()}};function N(t){return new Proxy(t,x)}var O=new Map([[Array,function(t,e,o){for(var n=t.length===e.length,r=0;r<t.length;++r){var i=t[r]=T(t[r],e[r],o);n&&i!==e[r]&&(n=!1)}return n?e:t}],[Object,function(t,e,o){var n=0,r=!0;for(var i in t){var s=t[i]=T(t[i],e[i],o);r&&s!==e[i]&&(r=!1),++n}for(var a in e)if(--n<0)break;return r&&0===n?e:t}],[Date,function(t,e){return t.getTime()===e.getTime()?e:t}],[RegExp,function(t,e){return t.toString()===e.toString()?e:t}]]),k=new WeakMap;function T(t,e,o){if(void 0===o&&(o=[]),t===e)return e;if(!t||"object"!=typeof t||!e||"object"!=typeof e||t instanceof Error||e instanceof Error||t.constructor!==e.constructor||k.has(t))return t;k.set(t,!0);var n=O.get(t.constructor);if(!n)return t;if(-1!==o.indexOf(t))return t;o.push(t);var r=n(t,e,o);return o.pop(),r}function E(t){t.check()}function S(t){t.obsolete()}function j(t){t.dislead(this)}function P(t){this.status===r&&t.actualize()}var D=Symbol("lom_err_proxy"),A=function(){function t(t,e,o,r,i){this._masters=null,this._slaves=null,this._retry=void 0,this.displayName=t,this._handler=e,this.manualReset=i||!1,this._hostAtoms=r,this._keyHash=o,this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=n}var e=t.prototype;return e.toString=function(){return this.displayName},e.toJSON=function(){return this.current},e.destructor=function(){this.status!==o&&(this._masters&&this._masters.forEach(j,this),this._masters=null,this._slaves&&this._slaves.forEach(E),this._slaves=null,k.delete(this.current),void 0!==this._hostAtoms&&this._hostAtoms.delete(this._keyHash),_.destroyHost(this),this.current=void 0,this._next=void 0,this._suggested=void 0,this.status=o,this._hostAtoms=void 0,this._keyHash=void 0,this._retry=void 0)},e.value=function(t,e){var o=_,r=this.current,i=o.current;if(e===l)void 0===t?(this._suggested=this._next,this._next=void 0,this.status=a,this.obsoleteSlaves()):(o.current=this,this._push(t),o.current=i);else{if(i){var s=this._slaves;s||(s=this._slaves=new Set,o.unreap(this)),s.add(i),i.addMaster(this)}var c;void 0!==t&&(c=this._conform(t,this._suggested))!==this._suggested&&(r instanceof Error||(c=this._conform(t,r))!==r)&&(this._suggested=this._next=c,this.status=n),this.actualize()}if((r=this.current)instanceof Error){if(e!==u)return void 0===r[D]&&(r[D]=N(r)),r[D];throw r}return r},e._conform=function(t,e){return T(t,e)},e.actualize=function(){if(this.status===i)throw new Error("Cyclic atom dependency of "+String(this));this.status===r&&(this._masters&&this._masters.forEach(P,this),this.status===r&&(this.status=s));var e=t.deepReset;this.status===a?(t.deepReset=e||new Set,this.refresh(),t.deepReset=e):void 0===e||this.manualReset||e.has(this)?this.status!==s&&this.refresh():(e.add(this),this.refresh())},e._push=function(t){this.status=s;var e,o=this.current;t instanceof Error?e=void 0===t[C]?t:t[C]:(e=this._conform(t,o),this._suggested=this._next,this._next=void 0),o!==e&&(this.current=e,_.newValue(this,o,e),this.obsoleteSlaves())},e.obsoleteSlaves=function(){this._slaves&&this._slaves.forEach(S)},e.refresh=function(){var t,e=this._masters;e&&(e.forEach(j,this),this._masters=null),this.status=i;var o=_,n=o.current;o.current=this;try{t=this._handler(this._next)}catch(e){void 0===e[m]&&(e[m]=!0,console.error(e.stack||e)),t=e}o.current=n,this.status!==a&&this._push(t)},e.dislead=function(t){var e=this._slaves;e&&(e.delete(t),0===e.size&&(this._slaves=null,_.proposeToReap(this)))},e._checkSlaves=function(){this._slaves?this._slaves.forEach(E):_.proposeToPull(this)},e.check=function(){this.status===s&&(this.status=r,this._checkSlaves())},e.obsolete=function(){this.status!==n&&(this.status=n,this._checkSlaves())},e.addMaster=function(t){this._masters||(this._masters=new Set),this._masters.add(t)},e.getRetry=function(){var t=this;if(void 0===this._retry){var e=function(){return t.refresh()};w(e,"atom("+this.toString()+").retry()"),this._retry=e}return this._retry},t}();function M(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}A.deepReset=void 0;var U=function(t){function e(e,o){var n;return(n=t.call(this,e,function(t){return R(n)._update(t)})||this)._propsChanged=!0,n._owner=o,n}M(e,t);var o=e.prototype;return o._update=function(t){return this._owner.__value(this._propsChanged)},o.reset=function(){this.status=n,this._propsChanged=!0},o._conform=function(t,e){return t},o.obsoleteSlaves=function(){this._propsChanged||this._owner.forceUpdate(),this._propsChanged=!1},e}(A);function z(t,o,n){function r(){var e=arguments;try{switch(e.length){case 0:t[o]();break;case 1:t[o](e[0]);break;case 2:t[o](e[0],e[1]);break;case 3:t[o](e[0],e[1],e[2]);break;case 4:t[o](e[0],e[1],e[2],e[3]);break;case 5:t[o](e[0],e[1],e[2],e[3],e[4]);break;default:t[o].apply(t,e)}}catch(t){if(!(t instanceof g)){var r=_.current;if(!r)throw t;r.value(t,l)}}n&&_.sync()}return r[e]=!0,w(r,b(t,o)),r}function W(t){function e(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];var r=function(){return t.apply(void 0,o)};w(r,t.displayName+"_cb"),f.add(r)}return w(e,t.displayName+"_defered"),e}function I(t,e,o,n,r){var i=e+"$";if(void 0===o.value)throw new TypeError(b(t,e)+" is not an function (next?: V)");t[i]=o.value;var s=!1;return{enumerable:o.enumerable,configurable:!0,get:function(){if(s)return this[i].bind(this);var t=z(this,i,r),o=n?W(t):t;return s=!0,Object.defineProperty(this,e,{configurable:!0,enumerable:!1,value:o}),s=!1,o}}}function L(t,e,o){return I(t,e,o,!0)}function V(t,e,o){return I(t,e,o,!1,!0)}function B(t,e){return function(o){return void 0===o?t.call(this):(e.call(this,o),o)}}function K(t){return function(e){return void 0===e&&t?t.call(this):e}}I.defer=L,I.sync=V;var F=u;function H(t,e,o,n){var r=e+"$";if(void 0!==t[r])return o;var i,s=new WeakMap;Object.defineProperty(t,e+"()",{get:function(){return s.get(this)}});var a=b(t,e);function u(t){var e=s.get(this);return void 0===e&&(e=new A(a,i.bind(this),this,s,n),s.set(this,e)),F===p?e:e.value(t,F)}return void 0!==o.value?(i=o.value,o.value=u,o):(o.initializer&&w(o.initializer,a),o.get&&w(o.get,"get#"+a),o.set&&w(o.set,"set#"+a),i=void 0===o.get&&void 0===o.set?K(o.initializer):B(o.get,o.set),t[r]=i,{enumerable:o.enumerable,configurable:o.configurable,get:u,set:u})}function q(t,e,o){return H(t,e,o,!0)}function $(t){return t?"object"==typeof t?JSON.stringify(t):""+t:""}function J(t,e,o,n){var r=e+"$";if(void 0!==t[r])return o;var i=new WeakMap;Object.defineProperty(t,e+"()",{get:function(){return i.get(this)}});var s=b(t,e),a=o.value;if(void 0===a)throw new TypeError(s+" is not an function (rawKey: K, next?: V)");function u(t,e){var o=i.get(this);void 0===o&&(o=new Map,i.set(this,o));var r=$(t),u=o.get(r);return void 0===u&&(u=new A(s,a.bind(this,t),r,o,n),o.set(r,u)),F===p?u:u.value(e,F)}return t[r]=a,o.value=u,o}function G(t,e,o){return J(t,e,o,!0)}function Q(t){return F=u,t}function X(t){return F=u,t.getRetry()}J.manual=G,Object.defineProperties(H,{cache:{get:function(){return F=l,Q}},getRetry:{get:function(){return F=p,X}},async:{get:function(){return F=c,Q}},manual:{value:q},key:{value:J}});var Y=function(){function t(){}var e=t.prototype;return e.componentWillMount=function(){var e=this.props;this._lastData=null,this._lastError=null,this.__componentWillMount&&this.__componentWillMount(),this.__atom=new t.ReactAtom(e&&e.id?e.id:this.constructor.displayName,this)},e.shouldComponentUpdate=function(t,e,o){var n=this.props,r=0;for(var i in n)if(r++,n[i]!==t[i])return this.__atom.reset(),!0;for(var s in t)if(r--,n[s]!==t[s])return this.__atom.reset(),!0;return 0!==r?(this.__atom.reset(),!0):!!this.__shouldComponentUpdate&&this.__shouldComponentUpdate(t,e,o)},e.componentWillUnmount=function(){this.__componentWillUnmount&&this.__componentWillUnmount(),this.__atom.destructor(),this.__atom=null,this._lastData=null,this._lastError=null},e.componentDidCatch=function(t,e){this.__componentDidCatch?this.__componentDidCatch(t,e):(this._lastError=t,this.forceUpdate())},e._getContext=function(t,e){return this.context},e.__value=function(t){var e=null;try{if(this._lastError)throw this._lastError;e=this.__render(this.props,this._getContext(this.constructor,t)),this._lastData=e}catch(o){if(this._lastError=null,!this._renderError)throw o;e=this._renderError({error:o,children:this._lastData,origProps:this.props},this._getContext(this._renderError,t))}return e},e.render=function(){return this.__atom.value()},t}();function Z(t,e){for(var o=0;o<t.length;o++){var n=t[o];-1===e.indexOf(n)&&e.push(n)}return e}function tt(t){var e=t.ReactAtom,o=t.renderError,n=t.BaseComponent,r=t.MixinComponent;Y.ReactAtom=e;var i=(r||Y).prototype;i._renderError=o;var s=Object.getOwnPropertyNames(Y.prototype);i!==Y.prototype&&Z(Object.getOwnPropertyNames(i),s);var a=s.filter(function(t){return"constructor"!==t}),u=new Map;return function(t){if(t.isConnected)throw new Error((t.displayName||t.name)+" already connected");t.isConnected=!0;var e=t;if("function"!=typeof e.prototype.render&&"function"==typeof t){if(!n)throw new Error("Setup createConnect with BaseComponent");(e=function(t,e){return n.call(this,t,e)||this}).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.render=t,e.displayName=t.displayName||t.name;for(var o=Object.getOwnPropertyNames(t),r=0;r<o.length;r++){var s=o[r];s in e||(e[s]=t[s])}}var l=u.get(e.displayName);void 0!==l?(l++,u.set(e.displayName,l),e.displayName=e.displayName+l):u.set(e.displayName,0);for(var c=e.prototype,p=0;p<a.length;p++){var d=a[p];d in c&&(c["__"+d]=c[d]),c[d]=i[d]}return e}}function et(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ot=Symbol("rdi_inst"),nt=Symbol("rdi_prop"),rt=0,it=Symbol("rdi_id"),st=function(t){t[it]=""+ ++rt,this.dest=t},at=function(){function t(e,o,n,r,i,s,a){this.id="",this.props=void 0,this._sheet=void 0,this._resolved=!1,this._listeners=void 0,this._state=n,this.instance=i||0,this.displayName=r||"",void 0===t.parentContext&&(t.parentContext=this),o&&(t.sheetManager=o),this._flags=a;var u=this._cache=s||Object.create(null);if(void 0!==e)for(var l=0;l<e.length;l++){var c=e[l];if(c instanceof Array){var p=c[0];if("string"==typeof p)u[p]=c[1];else{void 0===p[it]&&(p[it]=""+ ++rt);var d=c[1];u[p[it]]="function"!=typeof d||d instanceof st?d:new st(d)}}else{var h=c.constructor;void 0===h[it]&&(h[it]=""+ ++rt),u[h[it]]=c}}}var e=t.prototype;return e.getClassName=function(e,o){var n=this._sheet,r=this._flags;return void 0===n&&(n=this._sheet=t.sheetManager.createSheet(this.displayName+(r&&r.isDynamic?"_"+this.instance:""))),void 0!==e._dynamic&&r&&(r.isDynamic=!0),n.addRule(e,o)},e.toString=function(){return this.displayName+(this.instance?"["+this.instance+"]":"")},e.toJSON=function(){return this._cache},e.value=function(t){var e=t[it];void 0===t[it]&&(e=t[it]=""+ ++rt);var o=this._cache[e];if(void 0===o){o=this._cache[e]=this.invoke(t);var n=(t.displayName||t.name)+(this.instance>0?"["+this.instance+"]":"");o.displayName=this.displayName+"."+n,o[ot]=this;var r=void 0===this._state?void 0:this._state[n];if(r&&"object"==typeof r)for(var i in r)o[i]=r[i]}else o instanceof st&&(o=this._cache[e]=this.value(o.dest));return o},e.destructor=function(){this._sheet&&this._sheet.destructor(),this._sheet=void 0,this._cache=void 0,this._listeners=void 0},e.invoke=function(t){var e=!1,o=t.deps;void 0!==t._r&&(e=2===t._r[0],o=o||t._r[1]);var n=this.resolve(o);if(e)switch(n.length){case 0:return t();case 1:return t(n[0]);case 2:return t(n[0],n[1]);case 3:return t(n[0],n[1],n[2]);case 4:return t(n[0],n[1],n[2],n[3]);case 5:return t(n[0],n[1],n[2],n[3],n[4]);case 6:return t(n[0],n[1],n[2],n[3],n[4],n[5]);default:return t.apply(void 0,n)}switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);default:return new(Function.prototype.bind.apply(t,[null].concat(n)))}},e.alias=function(t,e){var o=e;void 0===o&&void 0===(o=t[it])&&(o=t[it]=""+ ++rt);var n=this._cache[o];return n instanceof st?n.dest:void 0===n?t:n},e.getContext=function(t,e){var o=t.deps||(void 0===t._r?void 0:t._r[1]);if(void 0!==o){var n=this.resolve(o),r=this._listeners;if(void 0!==e&&void 0!==r)for(var i=0;i<r.length;i++){var s=r[i];s[s.constructor[nt]]=e}return this._resolved=!0,n[0]}},e.copy=function(e){return new t(e.contextAliases,null,this._state,e.displayName,e.instance,Object.create(this._cache),e)},e.resolve=function(t){var e=[];if(void 0===t)return e;for(var o=this._listeners,n=this._resolved,r=0,i=t.length;r<i;r++){var s=t[r];if("object"==typeof s){var a={};for(var u in s){var l=s[u],c=this.value(l);!1===n&&void 0!==l[nt]&&(void 0===o&&(this._listeners=o=[]),o.push(c)),a[u]=c}e.push(a)}else{var p=this.value(s);!1===n&&void 0!==s[nt]&&(void 0===o&&(this._listeners=o=[]),o.push(p)),e.push(p)}}return e},t}();function ut(t,e,o,n){return void 0===n&&(n=new at),tt({ReactAtom:o,renderError:e,BaseComponent:t,MixinComponent:function(t){function e(){return t.apply(this,arguments)||this}et(e,t);var o=e.prototype;return o.componentWillMount=function(){t.prototype.componentWillMount.call(this);var e=this.constructor;void 0===e.instance&&(e.instance=0,e.isDynamic=!1),e.instance++;var o=n,r=this.props;r&&void 0!==r.__lom_ctx&&(o=r.__lom_ctx),this._injector=o.copy(e),this._injector.id=e.displayName,this._injector.props=r},o.componentWillUnmount=function(){this.constructor.instance--,this._injector.destructor(),t.prototype.componentWillUnmount.call(this)},o.__value=function(e){var o=at.parentContext;at.parentContext=this._injector;var n=t.prototype.__value.call(this,e);return at.parentContext=o,n},o._getContext=function(t,e){return this._injector.getContext(t,e?this.props:void 0)},e}(Y)})}function lt(t,e,o){function n(){var n,r=arguments,i=r[1],s=r[0],a="function"==typeof s&&void 0===s.constructor.render,u=at.parentContext,l=u.props,c=void 0;if(i){var p=u.id;c=i.rdi_id||i.id;var d=i.class;if("object"==typeof d&&(i.class=d=u.getClassName(d,c)),!0===i.rdi_theme){if(i.rdi_theme=void 0,l){var h=l.class;void 0!==h&&(i.class=void 0===d?h:d+" "+h);var f=l.style;if(void 0!==f){var v=i.style;if(void 0===v)i.style=f;else for(var _ in f)v[_]=f[_]}}o&&(i.id=p)}else o&&""!==p&&void 0!==i.id&&(i.id=p+"."+i.id)}if(a){if(null===(n=u.alias(s,c)))return null;void 0!==n&&(s=n),i?i.__lom_ctx=u:i={__lom_ctx:u},void 0===s.__lom&&(s.__lom=t(s)),n=s.__lom}else{if(c){if(null===(n=u.alias(s,c)))return null;void 0!==n&&(s=n)}n=s}switch(r.length){case 2:return e(n,i);case 3:return e(n,i,r[2]);case 4:return e(n,i,r[2],r[3]);case 5:return e(n,i,r[2],r[3],r[4]);case 6:return e(n,i,r[2],r[3],r[4],r[5]);case 7:return e(n,i,r[2],r[3],r[4],r[5],r[6]);case 8:return e(n,i,r[2],r[3],r[4],r[5],r[6],r[7]);case 9:return e(n,i,r[2],r[3],r[4],r[5],r[6],r[7],r[8]);default:if(!1===a)return e.apply(null,r);for(var m=[n,i],y=2,g=r.length;y<g;y++)m.push(r[y]);return e.apply(null,m)}}return n}function ct(){}var pt={},dt=[],ht=[];function ft(t,e){var o,n,r,i,s=ht;for(i=arguments.length;i-- >2;)dt.push(arguments[i]);for(e&&null!=e.children&&(dt.length||dt.push(e.children),delete e.children);dt.length;)if((n=dt.pop())&&void 0!==n.pop)for(i=n.length;i--;)dt.push(n[i]);else"boolean"==typeof n&&(n=null),(r="function"!=typeof t)&&(null==n?n="":"number"==typeof n?n=String(n):"string"!=typeof n&&(r=!1)),r&&o?s[s.length-1]+=n:s===ht?s=[n]:s.push(n),o=r;var a=new ct;return a.nodeName=t,a.children=s,a.attributes=null==e?void 0:e,a.key=null==e?void 0:e.key,void 0!==pt.vnode&&pt.vnode(a),a}function vt(t,e){for(var o in e)t[o]=e[o];return t}var _t="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,mt=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,yt=[];function gt(t){!t._dirty&&(t._dirty=!0)&&1==yt.push(t)&&(pt.debounceRendering||_t)(bt)}function bt(){var t,e=yt;for(yt=[];t=e.pop();)t._dirty&&Ht(t)}function wt(t,e,o){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&Ct(t,e.nodeName):o||t._componentConstructor===e.nodeName}function Ct(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function xt(t){var e=vt({},t.attributes);e.children=t.children;var o=t.nodeName.defaultProps;if(void 0!==o)for(var n in o)void 0===e[n]&&(e[n]=o[n]);return e}function Nt(t,e){var o=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return o.normalizedNodeName=t,o}function Ot(t){var e=t.parentNode;e&&e.removeChild(t)}function kt(t,e,o,n,r){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)o&&o(null),n&&n(t);else if("class"!==e||r)if("style"===e){if(n&&"string"!=typeof n&&"string"!=typeof o||(t.style.cssText=n||""),n&&"object"==typeof n){if("string"!=typeof o)for(var i in o)i in n||(t.style[i]="");for(var i in n)t.style[i]="number"==typeof n[i]&&!1===mt.test(i)?n[i]+"px":n[i]}}else if("dangerouslySetInnerHTML"===e)n&&(t.innerHTML=n.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),n?o||t.addEventListener(e,Et,s):t.removeEventListener(e,Et,s),(t._listeners||(t._listeners={}))[e]=n}else if("list"!==e&&"type"!==e&&!r&&e in t)Tt(t,e,null==n?"":n),null!=n&&!1!==n||t.removeAttribute(e);else{var a=r&&e!==(e=e.replace(/^xlink\:?/,""));null==n||!1===n?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof n&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):t.setAttribute(e,n))}else t.className=n||""}function Tt(t,e,o){try{t[e]=o}catch(t){}}function Et(t){return this._listeners[t.type](pt.event&&pt.event(t)||t)}var St=[],jt=0,Pt=!1,Dt=!1;function At(){for(var t;t=St.pop();)pt.afterMount&&pt.afterMount(t),t.componentDidMount&&t.componentDidMount()}function Mt(t,e,o,n,r,i){jt++||(Pt=null!=r&&void 0!==r.ownerSVGElement,Dt=null!=t&&!("__preactattr_"in t));var s=Rt(t,e,o,n,i);return r&&s.parentNode!==r&&r.appendChild(s),--jt||(Dt=!1,i||At()),s}function Rt(t,e,o,n,r){var i=t,s=Pt;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),zt(t,!0))),i.__preactattr_=!0,i;var a=e.nodeName;if("function"==typeof a)return qt(t,e,o,n);if(Pt="svg"===a||"foreignObject"!==a&&Pt,a=String(a),(!t||!Ct(t,a))&&(i=Nt(a,Pt),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),zt(t,!0)}var u=i.firstChild,l=i.__preactattr_,c=e.children;if(null==l){l=i.__preactattr_={};for(var p=i.attributes,d=p.length;d--;)l[p[d].name]=p[d].value}return!Dt&&c&&1===c.length&&"string"==typeof c[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=c[0]&&(u.nodeValue=c[0]):(c&&c.length||null!=u)&&Ut(i,c,o,n,Dt||null!=l.dangerouslySetInnerHTML),It(i,e.attributes,l),Pt=s,i}function Ut(t,e,o,n,r){var i,s,a,u,l,c=t.childNodes,p=[],d={},h=0,f=0,v=c.length,_=0,m=e?e.length:0;if(0!==v)for(var y=0;y<v;y++){var g=c[y],b=g.__preactattr_;null!=(w=m&&b?g._component?g._component.__key:b.key:null)?(h++,d[w]=g):(b||(void 0!==g.splitText?!r||g.nodeValue.trim():r))&&(p[_++]=g)}if(0!==m)for(y=0;y<m;y++){var w;if(l=null,null!=(w=(u=e[y]).key))h&&void 0!==d[w]&&(l=d[w],d[w]=void 0,h--);else if(!l&&f<_)for(i=f;i<_;i++)if(void 0!==p[i]&&wt(s=p[i],u,r)){l=s,p[i]=void 0,i===_-1&&_--,i===f&&f++;break}l=Rt(l,u,o,n),a=c[y],l&&l!==t&&l!==a&&(null==a?t.appendChild(l):l===a.nextSibling?Ot(a):t.insertBefore(l,a))}if(h)for(var y in d)void 0!==d[y]&&zt(d[y],!1);for(;f<=_;)void 0!==(l=p[_--])&&zt(l,!1)}function zt(t,e){var o=t._component;o?$t(o):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||Ot(t),Wt(t))}function Wt(t){for(t=t.lastChild;t;){var e=t.previousSibling;zt(t,!0),t=e}}function It(t,e,o){var n;for(n in o)e&&null!=e[n]||null==o[n]||kt(t,n,o[n],o[n]=void 0,Pt);for(n in e)"children"===n||"innerHTML"===n||n in o&&e[n]===("value"===n||"checked"===n?t[n]:o[n])||kt(t,n,o[n],o[n]=e[n],Pt)}var Lt={};function Vt(t){var e=t.constructor.name;(Lt[e]||(Lt[e]=[])).push(t)}function Bt(t,e,o){var n,r=Lt[t.name];if(t.prototype&&t.prototype.render?(n=new t(e,o),Jt.call(n,e,o)):((n=new Jt(e,o)).constructor=t,n.render=Kt),r)for(var i=r.length;i--;)if(r[i].constructor===t){n.nextBase=r[i].nextBase,r.splice(i,1);break}return n}function Kt(t,e,o){return this.constructor(t,o)}function Ft(t,e,o,n,r){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,n),n&&n!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=n),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==o&&(1!==o&&!1===pt.syncComponentUpdates&&t.base?gt(t):Ht(t,1,r)),t.__ref&&t.__ref(t))}function Ht(t,e,o,n){if(!t._disable){var r,i,s,a=t.props,u=t.state,l=t.context,c=t.prevProps||a,p=t.prevState||u,d=t.prevContext||l,h=t.base,f=t.nextBase,v=h||f,_=t._component,m=!1;if(h&&(t.props=c,t.state=p,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,u,l)?m=!0:t.componentWillUpdate&&t.componentWillUpdate(a,u,l),t.props=a,t.state=u,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!m){r=t.render(a,u,l),t.getChildContext&&(l=vt(vt({},l),t.getChildContext()));var y,g,b=r&&r.nodeName;if("function"==typeof b){var w=xt(r);(i=_)&&i.constructor===b&&w.key==i.__key?Ft(i,w,1,l,!1):(y=i,t._component=i=Bt(b,w,l),i.nextBase=i.nextBase||f,i._parentComponent=t,Ft(i,w,0,l,!1),Ht(i,1,o,!0)),g=i.base}else s=v,(y=_)&&(s=t._component=null),(v||1===e)&&(s&&(s._component=null),g=Mt(s,r,l,o||!h,v&&v.parentNode,!0));if(v&&g!==v&&i!==_){var C=v.parentNode;C&&g!==C&&(C.replaceChild(g,v),y||(v._component=null,zt(v,!1)))}if(y&&$t(y),t.base=g,g&&!n){for(var x=t,N=t;N=N._parentComponent;)(x=N).base=g;g._component=x,g._componentConstructor=x.constructor}}if(!h||o?St.unshift(t):m||(t.componentDidUpdate&&t.componentDidUpdate(c,p,d),pt.afterUpdate&&pt.afterUpdate(t)),null!=t._renderCallbacks)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);jt||n||At()}}function qt(t,e,o,n){for(var r=t&&t._component,i=r,s=t,a=r&&t._componentConstructor===e.nodeName,u=a,l=xt(e);r&&!u&&(r=r._parentComponent);)u=r.constructor===e.nodeName;return r&&u&&(!n||r._component)?(Ft(r,l,3,o,n),t=r.base):(i&&!a&&($t(i),t=s=null),r=Bt(e.nodeName,l,o),t&&!r.nextBase&&(r.nextBase=t,s=null),Ft(r,l,1,o,n),t=r.base,s&&t!==s&&(s._component=null,zt(s,!1))),t}function $t(t){pt.beforeUnmount&&pt.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var o=t._component;o?$t(o):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.nextBase=e,Ot(e),Vt(t),Wt(e)),t.__ref&&t.__ref(null)}function Jt(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function Gt(t,e,o){return Mt(o,t,{},!1,e,!1)}function Qt(t){var e=t.error;return lom_h("div",null,e instanceof g?lom_h("div",null,"Loading..."):lom_h("div",null,lom_h("h3",null,"Fatal error !"),lom_h("div",null,e.message),lom_h("pre",null,e.stack.toString())))}vt(Jt.prototype,{setState:function(t,e){var o=this.state;this.prevState||(this.prevState=vt({},o)),vt(o,"function"==typeof t?t(o,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),gt(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),Ht(this,2)},render:function(){}});var Xt=lt(ut(Jt,Qt,U),ft);function Yt(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zt(t,e,o){return e&&Yt(t.prototype,e),o&&Yt(t,o),t}function te(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ee(t,e,o,n){o&&Object.defineProperty(t,e,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(n):void 0})}function oe(t,e,o,n,r){var i={};return Object.keys(n).forEach(function(t){i[t]=n[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=o.slice().reverse().reduce(function(o,n){return n(t,e,o)||o},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function ne(){for(var t="",e=0;e<32;e++){var o=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&o|8:o).toString(16)}return t}function re(t,e){return 1===t?e:e+"s"}t.lom_h=Xt;var ie=function(t){function e(e,o){var n;return(n=t.call(this)||this)._ns="app",n._location=e,n._history=o,n}te(e,t);var o=e.prototype;return o._params=function(){return new URLSearchParams(this._location.search)},o.location=function(t,e){var o=this._params();return void 0===e?o.get(t):(o.set(t,e),this._history.pushState(null,this._ns,"?"+o.toString()),e)},e}(function(){function t(){}return t.prototype.location=function(t,e){throw new Error("implement")},t}());function se(){var t=document.getElementById("todoapp");if(!t)throw new Error("todoapp id not found in document");return t}var ae,ue,le,ce,pe=13,de=27,he={ALL:"all",COMPLETE:"complete",ACTIVE:"active"},fe=function(){function t(t){void 0===t&&(t=new ie(location,history)),this._locationStore=t}return t.prototype.filtered=function(t){switch(this.filter){case he.ALL:return t;case he.COMPLETE:return t.filter(function(t){return!!t.completed});case he.ACTIVE:return t.filter(function(t){return!t.completed});default:throw new Error("Unknown filter value: "+String(this.filter))}},Zt(t,[{key:"filter",get:function(){return this._locationStore.location("todo_filter")||he.ALL},set:function(t){return this._locationStore.location("todo_filter",t)}}]),t}(),ve=(oe((ae=function(){function t(t){this.completed=!1,this.title="",this.id=ne(),Object.defineProperties(this,{_repository:{value:t}})}var e=t.prototype;return e.copy=function(t){return Object.assign(new this.constructor(this._repository),this,t)},e.update=function(t){this._repository.update(this.copy(t))},e.delete=function(){this._repository.delete(this)},t}()).prototype,"update",[I],Object.getOwnPropertyDescriptor(ae.prototype,"update"),ae.prototype),oe(ae.prototype,"delete",[I],Object.getOwnPropertyDescriptor(ae.prototype,"delete"),ae.prototype),ae),_e=(oe((ue=function(){function t(){this._todoFilter=new fe}var e=t.prototype;return e.addTodo=function(t){var e=new ve(this);e.title=t,this.todos=this.todos.concat(e)},e.update=function(t){this.todos=this.todos.map(function(e){return t.id===e.id?t:e})},e.delete=function(t){this.todos=this.todos.filter(function(e){return t.id!==e.id})},e.toggleAll=function(){var t=this.activeTodoCount>0;this.todos=this.todos.map(function(e){return e.copy({completed:t})})},e.clearCompleted=function(){this.todos=this.todos.filter(function(t){return!t.completed})},Zt(t,[{key:"todos",get:function(){return[]},set:function(t){}},{key:"activeTodoCount",get:function(){return this.todos.reduce(function(t,e){return t+(e.completed?0:1)},0)}},{key:"completedCount",get:function(){return this.todos.length-this.activeTodoCount}},{key:"filter",get:function(){return this._todoFilter.filter}},{key:"filteredTodos",get:function(){return this._todoFilter.filtered(this.todos)}}]),t}()).prototype,"todos",[H],Object.getOwnPropertyDescriptor(ue.prototype,"todos"),ue.prototype),oe(ue.prototype,"activeTodoCount",[H],Object.getOwnPropertyDescriptor(ue.prototype,"activeTodoCount"),ue.prototype),oe(ue.prototype,"addTodo",[I],Object.getOwnPropertyDescriptor(ue.prototype,"addTodo"),ue.prototype),oe(ue.prototype,"toggleAll",[I],Object.getOwnPropertyDescriptor(ue.prototype,"toggleAll"),ue.prototype),oe(ue.prototype,"clearCompleted",[I],Object.getOwnPropertyDescriptor(ue.prototype,"clearCompleted"),ue.prototype),oe(ue.prototype,"filteredTodos",[H],Object.getOwnPropertyDescriptor(ue.prototype,"filteredTodos"),ue.prototype),ue);function me(t){var e=t.onInput,o=t.title,n=t.onKeyDown;return lom_h("header",{id:"header"},lom_h("h1",null,"todos"),lom_h("input",{id:"new-todo",placeholder:"What needs to be done?",onInput:e,value:o,onKeyDown:n,autoFocus:!0}))}var ye=(ce=oe((le=function(){function t(t){ee(this,"title",ce,this),this._todoRepository=t}var e=t.prototype;return e.onInput=function(t){var e=t.target;this.title=e.value},e.onKeyDown=function(t){if(t.keyCode===pe&&this.title){t.preventDefault();var e=this.title.trim();e&&(this._todoRepository.addTodo(e),this.title="")}},t}()).prototype,"title",[H],{enumerable:!0,initializer:function(){return""}}),oe(le.prototype,"onInput",[I],Object.getOwnPropertyDescriptor(le.prototype,"onInput"),le.prototype),oe(le.prototype,"onKeyDown",[I],Object.getOwnPropertyDescriptor(le.prototype,"onKeyDown"),le.prototype),le);function ge(t){return me(t.todoHeaderService)}var be,we,Ce,xe,Ne="all",Oe="active",ke="completed";function Te(t){var e=t.filter,o=t.activeTodoCount,n=t.completedCount,r=t.clearCompleted;return o||n?lom_h("footer",{id:"footer"},lom_h("span",{id:"todo-activeTodoCount"},lom_h("strong",null,o)," ",re(o,"item")," left"),lom_h("ul",{id:"filters"},lom_h("li",null,lom_h("a",{href:"./?todo_filter=all",className:{selected:e===Ne}},"All"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=active",className:{selected:e===Oe}},"Active"))," ",lom_h("li",null,lom_h("a",{href:"./?todo_filter=completed",className:{selected:e===ke}},"Completed"))),n>0?lom_h("button",{id:"clear-completed",onClick:r},"Clear completed"):null):null}function Ee(t){var e=t.todo,o=t.editingId,n=t.toggle,r=t.destroy,i=t.beginEdit,s=t.setFocus,a=t.editText,u=t.setEditText,l=t.submit,c=t.onKey,p=o===e.id;return lom_h("li",{className:(e.completed?"completed ":" ")+(p?"editing":"")},lom_h("div",{className:"view"},lom_h("input",{className:"toggle",type:"checkbox",checked:e.completed||0,onClick:n}),lom_h("label",{onDoubleClick:i,onDblClick:i},e.title),lom_h("button",{className:"destroy",onClick:r})),p?lom_h("input",{ref:s,className:"edit",value:o&&a||e.title,onBlur:l,onInput:u,onKeyDown:c}):null)}var Se=(be=I.defer,Ce=oe((we=function(){function t(){ee(this,"editingId",Ce,this),ee(this,"editText",xe,this)}var e=t.prototype;return e.beginEdit=function(){var t=this._todo;this.editText=t.title,this.editingId=t.id},e.setFocus=function(t){t&&t.focus()},e.setEditText=function(t){this.editText=t.target.value},e.cancel=function(){this.editText="",this.editingId=null},e.submit=function(){this.editingId&&(this._todo.update({title:this.editText}),this.editText="",this.editingId=null)},e.toggle=function(){this._todo.update({completed:!this._todo.completed})},e.onKey=function(t){t.which===de?this.cancel():t.which===pe&&this.submit()},t}()).prototype,"editingId",[H],{enumerable:!0,initializer:function(){return null}}),xe=oe(we.prototype,"editText",[H],{enumerable:!0,initializer:function(){return""}}),oe(we.prototype,"beginEdit",[I],Object.getOwnPropertyDescriptor(we.prototype,"beginEdit"),we.prototype),oe(we.prototype,"setFocus",[be],Object.getOwnPropertyDescriptor(we.prototype,"setFocus"),we.prototype),oe(we.prototype,"setEditText",[I],Object.getOwnPropertyDescriptor(we.prototype,"setEditText"),we.prototype),oe(we.prototype,"cancel",[I],Object.getOwnPropertyDescriptor(we.prototype,"cancel"),we.prototype),oe(we.prototype,"submit",[I],Object.getOwnPropertyDescriptor(we.prototype,"submit"),we.prototype),oe(we.prototype,"toggle",[I],Object.getOwnPropertyDescriptor(we.prototype,"toggle"),we.prototype),oe(we.prototype,"onKey",[I],Object.getOwnPropertyDescriptor(we.prototype,"onKey"),we.prototype),we),je=Symbol("editCache");function Pe(t){var e=t.todo,o=e[je];o||((o=new Se)._todo=e,e[je]=o);var n=o,r=n.beginEdit,i=n.onKey,s=n.submit,a=n.setEditText,u=n.setFocus,l=n.editingId,c=n.editText,p=n.toggle;return Ee({onKey:i,submit:s,setEditText:a,setFocus:u,editingId:l,editText:c,beginEdit:r,todo:e,destroy:e.delete,toggle:p})}function De(t){var e=t.toggleAll,o=t.activeTodoCount,n=t.filteredTodos,r=t.TodoItemView;return lom_h("section",{id:"main"},lom_h("input",{id:"toggle-all",type:"checkbox",onChange:e,checked:0===o}),lom_h("ul",{id:"todo-list"},n.map(function(t){return lom_h(r,{key:t.id,todo:t})})))}function Ae(t){var e=t.todoRepository,o=t.todoHeaderService;return lom_h("div",null,lom_h(ge,{todoHeaderService:o}),e.todos.length>0?lom_h(De,{toggleAll:e.toggleAll,activeTodoCount:e.activeTodoCount,filteredTodos:e.filteredTodos,TodoItemView:Pe}):null,lom_h(Te,{activeTodoCount:e.activeTodoCount,completedCount:e.completedCount,filter:e.filter,clearCompleted:e.clearCompleted}))}var Me=new _e,Re=new ye(Me);Gt(lom_h(Ae,{todoHeaderService:Re,todoRepository:Me}),se())}();
//# sourceMappingURL=bundle.js.map
